import * as React from 'react';

import { ModelType, Muscle, IModelProps, IMuscleStats } from './metadata';

import { anteriorData, posteriorData } from '../assets';
import { ensure, fillIntensityColor, fillMuscleData } from '../utils';
import { DEFAULT_BODY_COLOR, DEFAULT_HIGHLIGHTED_COLORS, DEFAULT_MODEL_TYPE } from '../constants';

/**
 * Component which displays a model of a body. Accepts many optional props for manipulating functionality or visuals of the component.
 *
 * @param data Array containing exercise objects
 * @param bodyColor Default color of body model (with no muscles worked)
 * @param highlightedColors Array containing colors to display depending on frequency muscle is worked (where array index = frequency - 1)
 * @param onClick Callback function when a muscle is clicked (returns back object with muscle-related data)
 * @param svgStyle Style object that gets passed to SVG element
 * @param style Style object that gets passed to SVG parent wrapper (div)
 * @param type Denotes type of model (default `anterior` view vs `posterior` view)
 *
 * @component
 * @example
 * const data = [{ name: 'Bench Press', muscles: ['chest', 'triceps', 'front-deltoids'] }]
 * return (
 *   <Model type="posterior" data={data} />
 * )
 */
export default React.memo(function Model({
  data = [],
  bodyColor = DEFAULT_BODY_COLOR,
  highlightedColors = DEFAULT_HIGHLIGHTED_COLORS,
  onClick,
  svgStyle,
  style,
  type = DEFAULT_MODEL_TYPE,
}) {
  const muscleData = fillMuscleData([...data]);

  const modelData = type === ModelType.ANTERIOR ? anteriorData : posteriorData;

  const handleClick = (muscle, callback) => {
    callback && callback({ muscle, data: muscleData[muscle] });
  };

  return (
    <div style={style} className="rbh-wrapper">
      <svg
        className="rbh"
        width="100%"
        height="90%"
        viewBox="0 0 300 574"
        style={{
     
          ...svgStyle,
        }}
      >
        <path d="M166.297 5.52625C170.504 8.78197 173.693 
13.1708 175.491 18.1768C177.289 23.1829 177.621 28.5982 176.447 33.7863C176.75 33.1025 177.213 32.5021 177.797 32.0363C177.983 31.8929 178.2 31.7948 178.431 31.7499C178.661 31.705 178.899 31.7145 179.125 31.7776C179.351 31.8407 179.56 31.9557 179.734 32.1134C179.908 32.2711 180.042 32.4673 180.127 32.6862C180.127 32.8262 180.197 32.9563 180.237 33.1063C180.963 35.8262 180.682 38.7165 179.447 41.2462C179.275 41.5661 179.131 41.9008 179.017 42.2462C177.497 46.8862 176.747 47.3262 176.137 47.4662C175.294 47.5925 174.434 47.4077 173.717 46.9463C173.517 48.5863 173.167 51.0863 172.587 54.1263C171.737 58.5563 171.117 60.2363 170.637 62.9563C169.995 66.7093 169.897 70.5353 170.347 74.3163C169.93 76.3935 170.241 78.5512 171.227 80.4262C172.897 83.3162 176.157 84.2763 177.347 84.6663C180.817 85.7863 185.777 88.2063 192.817 93.6663C194.833 95.2699 197.365 96.0808 199.937 95.9463C205.113 95.6259 210.283 96.6599 214.937 98.9463C215.677 99.3063 227.097 105.156 230.087 116.696C230.387 117.856 230.417 118.386 231.027 132.236C231.027 133.236 231.147 134.926 231.217 136.746C231.375 140.469 231.966 144.16 232.977 147.746C234.177 151.914 235.099 156.157 235.737 160.446C236.527 165.746 235.957 166.076 236.807 174.366C237.367 179.776 237.647 182.486 238.437 185.266C240.097 191.036 242.617 194.036 244.867 197.716C246.987 201.196 246.557 201.516 252.077 218.826C258.137 237.826 260.807 244.216 262.907 248.826C264.687 252.706 266.297 255.826 267.377 257.826C267.924 259.3 268.467 260.766 269.007 262.226C269.803 263.277 270.754 264.201 271.827 264.966C274.007 266.496 275.147 266.236 277.907 267.316C281.257 268.704 284.264 270.806 286.717 273.476C287.558 274.359 288.349 275.287 289.087 276.256C292.121 279.658 295.469 282.765 299.087 285.536C299.255 285.67 299.383 285.847 299.459 286.047C299.534 286.248 299.554 286.465 299.516 286.676C299.478 286.888 299.384 287.084 299.243 287.246C299.103 287.408 298.921 287.529 298.717 287.596C298.088 287.792 297.436 287.906 296.777 287.936H296.307C292.697 287.216 291.697 284.636 285.637 281.646C284.347 281.146 282.697 280.196 282.007 280.056C281.707 280.396 280.947 280.296 281.277 280.606C283.657 282.876 283.477 283.606 284.337 285.056C287.777 290.966 291.417 295.266 295.397 300.836C298.647 305.396 299.087 308.166 298.337 309.156C297.967 309.656 297.337 309.656 296.587 309.496C294.893 308.941 293.432 307.836 292.437 306.356C290.767 304.146 289.847 303.106 288.877 301.546C287.087 298.721 284.961 296.122 282.547 293.806C282.498 293.697 282.428 293.599 282.341 293.517C282.253 293.435 282.151 293.371 282.039 293.329C281.927 293.287 281.808 293.267 281.689 293.271C281.569 293.275 281.451 293.302 281.342 293.351C281.233 293.4 281.135 293.471 281.053 293.558C280.971 293.645 280.908 293.748 280.865 293.86C280.823 293.971 280.803 294.091 280.807 294.21C280.811 294.33 280.838 294.447 280.887 294.556C289.997 312.256 291.017 317.046 290.007 317.876C289.702 318.005 289.374 318.072 289.042 318.072C288.711 318.072 288.383 318.005 288.077 317.876C286.937 317.128 286.013 316.093 285.397 314.876C282.047 309.206 279.397 303.976 276.007 298.306C275.307 297.366 274.337 297.166 273.947 297.496C273.557 297.826 273.647 298.306 273.817 298.856C275.327 302.926 280.417 316.916 279.817 319.576C279.737 319.916 279.517 320.836 278.927 321.006C278.337 321.176 277.677 320.496 277.317 320.106C275.585 318.373 274.183 316.34 273.177 314.106C271.997 310.906 270.717 307.696 268.877 302.856C268.627 302.166 268.377 301.476 268.137 300.786C267.94 300.067 267.569 299.408 267.057 298.866C266.716 298.645 266.314 298.533 265.907 298.546L266.447 312.886C266.217 314.556 265.657 315.756 265.017 315.806C264.377 315.856 263.937 314.986 263.597 314.426C263.008 313.449 262.629 312.359 262.487 311.226C262.277 309.056 261.487 304.036 260.347 297.146C258.227 293.266 256.757 290.356 256.347 289.446C255.517 287.576 255.667 287.676 254.477 284.896C252.757 280.896 252.097 279.896 251.257 277.396C250.743 275.873 250.335 274.316 250.037 272.736L247.937 268.596C241.331 261.264 235.291 253.442 229.867 245.196C225.996 239.36 222.486 233.292 219.357 227.026C214.331 217.21 211.09 206.578 209.787 195.626C209.667 194.626 209.537 193.576 209.377 192.506C208.626 187.722 207.523 182.999 206.077 178.376C204.517 173.085 202.63 167.895 200.427 162.836C200.167 167.31 199.874 171.823 199.547 176.376C198.801 186.756 197.894 196.89 196.827 206.776V206.946C195.796 213.291 195.749 219.757 196.687 226.116L198.107 235.826C201.583 244.741 204.055 254.015 205.477 263.476C206.287 268.936 206.787 275.076 207.047 278.206C207.647 285.396 207.917 291.646 207.987 294.686C208.407 312.356 204.447 329.236 202.477 337.466C199.287 350.746 197.767 351.666 193.867 368.146C191.797 376.896 190.447 384.146 189.627 388.866C189.938 400.236 188.989 411.605 186.797 422.766C188.384 428.473 189.488 434.304 190.097 440.196C190.844 447.554 190.844 454.969 190.097 462.326C187.477 490.216 178.737 500.206 175.097 530.686C175.022 531.518 175.022 532.355 175.097 533.186C175.158 534.087 175.057 534.991 174.797 535.856C174.427 537.086 174.037 538.306 173.797 539.566C173.737 539.846 173.677 540.146 173.617 540.446C173.147 542.512 172.949 544.629 173.027 546.746C173.237 548.876 174.087 549.136 177.237 554.176C180.817 559.906 181.397 562.286 181.607 563.286C181.801 564.093 181.912 564.917 181.937 565.746C181.937 566.566 181.717 568.316 180.827 568.616C180.357 568.776 180.167 568.376 179.647 568.556C178.967 568.796 179.057 569.556 178.167 570.106C177.888 570.285 177.568 570.392 177.237 570.416C176.717 570.416 176.507 570.206 175.927 570.166C175.563 570.15 175.199 570.208 174.857 570.336C173.977 570.596 173.857 570.976 173.077 571.336C172.549 571.555 171.979 571.654 171.407 571.626C170.297 571.626 170.197 571.076 169.107 571.066C168.488 571.011 167.872 571.198 167.387 571.586C167.087 571.876 167.117 572.076 166.817 572.346C166.386 572.646 165.857 572.771 165.337 572.696C163.837 572.696 163.337 569.026 162.597 569.836C161.734 570.977 160.77 572.037 159.717 573.006C158.547 573.826 156.777 573.176 156.087 572.926C153.487 571.926 152.397 569.386 151.887 568.186C151.455 567.174 151.182 566.102 151.077 565.006C150.767 561.746 152.207 560.316 152.257 556.006C152.257 553.476 151.807 552.886 151.547 550.386C151.281 547.771 151.44 545.13 152.017 542.566C152.523 540.234 152.611 537.83 152.277 535.466C152.017 533.687 152.041 531.878 152.347 530.106C152.904 527.341 154.069 524.735 155.757 522.476C161.237 514.186 159.277 501.776 157.567 490.966C156.177 482.156 154.827 482.476 153.957 474.096C153.237 467.246 153.627 462.016 154.157 455.226C154.467 451.226 154.987 446.226 155.907 440.516C156.798 434.937 156.567 429.235 155.227 423.746L153.227 415.576C152.348 411.976 151.901 408.283 151.897 404.576C151.897 401.096 151.897 396.916 152.007 392.206C152.417 371.886 153.677 368.366 153.417 355.476C153.157 342.476 151.997 341.236 151.067 324.396C150.347 311.396 150.407 300.786 150.577 293.906H148.937C149.107 300.786 149.167 311.396 148.447 324.396C147.517 341.236 146.357 342.396 146.097 355.476C145.837 368.366 147.097 371.886 147.507 392.206C147.597 396.916 147.627 401.096 147.617 404.576C147.614 408.283 147.167 411.976 146.287 415.576L144.287 423.746C142.948 429.235 142.717 434.937 143.607 440.516C144.527 446.266 145.047 451.236 145.357 455.226C145.887 462.016 146.277 467.226 145.557 474.096C144.687 482.476 143.337 482.156 141.947 490.966C140.237 501.776 138.277 514.186 143.757 522.476C145.446 524.735 146.611 527.341 147.167 530.106C147.474 531.878 147.498 533.687 147.237 535.466C146.903 537.83 146.992 540.234 147.497 542.566C148.075 545.13 148.234 547.771 147.967 550.386C147.707 552.886 147.217 553.476 147.257 556.006C147.257 560.306 148.747 561.736 148.437 565.006C148.332 566.102 148.059 567.174 147.627 568.186C147.117 569.386 146.027 571.976 143.427 572.926C142.737 573.176 140.967 573.826 139.797 573.006C138.745 572.037 137.781 570.977 136.917 569.836C136.217 569.026 135.677 572.666 134.177 572.696C133.658 572.771 133.129 572.646 132.697 572.346C132.397 572.076 132.427 571.876 132.127 571.586C131.643 571.198 131.026 571.011 130.407 571.066C129.317 571.066 129.217 571.576 128.107 571.626C127.536 571.654 126.966 571.555 126.437 571.336C125.657 571.006 125.537 570.626 124.657 570.336C124.316 570.208 123.952 570.15 123.587 570.166C123.007 570.166 122.797 570.436 122.277 570.416C121.946 570.392 121.627 570.285 121.347 570.106C120.457 569.576 120.547 568.796 119.867 568.556C119.347 568.376 119.157 568.776 118.687 568.616C117.797 568.316 117.577 566.616 117.577 565.746C117.615 564.926 117.735 564.112 117.937 563.316C118.147 562.316 118.727 559.936 122.307 554.206C125.457 549.206 126.307 548.906 126.517 546.776C126.596 544.659 126.398 542.542 125.927 540.476C125.867 540.176 125.807 539.876 125.747 539.596C125.487 538.336 125.097 537.116 124.747 535.886C124.488 535.021 124.386 534.117 124.447 533.216C124.522 532.385 124.522 531.548 124.447 530.716C120.767 500.236 112.027 490.246 109.447 462.356C108.7 454.998 108.7 447.584 109.447 440.226C110.059 434.335 111.159 428.505 112.737 422.796C111.647 417.176 110.862 411.501 110.387 405.796C109.918 400.143 109.761 394.467 109.917 388.796C109.097 384.066 107.747 376.796 105.677 368.076C101.777 351.596 100.257 350.676 97.0674 337.396C95.0674 329.166 91.1374 312.286 91.5474 294.616C91.6274 291.616 91.8974 285.326 92.4974 278.136C92.7574 275.006 93.2574 268.866 94.0674 263.406C95.4899 253.945 97.9618 244.671 101.437 235.756L102.857 226.046C103.796 219.687 103.749 213.221 102.717 206.876V206.706C101.657 196.82 100.751 186.686 99.9974 176.306C99.664 171.76 99.3707 167.246 99.1174 162.766C96.9151 167.825 95.0282 173.015 93.4674 178.306C92.0221 182.929 90.9192 187.652 90.1674 192.436C90.0074 193.506 89.8774 194.546 89.7574 195.556C88.4544 206.508 85.214 217.14 80.1874 226.956C77.0583 233.222 73.5484 239.29 69.6774 245.126C64.254 253.372 58.2134 261.194 51.6074 268.526L49.5374 272.636C49.2397 274.216 48.8321 275.773 48.3174 277.296C47.4774 279.776 46.8174 280.806 45.0974 284.796C43.9074 287.576 44.0974 287.476 
43.2274 289.346C42.8274 290.256 41.3574 293.166 39.2274 297.046C38.1174 303.936 37.2974 308.956 37.0874 311.126C36.9453 312.259 36.5671 313.349 35.9774 314.326C35.6374 314.886 35.1174 315.746 34.5574 315.706C33.9974 315.666 33.3574 314.456 33.1274 312.786L33.6674 298.446C33.2604 298.433 32.8592 298.545 32.5174 298.766C32.0055 299.308 31.6347 299.967 31.4374 300.686C31.1974 301.353 30.9474 302.043 30.6874 302.756C28.8574 307.596 27.5774 310.756 26.3974 314.006C25.3904 316.242 23.9841 318.275 22.2474 320.006C21.8974 320.396 21.2474 321.066 20.6474 320.906C20.0474 320.746 19.8374 319.816 19.7574 319.476C19.1174 316.816 24.2074 302.826 25.7074 298.756C25.8132 298.54 25.858 298.299 25.8369 298.06C25.8157 297.82 25.7294 297.59 25.5874 297.396C25.1974 297.066 24.2274 297.266 23.5274 298.206C20.1674 303.876 17.5274 309.106 14.1374 314.776C13.5217 315.993 12.5977 317.028 11.4574 317.776C11.152 317.905 10.8239 317.972 10.4924 317.972C10.1609 317.972 9.83275 317.905 9.52738 317.776C8.52738 316.946 9.52739 312.156 18.6474 294.456C18.6966 294.347 18.7239 294.23 18.7277 294.11C18.7315 293.991 18.7117 293.871 18.6695 293.759C18.6272 293.648 18.5633 293.545 18.4815 293.458C18.3996 293.371 18.3014 293.301 18.1924 293.251C18.0834 293.202 17.9658 293.175 17.8462 293.171C17.7267 293.167 17.6075 293.187 17.4957 293.229C17.3838 293.271 17.2813 293.335 17.1941 293.417C17.1069 293.499 17.0366 293.597 16.9874 293.706C14.5734 296.022 12.448 298.621 10.6574 301.446C9.65738 303.006 8.76738 304.046 7.09738 306.256C6.10266 307.736 4.64199 308.841 2.94738 309.396C2.21738 309.556 1.56738 309.556 1.19738 309.056C0.447375 308.056 0.887378 305.296 4.13738 300.736C8.13738 295.166 11.7574 290.866 15.1974 284.956C16.0574 283.486 15.8774 282.776 18.2574 280.506C18.5874 280.196 17.8274 280.296 17.5274 279.956C16.8374 280.096 15.1874 281.046 13.8974 281.546C7.83739 284.546 6.83737 287.116 3.22737 287.836H2.75739C2.09889 287.806 1.44696 287.692 0.817386 287.496C0.61375 287.429 0.43204 287.308 0.291461 287.146C0.150882 286.984 0.0566463 286.787 0.0187407 286.576C-0.0191649 286.365 0.00066375 286.148 0.0761137 285.947C0.151564 285.747 0.279832 285.57 0.447375 285.436C4.06541 282.665 7.41361 279.558 10.4474 276.156C11.1859 275.187 11.9771 274.259 12.8174 273.376C15.2547 270.753 18.2289 268.686 21.5374 267.316C24.2974 266.236 25.4374 266.496 27.6174 264.966C28.6909 264.201 29.6417 263.277 30.4374 262.226C30.9774 260.766 31.5207 259.3 32.0674 257.826C33.1474 255.826 34.7574 252.696 36.5374 248.826C38.6374 244.256 41.3074 237.896 47.3674 218.826C52.8874 201.516 52.4574 201.196 54.5774 197.716C56.8274 194.036 59.3474 191.036 61.0074 185.266C61.7974 182.486 62.0774 179.776 62.6374 174.366C63.4874 166.076 62.9174 165.746 63.7074 160.446C64.3457 156.157 65.2677 151.914 66.4674 147.746C67.4807 144.161 68.0681 140.469 68.2174 136.746C68.2974 134.926 68.3774 133.216 68.4174 132.236C69.0274 118.386 69.0574 117.856 69.3574 116.696C72.3574 105.156 83.7674 99.3063 84.5074 98.9463C89.1618 96.6599 94.3316 95.6259 99.5074 95.9463C102.079 96.0808 104.612 95.2699 106.627 93.6663C113.627 88.1763 118.627 85.7563 122.097 84.6663C123.287 84.2763 126.547 83.3162 128.217 80.4262C129.204 78.5512 129.515 76.3935 129.097 74.3163C129.548 70.5353 129.45 66.7093 128.807 62.9563C128.327 60.2363 127.707 58.5563 126.857 54.1263C126.277 51.1263 125.927 48.5863 125.727 46.9463C125.011 47.4077 124.15 47.5925 123.307 47.4662C122.697 47.3262 121.947 46.8862 120.427 42.2462C120.314 41.9008 120.17 41.5661 119.997 41.2462C118.763 38.7165 118.482 35.8262 119.207 33.1063C119.207 32.9563 119.277 32.8262 119.317 32.6862C119.402 32.4673 119.537 32.2711 119.711 32.1134C119.885 31.9557 120.093 31.8407 120.32 31.7776C120.546 31.7145 120.784 31.705 121.014 31.7499C121.245 31.7948 121.461 31.8929 121.647 32.0363C122.232 32.5021 122.695 33.1025 122.997 33.7863C121.824 28.5982 122.155 23.1829 123.953 18.1768C125.751 13.1708 128.941 8.78197 133.147 5.52625C137.929 1.93914 143.745 0 149.722 0C155.7 0 161.516 1.93914 166.297 5.52625Z" fill="#F9D8D1"/>
        {modelData.map(exercise =>
          exercise.svgPoints.map((points, index) => (
            <polygon
              key={index}
              points={points}
              onClick={() => handleClick(exercise.muscle, onClick)}
              style={{
                cursor: 'pointer',
                fill: ensure(fillIntensityColor(muscleData, highlightedColors, exercise.muscle), bodyColor),
              }}
            />
          ))
        )}
      </svg>
    </div>
  );
});
