import{r as x,e as B,b as D,j as e,T as r,a5 as _,B as o,I as k,h as b,p as R,a as $,d as N,u as U,a6 as M,a7 as G,a8 as q,s as f,S as H,C as X,i as Y,c as J,X as K,a9 as Z,aa as V,_ as ee,ab as re,f as te}from"./index-tWVfh1a_.js";import{P as oe}from"./Page-D7TsOLpr.js";import{S as ie}from"./Header-C-6_pkkN.js";import{u as C}from"./Onboarding-CSV0hQFI.js";import{S as se}from"./Footer-BU_S36Uf.js";import{S as ne}from"./ProgramTypePopover-SwnXS8w9.js";import{C as ae}from"./ClientList-D0msACO0.js";import{E as le,C as ce}from"./Email-0PqHaYMn.js";import{S as de}from"./Share-D8xeKOeo.js";import{Q as xe}from"./Qrcode-CPPdAafv.js";import{E as he}from"./edit-DiWhq57E.js";import{A as pe}from"./Archive-GAD3jC2R.js";import{C as me}from"./CopyLink-DOxHVA9c.js";import{d as ge}from"./Close-BdiCEmof.js";import{Q as ue,d as fe}from"./Download-J3sZr8Te.js";import{P as je}from"./Popover-COOgvQR_.js";import{L as j}from"./ListItemButton-CBlngsNS.js";import{A}from"./Avatar-DYK8RM-C.js";import{R as be}from"./index-HzyBoqWI.js";import{h as I}from"./moment-G82_0lEo.js";import{A as ye}from"./ArrowLeft-lA8HnlgG.js";import{M as ve}from"./More-BqGLUvK6.js";import{C as Ce}from"./Chip-CoRnaPyB.js";import{T as we}from"./TabContext-CXvaiNSx.js";import{T as Pe,a as w}from"./Tabs-Cs2QRRdO.js";import{D as S}from"./Divider-0_Mpg1Be.js";import{T as P}from"./TabPanel-D7TYthF4.js";import{G as v}from"./Grid-C2UtAwNz.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./InputAdornment-DiI_gVyu.js";import"./Radio-C4DJCFiF.js";import"./SwitchBase-Bs2jeD_h.js";import"./createSvgIcon-UmMwsC2Z.js";import"./dividerClasses-ClaZwgHh.js";function ke(i){const[a,t]=x.useState(!1),[p,g]=x.useState(!1),l=B(),[s,c]=x.useState("4 Weeks"),{id:h}=D(),m=x.useRef(null);return e.jsxs("div",{children:[" ",e.jsx("span",{ref:m,onClick:()=>t(!0),children:i.children}),e.jsxs(je,{id:"mouse-click-popover",open:a,onClose:()=>t(!1),anchorReference:"anchorEl",anchorEl:m.current,PaperProps:{sx:{width:175,borderRadius:.8,py:1.5,borderRadius:2,boxShadow:d=>d.customShadows.z20,border:d=>`solid 1px ${d.palette.grey[50012]}`}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(j,{sx:{py:1.5},onClick:()=>{t(!1),l("/sendProgram/"+h)},children:[e.jsx(le,{}),"   ",e.jsx(r,{children:"Send"})]}),e.jsxs(j,{onClick:()=>{t(!1),i.onEdit()},sx:{py:1.5},children:[e.jsx(he,{}),"   ",e.jsx(r,{children:"Edit"})]}),e.jsxs(j,{sx:{py:1.5},onClick:()=>{i.shareWorkout(),t(!1)},children:[e.jsx(de,{}),"   ",e.jsx(r,{children:"Share"})]}),e.jsxs(j,{sx:{py:1.5},onClick:()=>{i.copyWorkout(),t(!1)},children:[e.jsx(me,{}),"   ",e.jsx(r,{children:"Copy link"})]}),e.jsxs(j,{sx:{py:1.5},onClick:()=>{g(!0),t(!1)},children:[e.jsx(xe,{}),"   ",e.jsx(r,{children:"QR code"})]}),i.program.IsArchived?e.jsxs(j,{onClick:()=>{i.unArchive(h)},sx:{py:1.5},children:[e.jsx(ce,{}),"   ",e.jsx(r,{color:"text.primary",children:"Un-archive"})]}):e.jsxs(j,{onClick:()=>{i.deleteProgram(h)},sx:{py:1.5},children:[e.jsx(pe,{}),"   ",e.jsx(r,{color:"text.primary",children:"Archive"})]})]}),e.jsx(Se,{open:p,onClose:()=>g(!1),program:i.program})]})}const Re=i=>{const a=x.useRef(null),t=window.location.origin+`/public/workout-program/${i.program._id}`,p=()=>{var l;const g=(l=a.current)==null?void 0:l.querySelector("canvas");if(g){const s=g.toDataURL("image/png"),c=document.createElement("a");c.href=s,c.download=`${i.program.Title}-qr-code.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c)}};return e.jsxs(o,{sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx("div",{ref:a,children:e.jsx(ue,{value:t,size:200,level:"H",fgColor:"#2B4057",imageSettings:{src:"/logo/circled_black.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),e.jsx(r,{color:"text.secondary",align:"center",children:"Anyone scanning your QR code can view your circled program."}),e.jsx(R,{variant:"contained",startIcon:e.jsx(fe,{}),onClick:p,sx:{borderRadius:1},children:"Download QR Code"})]})},Se=({open:i,onClose:a,program:t})=>e.jsxs(_,{open:i,onClose:a,anchor:"bottom",PaperProps:{sx:{borderTopLeftRadius:1,borderTopRightRadius:1,pb:2}},children:[e.jsx(o,{px:1,py:1,style:t.BannerImage?{backgroundImage:`url(${t.BannerImage||"/images/profile-banner.png"})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",height:140,borderBottomLeftRadius:4,borderBottomRightRadius:4,marginBottom:16}:{},sx:{display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},children:e.jsx(k,{onClick:a,children:e.jsx(ge,{})})}),e.jsxs(b,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(o,{sx:{pb:1},children:e.jsx(A,{src:"/logo/circled_fade.png",sx:{width:75,height:75}})}),e.jsx(r,{sx:{fontWeight:600,fontSize:24,textTransform:"capitalize"},variant:"h3",children:t.Title}),e.jsx(r,{color:"text.secondary",children:"Program QR Code"})]}),e.jsx(Re,{program:t})]}),Te=f("div")(()=>({backgroundColor:"#fff",height:"100%"})),Be=f(o)(()=>({position:"relative",width:"100%",borderTop:"2px solid #ECEEEF",borderRadius:"24px 24px 0px 0px"}));f(o)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));f(te)(({theme:i})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));const De=f(o)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"})),Ae=f(o)(({theme:i})=>({display:"flex",width:"100%",justifyContent:"center"}));f(o)(({theme:i})=>({width:"100%",borderRadius:24,backgroundColor:"rgba(255,255,255, 0.5)",backdropFilter:"blur(12px)",display:"flex",padding:"12px",justifyContent:"center",alignItems:"center"}));function br({steps:i=4,active:a=1}){const t=$(),[p,g]=x.useState([]),{search:l}=N();new URLSearchParams(l);const[s,c]=x.useState({}),h=B(),{id:m}=D(),[d,y]=x.useState("About"),[W,E]=x.useState([]);U(n=>n.Profile);const F=(n,u)=>{u==0?y("About"):u==4?y("Status"):u==1?y("Clients"):u==2&&y("Recent")};x.useEffect(()=>{M(m).then(n=>{g(n)}),t(G(m)).then(n=>{c({...n,name:n.createdBy.name,profilePic:n.createdBy.profilePic})},n=>h(-1))},[]);const L=()=>{navigator.share&&navigator.share({title:" shared a fitness program :",url:`/public/workout-program/${s._id}`}).then(()=>{})},T=()=>{navigator.clipboard.writeText(`${window.location.origin}/public/workout-program/${s._id}`),t(J({snackbar:!0,message:"Copied"}))},z=n=>{t(C({loading:!0})),c({...s,ProgramType:n}),t(K({_id:s._id,ProgramType:n})).then(u=>{t(C({loading:!1})),c({...s,ProgramType:n})}).catch(u=>{t(C({loading:!1}))})},O=n=>{t(Z(n)).then(u=>{h(-1)})},Q=n=>{t(V(n)).then(u=>{t({type:"UPDATE_FEED",payload:{loading:!1,snackbar:!0,message:"Program Unarchived Successfully",severity:"success"}}),h(-1)})};return x.useEffect(()=>{q(m).then(n=>{E(n)})},[]),e.jsx(Te,{children:e.jsxs(oe,{title:" Simplified Online Fitness Training ",children:[e.jsxs(H,{children:[" ",e.jsx(ie,{noColor:!0,children:e.jsx(De,{px:2,py:2,children:e.jsxs(o,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{display:"flex",alignItems:"center",children:[" ",e.jsx(k,{onClick:()=>h(-1),sx:{color:"text.primary"},children:e.jsx(ye,{})}),e.jsx(r,{variant:"h6",color:"text.primary",children:"Program Overview"})," "]})," ",e.jsx(ke,{program:s,shareWorkout:()=>L(),copyWorkout:()=>T(),onEdit:()=>h("/editProgram/"+m+"/publishProgram"),id:m,unArchive:Q,deleteProgram:O,children:e.jsx(k,{sx:{py:0},children:e.jsx(ve,{sx:{color:"text.primary"},style:{fontSize:32},color:"text.primary"})})})]})})})," ",e.jsxs(X,{style:{marginTop:-8,overflowY:"auto",backgroundColor:"#fff"},withoutPadding:!0,children:[e.jsxs(o,{position:"relative",backgroundColor:"#fff",children:[s.IsArchived?e.jsx(Ce,{color:"secondary",label:"Archived",sx:{position:"absolute",left:16,top:32,fontWeight:"bold",borderRadius:1,px:2}}):null,e.jsx("img",{src:s.BannerImage||"/images/profile-banner.png",style:{width:"100%",height:"auto",marginTop:-36,objectFit:"cover",borderBottomLeftRadius:8,borderBottomRightRadius:8}})]}),e.jsxs(we,{value:d,children:[e.jsx(Ae,{style:{backgroundColor:"white",paddingTop:24},children:e.jsxs(Pe,{variant:"fullWidth",value:d=="About"?0:d=="Status"?4:d=="Clients"?1:2,onChange:F,"aria-label":"",style:{height:"36px"},children:[e.jsx(w,{label:e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{fontWeight:d=="About"?"bold":300},children:"About"}),e.jsx("span",{style:{my:1,position:"absolute",bottom:0,height:4,width:"95%",borderRadius:4}})]})}),e.jsx(w,{label:e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{fontWeight:d=="Clients"?"bold":300},children:"Clients"}),e.jsx("span",{style:{my:1,position:"absolute",bottom:0,height:4,width:"95%",borderRadius:4}})]})}),e.jsx(w,{label:e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{fontWeight:d=="Recent"?"bold":300},children:"Recent"}),e.jsx("span",{style:{my:1,position:"absolute",bottom:0,height:4,width:"95%",borderRadius:4}})]})})]})}),e.jsx(S,{sx:{borderBottomWidth:8,borderColor:"#F5F7FA"}}),e.jsx(P,{value:"About",index:0,style:{height:"100%"},children:e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(b,{px:2,py:2,backgroundColor:"#fff",children:[e.jsx(r,{variant:"body1",color:"text.primary",fontWeight:600,gutterBottom:!0,sx:{textTransform:"capitalize",fontSize:16},children:s.Title}),e.jsx(r,{line:4,color:"text.primary",flexWrap:"wrap",sx:{whiteSpace:"pre-wrap"},children:e.jsx(be,{charLimit:120,readMoreText:e.jsx(r,{variant:"subTitle",sx:{mt:1},children:"See more"}),readLessText:e.jsx(r,{variant:"subTitle",sx:{mt:1},children:"See less"}),readMoreStyle:{fontWeight:"bold",color:"#2B4057"},readLessStyle:{fontWeight:"bold",color:"#2B4057"},children:s.Description||"No Description"})})]}),e.jsx(S,{sx:{borderBottomWidth:8,borderColor:"#F5F7FA"}}),e.jsx(b,{py:3,px:2,backgroundColor:"#fff",children:e.jsxs(v,{container:!0,children:[e.jsx(v,{item:!0,xs:6,children:e.jsxs(b,{mb:3,children:[e.jsx(r,{variant:"body1",fontWeight:600,children:"Date Created"}),e.jsx(r,{component:"span",variant:"body1",color:"text.secondary",children:I(s.createdAt).format("DD/MM/yyyy")})]})}),e.jsx(v,{item:!0,xs:6,children:e.jsxs(b,{mb:3,children:[e.jsx(r,{variant:"body1",fontWeight:600,children:"Duration"}),e.jsxs(r,{component:"span",variant:"body1",color:"text.secondary",children:[s.Duration," weeks"]})]})}),e.jsx(v,{item:!0,children:e.jsxs(o,{display:"flex",flexDirection:"column",children:[e.jsx(r,{component:"span",variant:"body1",fontWeight:600,color:"text.primary",gutterBottom:!0,children:"Program type"}),e.jsx(o,{width:"50%",children:e.jsx(ne,{selectedProgramType:s.ProgramType||"Public",setProgramType:z})}),e.jsxs(r,{component:"span",variant:"body1",color:"text.secondary",sx:{mt:2},children:["Program is ",s.ProgramType=="Public"?"visible":"not visible"," when users view your profile."]})]})})]})}),e.jsx(b,{py:2,px:2,mb:6,backgroundColor:"#fff",display:"flex",flexGrow:1,flexDirection:"column",children:e.jsx(o,{width:"100%",display:"flex",height:"100%",flexDirection:"row",px:0,justifyContent:"space-between"})})]})}),e.jsx(P,{value:"Clients",index:2,style:{height:"100%"},children:e.jsx(o,{height:"100%",children:e.jsx(ae,{page:"programOverview",_id:s._id,clients:p})})}),e.jsx(P,{value:"Recent",index:3,style:{height:"100%"},children:e.jsx(Ie,{recent:W})})]})]}),e.jsx(se,{children:e.jsx(Be,{px:2,py:2,pt:3,children:e.jsxs(b,{spacing:2,direction:"row",children:[e.jsx(R,{fullWidth:!0,variant:"outlined",sx:{borderRadius:2},onClick:T,startIcon:e.jsx(Y,{icon:"ant-design:link-outlined",width:24,height:24}),children:"Copy link"}),e.jsx(R,{fullWidth:!0,variant:"contained",sx:{borderRadius:2},onClick:()=>h("/sendProgram/"+m),children:"Send"})]})})})]})," "]})})}const Ie=i=>{let a={};i.recent.length&&(a=ee.groupBy(i.recent,p=>re(new Date(p.createdAt))));const t=f(o)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0",padding:"5px"}));return e.jsxs(o,{backgroundColor:"#fff",height:"100%",children:[Object.keys(a).length==0&&e.jsx(o,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(r,{mt:2,variant:"body1",align:"center",color:"text.secondary",children:"No recent activities"})}),console.log(a),e.jsx(o,{pt:1,children:Object.keys(a).map((p,g)=>e.jsx(o,{children:e.jsx(o,{mb:2,px:2,children:a[p].map((l,s)=>{var c;if(l.email)return e.jsxs(o,{children:[e.jsxs(t,{sx:{alignItems:"center"},children:[e.jsx(A,{src:((c=l==null?void 0:l.clientId)==null?void 0:c.profilePic)||"/images/dummyUser.png"}),"    ",e.jsxs(o,{children:[e.jsx(r,{variant:"body1",color:"text.primary",children:"Program sent to"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:l.email})]}),e.jsx(o,{flexGrow:1}),e.jsx(r,{align:"right",variant:"caption",color:"text.primary",children:I(l.createdAt).fromNow()})]}),e.jsx(S,{})]})})})}))})]})};export{br as default};
