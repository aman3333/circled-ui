import{a as m,r as d,e as g,b as j,j as e,T as a,c as v,a5 as C,B as x,I as y,h as b,p as w}from"./index-tWVfh1a_.js";import{d as R}from"./Close-BdiCEmof.js";import{Q as P,d as k}from"./Download-J3sZr8Te.js";import{S as Q}from"./Share-D8xeKOeo.js";import{Q as S}from"./Qrcode-CPPdAafv.js";import{C as D}from"./CopyLink-DOxHVA9c.js";import{P as I}from"./Popover-COOgvQR_.js";import{L as p}from"./ListItemButton-CBlngsNS.js";import{A as B}from"./Avatar-DYK8RM-C.js";function W(o){const t=m(),[n,i]=d.useState(!1);g();const[l,c]=d.useState(!1),{id:h}=j(),s=d.useRef(null),f=r=>{r.stopPropagation(),i(!1),navigator.clipboard.writeText(window.location.origin+`/public/instructor-profile/${o.profile._id}`),t(v({snackbar:!0,message:"Copied"}))},u=r=>{r.stopPropagation(),navigator.share&&navigator.share({title:`Circled Fitness Instructor :${o.profile.name}`,url:`/public/instructor-profile/${o.profile._id}`}).then(()=>{})};return e.jsxs("div",{children:[" ",e.jsx("span",{ref:s,onClick:()=>i(!0),children:o.children}),e.jsxs(I,{id:"mouse-click-popover",open:n,onClose:()=>i(!1),anchorReference:"anchorEl",anchorEl:s.current,PaperProps:{sx:{width:175,borderRadius:.8,py:1.5,borderRadius:2,boxShadow:r=>r.customShadows.z20,border:r=>`solid 1px ${r.palette.grey[50012]}`}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(p,{onClick:f,sx:{py:1.5},children:[e.jsx(D,{}),"   ",e.jsx(a,{children:"Copy link"})]}),e.jsxs(p,{sx:{py:1.5},onClick:r=>{u(r),i(!1)},children:[e.jsx(Q,{}),"   ",e.jsx(a,{children:"Share"})]}),e.jsxs(p,{sx:{py:1.5},onClick:()=>{c(!0),i(!1)},children:[e.jsx(S,{}),"   ",e.jsx(a,{children:"QR Code"})]})]}),e.jsx(_,{open:l,onClose:()=>c(!1),profile:o.profile})]})}const $=o=>{const t=d.useRef(null),n=window.location.origin+`/public/instructor-profile/${o.profile._id}`,i=()=>{var c;const l=(c=t.current)==null?void 0:c.querySelector("canvas");if(l){const h=l.toDataURL("image/png"),s=document.createElement("a");s.href=h,s.download=`${o.profile.name}-qr-code.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}};return e.jsxs(x,{sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx("div",{ref:t,children:e.jsx(P,{value:n,size:200,level:"H",fgColor:"#2B4057",imageSettings:{src:"/logo/circled_black.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),e.jsx(a,{color:"text.secondary",align:"center",children:"Anyone scanning your QR code can access your circled profile."}),e.jsx(w,{variant:"contained",startIcon:e.jsx(k,{}),onClick:i,sx:{borderRadius:1},children:"Download QR Code"})]})},_=({open:o,onClose:t,profile:n})=>e.jsxs(C,{open:o,onClose:t,anchor:"bottom",PaperProps:{sx:{borderTopLeftRadius:1,borderTopRightRadius:1,pb:2}},children:[e.jsx(x,{px:1,py:1,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:e.jsx(y,{onClick:t,children:e.jsx(R,{})})}),e.jsxs(b,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(B,{src:n.profilePic,sx:{width:90,height:90}}),e.jsx(a,{sx:{fontWeight:600,fontSize:24},variant:"h3",children:n.name}),e.jsx(a,{color:"text.secondary",children:"Circled profile"})]}),e.jsx($,{profile:n})]});export{W as P};
