import{r as k,a as T,U as F,e as S,g as B,j as a,S as R,s as g,B as u,I as $,T as y,C as A,_ as w,f as z}from"./index-tWVfh1a_.js";import{S as M}from"./Header-C-6_pkkN.js";import{A as L}from"./ArrowLeft-lA8HnlgG.js";import{W as U}from"./workoutWeek-CnKE-hW2.js";import{D as W}from"./react-beautiful-dnd.esm-DG40pfMu.js";import{S as Y,a as H}from"./Walkthrough-DXggXs_W.js";import"./TextMaxLine-BUlHRtTt.js";import"./Link-D6ktmyc-.js";import"./LibrarySelector-BSF-MZAA.js";import"./Page-D7TsOLpr.js";import"./Workout-eTy7zLdJ.js";import"./convertToLink-D3DGDIAW.js";import"./ImageWithFallback-C5zvNA0Z.js";import"./Circular-CdB5voB0.js";import"./More-BqGLUvK6.js";import"./edit-DiWhq57E.js";import"./Delete-fvKHvwYo.js";import"./ReactPlayerWithFallback-Zm03AunA.js";import"./index-DmwG6s5l.js";import"./ReactPlayer-B1HYrz8S.js";import"./memoize-one.esm-Cbrq43TT.js";import"./search-qBW2W_DU.js";import"./Checkbox-5Xdp7ogM.js";import"./SwitchBase-Bs2jeD_h.js";import"./useFormControl-BEzaUW9U.js";import"./useControlled-DiwPEJyR.js";import"./Divider-0_Mpg1Be.js";import"./dividerClasses-ClaZwgHh.js";import"./YouTube-BrIpEXBG.js";import"./Dumbell-LvyqFLuX.js";import"./MenuItem-BRbCqEYh.js";import"./ListContext-BQPXTeBj.js";import"./Share-D8xeKOeo.js";import"./CopyLink-DOxHVA9c.js";import"./moment-G82_0lEo.js";import"./footer-BJqjd-0J.js";import"./Footer-BU_S36Uf.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./isMuiElement-CENM59Ut.js";import"./InputAdornment-DiI_gVyu.js";import"./Tabs-Cs2QRRdO.js";import"./DB-D1UkOgeB.js";import"./SaveCheck-1m_e5Ncs.js";import"./createSvgIcon-UmMwsC2Z.js";import"./SwipeableDrawer-BEL-t-Lb.js";import"./index-BrBV3hc8.js";import"./routepath-BdjIj9sL.js";import"./AddCircled-C-pHs73y.js";import"./trash-CssX9TdV.js";import"./index-Cp5sxvbr.js";import"./warning-C20GYw-A.js";import"./LinearProgress-C4AIhOO1.js";g("div")(()=>({backgroundColor:"#F2F5F9",height:"100%"}));g(u)(()=>({position:"relative"}));g(u)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));g(z)(({theme:E})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));const O=g(u)(()=>({width:"100%",zIndex:100,borderRadius:"0px 0px 8px 8px"})),Je=k.forwardRef((E,_)=>{const x=T(),[I,b]=k.useState(null),[d,m,C,q]=F(),P=S(),{showConfirmationModal:f}=B(),h=(s,r,e,i)=>{if(s===r&&e===i)return;let t={...d.ExercisePlan};t.weeks[r].days[i].Exercise.length?f("Are you sure ?",`You are going to replace (week ${Number(r)+1} - day ${Number(i)+1}) exercises with (week ${s+1} - day ${e+1}). This process is irreversible`,"Replace","Cancel").then(o=>{if(o)t.weeks[r].days[i].Exercise=[...t.weeks[s].days[e].Exercise],t.weeks[r].days[i].Title=t.weeks[s].days[e].Title,x(m({ExercisePlan:t}));else return}):(t.weeks[r].days[i].Exercise=[...t.weeks[s].days[e].Exercise],t.weeks[r].days[i].Title=t.weeks[s].days[e].Title,x(m({ExercisePlan:t})))},j=(s,r,e,i)=>{let t=w.cloneDeep(d.ExercisePlan),o=w.cloneDeep(t.weeks[s].days),l=H(o,e,i);t.weeks[s].days=l,x(m({ExercisePlan:t}))},N=(s,r)=>{let e=w.cloneDeep(d.ExercisePlan);e.weeks[r].days.find(t=>t.Exercise.length)?f("Are you sure ?",`You are going to replace (week ${Number(r)+1}) exercises with (week ${s+1}). This process is irreversible`,"Replace","Cancel").then(t=>{if(t)e.weeks[r]=e.weeks[s],x(m({ExercisePlan:e}));else return}):(e.weeks[r]=e.weeks[s],x(m({ExercisePlan:e})))},v=s=>{const{source:r,destination:e,combine:i,type:t}=s;let o={};if(t=="Weeks"){o={...o,day:null,sourceWeek:r.index,week:e==null?void 0:e.index,type:t},b(o);return}if(e?o={...o,week:Number(e==null?void 0:e.droppableId),day:e==null?void 0:e.index,type:t,sweek:Number(r.droppableId)}:o={sweek:Number(r.droppableId),week:Number(r.droppableId),cweek:Number(r.droppableId)},i){let l=i.draggableId.split("-")[0],c=i.draggableId.split("-")[1];o={...o,cweek:l,cday:c,type:t,sweek:Number(r.droppableId)}}b(o)},D=s=>{const{source:r,destination:e,combine:i,type:t}=s;let o=w.cloneDeep(d.ExercisePlan);if(t=="Weeks"){(r==null?void 0:r.index)!==(e==null?void 0:e.index)&&N(r.index,e.index),b({});return}if(b(null),!(!e&&!i))if(i){let l=Number(r.droppableId),c=r.index,p=(e||i).draggableId.split("-")[0],n=(e||i).draggableId.split("-")[1];o.weeks[p].days[n].Exercise.length==0&&!o.weeks[p].days[n].Title&&h(l,p,c,n)}else{let l=Number(r.droppableId),c=r.index,p=Number(e.droppableId),n=(p>0&&l!=p,e.index);if(n<0)return;o.weeks[p].days[n].Exercise.length==0&&!o.weeks[p].days[n].Title&&l!=p?h(l,p,c,n):l==p&&j(l,p,c,n)}};return a.jsxs(R,{children:[a.jsx(M,{noColor:!0,boxShadow:!0,children:a.jsx(O,{px:2,py:2,children:a.jsxs(u,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[a.jsxs(u,{display:"flex",alignItems:"center",children:[" ",a.jsx($,{onClick:()=>P(-1),sx:{color:"text.primary"},children:a.jsx(L,{})}),a.jsx(y,{variant:"body1",color:"text.primary",children:a.jsx(y,{component:"span",variant:"subtitle1",color:"text.primary",children:"Edit workout"})})]})," "]})})}),a.jsxs(A,{style:{paddingTop:16,paddingLeft:0,paddingRight:0,background:"#F5F7FA"},children:[a.jsx(Y,{Program:d}),a.jsx(W,{onDragEnd:D,onDragUpdate:v,children:a.jsx(U,{Program:d,updateProgram:m,mode:C,destData:I})})]})]})});export{Je as default};
