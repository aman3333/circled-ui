import{j as t,Y,r as l,d as ae,u as h,g as de,a as le,e as q,s as c,B as n,T as m,i as C,I as v,p as X,bA as oe,c as se,bB as O}from"./index-tWVfh1a_.js";import{C as S}from"./CloseRedIcon-DBKQk9yY.js";import{c as j}from"./routepath-BdjIj9sL.js";import{c as re,b as ce}from"./convertToLink-D3DGDIAW.js";import{C as xe}from"./Circular-CdB5voB0.js";import{M as me}from"./MessageCard-BW_wKbJJ.js";import{L as ue,a as he}from"./LogsDrawer-XtoQbBYz.js";import{d as ge}from"./ExpandMore-BWzhjxbJ.js";import{I as G}from"./ImageWithFallback-C5zvNA0Z.js";import{L as fe}from"./UploadIcon-C1mo8_eB.js";import{A as Ce}from"./SaveCheck-1m_e5Ncs.js";import{A as we}from"./Workout-eTy7zLdJ.js";import{W as ye}from"./exerciseCardBottomSelection-C6_Gz6HQ.js";import{g as I}from"./getFileFormat-Bssviiun.js";import{I as N}from"./InputBase-7pV38TnQ.js";import{T as je}from"./TextField-cyeEFY3i.js";import{I as be}from"./InputAdornment-DiI_gVyu.js";import{A as ke}from"./Avatar-DYK8RM-C.js";import{A as ve,a as Se,b as Ie}from"./AccordionSummary-D915UA4x.js";function Me(e){return t.jsxs(Y,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M17.96 4.26001C17.64 4.52001 17.17 4.47 16.9 4.16C16.56 3.74 16.06 3.5 15.52 3.5H5.29001C4.31001 3.5 3.5 4.30001 3.5 5.29001V15.52C3.5 16 3.69 16.45 4.03 16.79C4.32 17.08 4.32 17.55 4.03 17.85C3.88 17.99 3.69 18.07 3.5 18.07C3.3 18.07 3.11 17.99 2.97 17.85C2.34 17.22 2 16.4 2 15.52V5.29001C2 3.48001 3.48001 2 5.29001 2H15.52C16.51 2 17.44 2.44001 18.06 3.20001C18.33 3.52001 18.28 4.00001 17.96 4.26001Z",fill:"#2B4057"}),t.jsx("path",{d:"M4.03 16.79C4.32 17.08 4.32 17.55 4.03 17.85C3.88 17.99 3.69 18.07 3.5 18.07C3.3 18.07 3.11 17.99 2.97 17.85C2.34 17.22 2 16.4 2 15.52V5.29001C2 3.48001 3.48001 2 5.29001 2H15.52C16.51 2 17.44 2.44001 18.06 3.20001C18.33 3.52001 18.28 4.00001 17.96 4.26001C17.64 4.52001 17.17 4.47 16.9 4.16C16.56 3.74 16.06 3.5 15.52 3.5H5.29001C4.31001 3.5 3.5 4.30001 3.5 5.29001V15.52C3.5 16 3.69 16.45 4.03 16.79Z",fill:"#2B4057"}),t.jsx("path",{d:"M18.7099 5.18994H8.47995C6.66995 5.18994 5.18994 6.66995 5.18994 8.47995V18.7099C5.18994 20.5199 6.66995 21.9999 8.47995 21.9999H18.7099C20.5199 21.9999 21.9999 20.5199 21.9999 18.7099V8.47995C21.9999 6.66995 20.5199 5.18994 18.7099 5.18994ZM10.4099 8.41995C11.1699 8.41995 11.7899 9.03994 11.7899 9.80994C11.7899 10.5799 11.1699 11.2 10.4099 11.2C9.63994 11.2 9.01993 10.5799 9.01993 9.80994C9.01993 9.03994 9.63994 8.41995 10.4099 8.41995ZM20.4999 18.7099C20.4999 19.6999 19.6999 20.4999 18.7099 20.4999H8.47995C7.48995 20.4999 6.68994 19.6999 6.68994 18.7099V18.4099L9.39993 15.7099C9.59993 15.4999 9.93995 15.4999 10.14 15.7099L10.89 16.4599C11.65 17.2199 12.9899 17.2199 13.7499 16.4599L17.0499 13.1599C17.2499 12.9599 17.5999 12.9599 17.7999 13.1599L20.4999 15.8599V18.7099Z",fill:"#2B4057"})]})}function Ve(e){return t.jsxs(Y,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("g",{"clip-path":"url(#clip0_6831_17840)",children:t.jsx("path",{d:"M19 24H5C3.67441 23.9984 2.40356 23.4711 1.46622 22.5338C0.528882 21.5964 0.00158786 20.3256 0 19L0 5C0.00158786 3.67441 0.528882 2.40356 1.46622 1.46622C2.40356 0.528882 3.67441 0.00158786 5 0L19 0C20.3256 0.00158786 21.5964 0.528882 22.5338 1.46622C23.4711 2.40356 23.9984 3.67441 24 5V19C23.9984 20.3256 23.4711 21.5964 22.5338 22.5338C21.5964 23.4711 20.3256 23.9984 19 24ZM5 2C4.20435 2 3.44129 2.31607 2.87868 2.87868C2.31607 3.44129 2 4.20435 2 5V19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7956 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V5C22 4.20435 21.6839 3.44129 21.1213 2.87868C20.5587 2.31607 19.7956 2 19 2H5ZM9.342 17.005C8.92513 17.0036 8.51601 16.8922 8.156 16.682C7.80034 16.4784 7.50515 16.184 7.30063 15.8289C7.09611 15.4738 6.9896 15.0708 6.992 14.661V9.339C6.99166 8.92914 7.09911 8.52641 7.30358 8.1712C7.50805 7.81599 7.80234 7.52079 8.15692 7.31524C8.5115 7.10968 8.9139 7.00099 9.32376 7.00007C9.73361 6.99915 10.1365 7.10604 10.492 7.31L15.77 9.945C16.1366 10.1429 16.4436 10.4353 16.6592 10.7918C16.8748 11.1483 16.9912 11.556 16.9962 11.9726C17.0012 12.3892 16.8946 12.7995 16.6877 13.1611C16.4807 13.5227 16.1808 13.8223 15.819 14.029L10.443 16.716C10.1077 16.9073 9.728 17.0069 9.342 17.005ZM9.317 9.005C9.26189 9.00498 9.20774 9.01946 9.16 9.047C9.10814 9.07585 9.0651 9.11826 9.0355 9.1697C9.00591 9.22114 8.99087 9.27966 8.992 9.339V14.661C8.99234 14.7195 9.00788 14.7768 9.03709 14.8274C9.0663 14.8781 9.10818 14.9202 9.15861 14.9498C9.20905 14.9794 9.2663 14.9953 9.32475 14.996C9.3832 14.9968 9.44084 14.9823 9.492 14.954L14.868 12.266C14.908 12.2347 14.9399 12.1941 14.9608 12.1478C14.9817 12.1015 14.991 12.0507 14.988 12C14.9893 11.9405 14.9742 11.8818 14.9444 11.8304C14.9146 11.7789 14.8712 11.7365 14.819 11.708L9.545 9.073C9.47624 9.03082 9.39763 9.00737 9.317 9.005Z"})}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_6831_17840",children:t.jsx("rect",{width:"24",height:"24",fill:"white"})})})]})}c(e=>t.jsx(ve,{disableGutters:!0,elevation:0,square:!0,...e}))(({theme:e})=>({boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&.Mui-expanded":{boxShadow:"none"}}));c(e=>t.jsx(Se,{expandIcon:t.jsx(ge,{}),...e}))(({theme:e})=>({boxShadow:"none",margin:"0 0 0 0",alignItems:"center",marginBottom:e.spacing(1),"& .MuiAccordionSummary-content":{marginBottom:e.spacing(1)}}));c(Ie)(({theme:e})=>({padding:e.spacing(0),paddingTop:e.spacing(2),elevation:0}));const De=c(n)(({theme:e})=>({backgroundColor:"#fff",borderRadius:"8px"}));c("div")(({theme:e})=>({width:"24px",height:"24px",borderRadius:"24px"}));c(X)(({theme:e})=>({height:"44px",borderRadius:"4px",color:e.palette.error.light,backgroundColor:e.palette.error.lighter,margin:"10px 10px 0 0"}));const Ee=c(n)(()=>({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}));function Be(e){var P,z,T,_,$,A,H,F,U,Z;const[g,u]=l.useState(!1);l.useRef(null);const{newCard:D}=e,[E,w]=l.useState(""),[Le,Re]=l.useState([]),[We,Pe]=l.useState(""),[o,J]=l.useState({}),[B,K]=l.useState(0),{state:x,pathname:L}=ae(),b=l.useRef(null),Q=h(i=>i.Profile),{showConfirmationModal:p}=de(),d=h(i=>i.AtheletePlan),R=h(i=>i.Library.videos),ee=h(i=>i.ProgramList.clientData),y=le(),r=q(),W=h(i=>Object.values(i.Sync.programs).filter(a=>e!=null&&e.individualWorkout?a.index==(e==null?void 0:e.index)&&(a==null?void 0:a.workoutId)==(e==null?void 0:e._id):a.week==e.w&&a.day==e.d&&a.index==e.index)),f=i=>{p("Are you sure?","You are going to delete this video. This process is irreversible","Delete").then(a=>{var s;if(a){const ie=((s=e.plan)==null?void 0:s.media).filter((Te,ne)=>ne!==i);e.editExercise({media:ie})}})};l.useEffect(()=>{setTimeout(()=>{var i;(x==null?void 0:x.open)&e.index==(x==null?void 0:x.exercise)&&((i=b.current)==null||i.scrollIntoView({behavior:"smooth"}))},500)},[]),l.useEffect(()=>{W.length&&setTimeout(()=>{var i;(i=b.current)==null||i.scrollIntoView({behavior:"smooth"})},500)},[]);const te=i=>{let a=i.file.replace("https://circled-videos.s3.us-east-1.amazonaws.com/","");y(oe({key:a,name:i.title||"Untitled",title:i.title,triggerMuscle:i.triggerMuscle})).then(()=>y(se({snackbar:!0,severity:"success",message:"Video saved"})))},k=()=>{var i;(i=d==null?void 0:d.stats)!=null&&i[`${e.w}-${e.d}-${e.index}`]?y(O({_id:d.currentPlan,stats:{...d.stats,[e.w+"-"+e.d+"-"+e.index]:!1},currentWeek:e.w,currentDay:e.d})):y(O({_id:d.currentPlan,stats:{...d.stats,[e.w+"-"+e.d+"-"+e.index]:!0},currentWeek:e.w,currentDay:e.d}))};return t.jsx(De,{ref:b,children:t.jsxs(n,{children:[e.clientSide?t.jsxs(Ee,{children:[t.jsx(n,{display:"flex",children:t.jsxs(m,{color:"text.primary",sx:{fontSize:18,fontWeight:600,my:.5,background:"rgba(245, 247, 250, 1)",color:"rgba(109, 123, 143, 1)",p:1,px:2,borderRadius:1},children:["Exercise ",e.index+1]})}),"   ",e.mode!=="workout"&&t.jsx(t.Fragment,{children:e.clientSide?(P=d==null?void 0:d.stats)!=null&&P[`${e.w}-${e.d}-${e.index}`]?t.jsx(C,{icon:"icon-park-outline:check-one",color:"primary.main",sx:{width:32,height:32},onClick:k}):t.jsx(C,{icon:"prime:circle",color:"text.secondary",sx:{width:36,height:36,color:"rgba(195, 203, 217, 1)"},onClick:k}):null})]}):"",t.jsx(N,{placeholder:"Exercise name",fullWidth:!0,readOnly:e.clientSide,value:e.plan.title,sx:{textTransform:"capitalize",fontWeight:"bold",mt:1.5,fontSize:18},multiline:!0,onChange:i=>e.editExercise({title:i.target.value})}),t.jsx(n,{sx:{mt:2},children:t.jsx(N,{placeholder:"sets / repetitions / details",value:e.plan.note,onChange:i=>e.editExercise({note:i.target.value}),fullWidth:!0,readOnly:e.clientSide,multiline:!0,sx:{fontSize:16},minRows:3})}),e.clientSide&&((T=(z=e.plan)==null?void 0:z.media)==null?void 0:T.length)==0?"":t.jsxs(n,{display:"flex",mt:2,mb:1,alignItems:"center",children:[t.jsx(Me,{})," "," ",t.jsxs(m,{color:"text.primary",sx:{ml:.5},children:["Media uploaded ",(($=(_=e.plan)==null?void 0:_.media)==null?void 0:$.length)||0]})]}),t.jsx(n,{mt:2,display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-end",overflowX:"scroll",style:{overflowX:"auto"},py:2,children:t.jsxs(n,{display:"flex",alignItems:"center",children:[(H=(A=e.plan)==null?void 0:A.media)==null?void 0:H.map((i,a)=>e.clientSide?t.jsx(n,{onClick:()=>e.onMediaClick?e.onMediaClick(i):e.clientSide?e.mode=="workout"?r("viewExercise",{state:{index:e.index}}):r("/client/myWorkoutCalendar/workoutDay/exerciseView",{state:{week:e.w,day:e.d,index:e.index}}):r(j(e.mode,"/workoutDay/editExercise",e.Program._id),{state:{week:e.w,day:e.d,index:e.index}}),children:I(i)=="video"?t.jsx(M,{link:i}):t.jsx(V,{link:i})}):t.jsx(t.Fragment,{children:I(i)=="video"?i.type=="youtube"?t.jsxs(n,{position:"relative",onClick:()=>e.onMediaClick?e.onMediaClick(i):e.clientSide?r("/client/myWorkoutCalendar/workoutDay/exerciseView",{state:{week:e.w,day:e.d,index:e.index}}):r(j(e.mode,"/workoutDay/editExercise",e.Program._id),{state:{week:e.w,day:e.d,index:e.index}}),children:[t.jsx(v,{style:{position:"absolute",top:-16,right:-4,zIndex:100},onClick:s=>{s.stopPropagation(),f(a)},children:t.jsx(S,{})}),t.jsx(M,{link:i})]}):t.jsx(we,{items:[{title:"Play video",icon:t.jsx(Ve,{icon:"material-symbols:play-circle",sx:{mr:2},color:"text.primary",width:32,height:32}),onClick:()=>e.onMediaClick?e.onMediaClick(i):e.clientSide?r("/client/myWorkoutCalendar/workoutDay/exerciseView",{state:{week:e.w,day:e.d,index:e.index}}):r(j(e.mode,"/workoutDay/editExercise",e.Program._id),{state:{week:e.w,day:e.d,index:e.index}})},{title:R.find(s=>`https://circled-videos.s3.us-east-1.amazonaws.com/${s.key}`==i.file)?"Saved to library":"Save video to library",icon:R.find(s=>`https://circled-videos.s3.us-east-1.amazonaws.com/${s.key}`==i.file)?t.jsx(Ce,{icon:"icon-park-outline:dumbbell",sx:{mr:2}}):t.jsx(fe,{icon:"icon-park-outline:dumbbell",sx:{mr:2}}),onClick:()=>te(i)}],title:`Exercise ${e.index+1} | ${i.title||"Untitled"}`,children:I(i)=="video"?t.jsxs(n,{position:"relative",children:[t.jsx(v,{style:{position:"absolute",top:-16,right:-4,zIndex:100},onClick:s=>{s.stopPropagation(),f(a)},children:t.jsx(S,{})}),t.jsx(M,{link:i,removeVideo:f,index:a})]}):t.jsx(V,{link:i,removeVideo:f,index:a})}):t.jsxs(n,{position:"relative",onClick:()=>e.onMediaClick?e.onMediaClick(i):e.clientSide?r("/client/myWorkoutCalendar/workoutDay/exerciseView",{state:{week:e.w,day:e.d,index:e.index}}):r(j(e.mode,"/workoutDay/editExercise",e.Program._id),{state:{week:e.w,day:e.d,index:e.index}}),children:[t.jsx(v,{style:{position:"absolute",top:-16,right:-4,zIndex:100},onClick:s=>{s.stopPropagation(),f(a)},children:t.jsx(S,{})}),t.jsx(V,{link:i})]})})),W.map((i,a)=>t.jsx(n,{backgroundColor:"#f0f0f0",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",sx:{width:"60px",height:"60px",marginRight:1},children:t.jsx(xe,{value:i.progress})}))]})}),t.jsx(n,{children:!e.clientSide&&t.jsx(ye,{title:`Exercise ${e.index+1} `,w:e.w,d:e.d,Program:e.plan,onUploadNew:()=>document.getElementById(e.w+"-"+e.d+"-"+e.index).click(),onSelection:i=>e.uploadMediasFromLib(i),children:t.jsxs(n,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",border:"2px dashed rgba(195, 203, 217, 1)",p:3,borderRadius:1,mt:2,mb:2,children:[t.jsx(C,{icon:"meteor-icons:image",sx:{fontSize:32,mb:1,color:"rgba(109, 123, 143, 1)"}}),t.jsx(m,{gutterBottom:!0,sx:{color:"rgba(109, 123, 143, 1)"},children:"Add media"}),t.jsx(m,{align:"center",sx:{color:"rgba(149, 163, 184, 1)",fontSize:14},children:"Click to upload exercise videos or images"}),t.jsx(n,{children:t.jsx("input",{type:"file",accept:"video/* , image/*",style:{display:"none"},id:e.w+"-"+e.d+"-"+e.index,onChange:e.onUploadNewMedia})})]})})}),e.mode!=="edit"&&e.mode!=="send"&&e.mode!=="create"&&e.mode!=="workout"&&t.jsxs(n,{borderRadius:2,mt:4,children:[t.jsxs(n,{display:"flex",alignItems:"center",mb:3,children:[t.jsx(ue,{sx:{fontSize:24}}),t.jsxs(m,{ml:1,children:["Training log"," ",t.jsx(m,{color:"text.secondary",component:"span",children:B||""})]})]}),o!=null&&o.message?t.jsx(me,{_id:o._id,name:(F=o.createdBy)==null?void 0:F.name,profilePic:(U=o==null?void 0:o.createdBy)==null?void 0:U.profilePic,createdBy:o.createdBy,createdAt:o.createdAt,message:o.message,media:o.media,type:o.type}):null,t.jsx("center",{children:t.jsx(he,{week:e.w,setLogCount:i=>K(i),onClose:()=>r(L,{state:{open:!1,week:e.w,day:e.d,exercise:e.index},replace:!0}),openLogs:x.open&e.index==x.exercise,setLatestLog:J,day:e.d,title:e.plan.title,exerciseIndex:e.index,Exercise:e.plan,Program:e.Program,orderId:e.mode?ee._id:d==null?void 0:d.currentPlan,children:t.jsx(n,{display:"flex",alignItems:"center",mt:2,children:t.jsx(je,{multiline:!0,inputProps:{style:{paddingTop:8,paddingBottom:8,paddingLeft:8}},InputProps:{style:{py:2},startAdornment:t.jsx(be,{position:"start",children:t.jsx(ke,{src:Q.profilePic,sx:{height:40,width:40},size:"large"})})},fullWidth:!0,size:"small",maxRows:3,placeholder:"Write a log...",onClick:()=>r(L,{state:{open:!0,week:e.w,day:e.d,exercise:e.index},replace:!0})})})})})]}),e.clientSide&&e.mode!=="workout"?t.jsx(n,{mb:1,mt:6,children:t.jsx(X,{fullWidth:!0,variant:"contained",sx:{borderRadius:2},disabled:(Z=d==null?void 0:d.stats)==null?void 0:Z[`${e.w}-${e.d}-${e.index}`],onClick:k,children:"Done"})}):""]})})}const M=e=>{const[g,u]=l.useState("");return l.useEffect(()=>{e.link.type=="youtube"?u(re(e.link.file)):u(ce(e.link))},[e.link]),t.jsxs(n,{position:"relative",mr:1.5,onClick:e.onClick,width:100,height:66,borderRadius:1,bgcolor:"#fff",overflow:"hidden",children:[t.jsx(G,{src:g,style:{width:"100px",height:"66px",objectFit:"cover",borderRadius:8}}),t.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,height:"100%",width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:8},children:t.jsx(C,{icon:"majesticons:video",color:"common.white",width:18,height:18})}),t.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",borderRadius:8,padding:4,background:"rgba(0,0,0,0.20)"},children:t.jsx(m,{variant:"subtitle2",align:"center",sx:{fontWeight:"bold",fontSize:10,textTransform:"capitalize"},color:"common.white",children:e.link.title||"Untitled"})})]})},V=e=>{const[g,u]=l.useState("");return l.useEffect(()=>{u(e.link.file)},[e.link]),t.jsxs(n,{position:"relative",mr:1.5,onClick:e.onClick,width:100,height:66,borderRadius:8,children:[t.jsx(G,{src:g,style:{width:"100px",overflow:"hidden",height:"66px",objectFit:"cover",borderRadius:8}}),t.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,height:"100%",width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:8},children:t.jsx(C,{icon:"bi:image-fill",color:"common.white",width:18,height:18})}),t.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",borderRadius:8,padding:4,background:"rgba(0,0,0,0.20)"},children:t.jsx(m,{variant:"subtitle2",align:"center",sx:{fontWeight:"bold",fontSize:10},color:"common.white",children:e.link.title||"Untitled"})})]})};c(n)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 10px",maxWidth:"xs",zIndex:100}));c(n)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"}));c(n)(()=>({backgroundColor:"#fff",padding:"16px",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"16px"}));c(n)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));function it(e){const{newCard:g}=e;q();const[u,D]=l.useState(e.newCard);return h(E=>Object.values(E.Sync.programs).filter(w=>w.week==e.w&&w.day==e.d&&w.index==e.index)),t.jsx(Be,{...e,setEditMode:D,onClickDelete:e.deleteExercise,clientSide:e.clientSide})}export{it as E};
