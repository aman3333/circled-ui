import{e as ne,r as a,j as e,h as u,T as t,s as m,B as i,p as O,d as ae,b as ce,u as le,a as de,c as A,S as re,C as V,am as xe,i as pe,ad as he,f as ue}from"./index-tWVfh1a_.js";import{P as me}from"./Page-D7TsOLpr.js";import{S as ye}from"./Header-C-6_pkkN.js";import{S as fe}from"./Footer-BU_S36Uf.js";import{h as je}from"./moment-G82_0lEo.js";import{c as ge,b as w}from"./array-DbNmRnh0.js";import{u as be,F as ve,a as Ce}from"./formik.esm-jmAInz8L.js";import{L as P}from"./LabeledInput-B3Qf7l4R.js";import{L as z}from"./Label-BpkHbQCw.js";import{S as Se}from"./TextField-cyeEFY3i.js";import{M as L}from"./MenuItem-BRbCqEYh.js";import{R as te}from"./Radio-C4DJCFiF.js";import{I as Ae}from"./InputAdornment-DiI_gVyu.js";import{c as we,a as ie,s as Pe}from"./common-C0dnEDq7.js";import{a as Ie,c as Be,b as ke,d as Ee,e as Fe}from"./payments-D1Goe-hw.js";import{H as Te}from"./LoginDrawer-BTsmFa7J.js";import{A as oe}from"./Avatar-DYK8RM-C.js";import{D as $}from"./Divider-0_Mpg1Be.js";import{G as k}from"./Grid-C2UtAwNz.js";import"./isObject-MojUmidT.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./dividerClasses-ClaZwgHh.js";import"./SwitchBase-Bs2jeD_h.js";import"./google-login-TOBpJPnJ.js";import"./Onboarding-CSV0hQFI.js";m("div")(()=>({height:"100%"}));m(i)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 10px",zIndex:100}));const se=m(i)(({theme:I})=>({width:"100%",display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",border:"1px solid #E1E7F0",":focus-within":{border:`1px solid ${I.palette.secondary.main}`,boxShadow:"0px 4px 24px #E1E7F0"}}));function Ne(I){ne();const[b,B]=a.useState("VISA"),[c,x]=a.useState("none"),[l,p]=a.useState(""),E=()=>{l=="1"?x("Expired"):l=="2"?x("Incorrect"):x("Applied")},v=ge().shape({postalCode:w().required("Postal Code is required").max(10,"Enter a valid postalCode"),cardNo:w().required("Card no is required"),cardExpiry:w().required("Expiry is required"),cvv:w().required("CVV is required"),billingAddress:w().required("Billling Address")}),[U,F]=a.useState(null),r=be({initialValues:{postalCode:"",cardNo:"",cardExpiry:"",billingAddress:"0",cvv:""},validationSchema:v,onSubmit:async(n,{setErrors:q,setSubmitting:N})=>{N(!0)}}),{errors:d,touched:s,handleSubmit:C,isSubmitting:j,getFieldProps:f,setFieldValue:T,values:y}=r;return e.jsx(ve,{value:r,children:e.jsxs(Ce,{autoComplete:"off",noValidate:!0,onSubmit:C,children:[e.jsxs(u,{spacing:2,sx:{width:"100%"},children:[e.jsxs(u,{children:[e.jsx(t,{variant:"subtitle1",color:"text.primary",gutterBottom:!0,children:"Billing address"}),e.jsxs(Se,{fullWidth:!0,defaultValue:"0",...f("billingAddress"),error:s.billingAddress&&d.billingAddress,children:[e.jsx(L,{value:"0",disabled:!0,selected:!0,children:e.jsxs(t,{variant:"body1",color:"text.secondary",children:[" ","Choose Address"]})}),e.jsx(L,{value:"United Kingdom",children:"United Kingdom"}),e.jsx(L,{value:"United States",children:"United States"})]})]}),e.jsx(P,{fullWidth:!0,placeholder:"e.g. 1354GZ12",clabel:"Postal code",...f("postalCode"),error:!!(s.postalCode&&d.postalCode),helperText:s.postalCode&&d.postalCode}),e.jsxs(u,{spacing:2,children:[e.jsx(t,{variant:"subtitle1",color:"text.primary",children:"Payment method"}),e.jsxs(se,{children:[e.jsx(te,{color:"secondary",checked:b==="VISA",onChange:()=>B("VISA")})," ",e.jsx(t,{variant:"subtitle1",color:b==="VISA"?"text.primary":"text.secondary",children:"VISA"})]}),e.jsxs(se,{children:[e.jsx(te,{color:"secondary",checked:b==="Credit Card",onChange:()=>B("Credit Card")})," ",e.jsx(t,{variant:"subtitle1",color:b==="Credit Card"?"text.primary":"text.secondary",children:"Credit Card"})]})]}),e.jsx(P,{fullWidth:!0,placeholder:"",clabel:"Credit Card Number",...f("cardNo"),error:!!(s.cardNo&&d.cardNo),helperText:s.cardNo&&d.cardNo}),e.jsxs(u,{direction:"row",spacing:2,children:[e.jsx(P,{fullWidth:!0,placeholder:"mm/yy",clabel:"Expiry date",...f("cardExpiry"),error:!!(s.cardExpiry&&d.cardExpiry),helperText:s.cardExpiry&&d.cardExpiry}),e.jsx(P,{fullWidth:!0,placeholder:"****",clabel:"CVV",type:"number",...f("cvv"),error:!!(s.cvv&&d.cvv),helperText:s.cvv&&d.cvv})]}),e.jsx(P,{fullWidth:!0,placeholder:"e.g. 1354GZ12",clabel:"Discount code",value:l,onChange:n=>{p(n.target.value),x("none")},InputProps:{endAdornment:e.jsxs(Ae,{position:"end",children:[c=="none"&&e.jsx(i,{sx:{color:"#53647A"},children:e.jsx(O,{variant:"contained",color:"info",sx:{height:24,p:1},onClick:()=>E(),children:"Check"})}),c=="Expired"&&e.jsx(i,{children:e.jsx(z,{variant:"filled",color:"warning",children:e.jsx(t,{variant:"body2",color:"inherit",children:"Expired"})})}),c=="Incorrect"&&e.jsx(i,{children:e.jsx(z,{variant:"filled",color:"error",children:e.jsx(t,{variant:"body2",color:"inherit",children:"Incorrect"})})}),c=="Applied"&&e.jsx(i,{children:e.jsx(z,{variant:"filled",color:"success",children:e.jsx(t,{variant:"body2",color:"inherit",children:"Applied"})})})]}),style:{border:c=="Expired"?"1px solid #FFB400":c=="Incorrect"?"1px solid #EE3737":c=="Applied"?"1px solid #36E968":""}}})]})," "]})})}const Re=m("div")(()=>({backgroundColor:"#fff",height:"100%"})),Ve=m(i)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px"})),ze=m(i)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"})),Le=m(i)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",padding:"16px",borderTop:"1px solid rgb(225, 231, 240)",borderRadius:"24px 24px 0px 0px"}));m(i)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));m(ue)(({theme:I})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));function mr(){var W,M,H,G,Y,K,Z,_,J,Q,X,D,ee;const[I,b]=a.useState(!1),{search:B,pathname:c}=ae(),{id:x,email:l,token:p}=ce(),[E,v]=a.useState(!1),[U,F]=a.useState(!1),[r,d]=a.useState({}),[s,C]=a.useState(""),j=le(o=>o.Profile),[f,T]=a.useState(!1);new URLSearchParams(B);const y=de(),n=ne();a.useEffect(()=>{var o,g;r&&(r.PaymentType=="Subscription"?(o=window.paypal)==null||o.Buttons({style:{layout:"horizontal",color:"blue",height:55},createSubscription:function(h,R){return Be(x).then(S=>S)},onApprove:function(h,R){console.log(h),Ie(h.subscriptionID).then(()=>{y(A({loading:!1,sAnimate:!0,message:"Subscription Activated Successfully",severity:"success"})),n("/")}).catch(S=>{y(A({loading:!1,snackbar:!0,message:"Unable to activate subscription please contact support",severity:"info"}))})},onError:function(h){}}).render("#paypal-button-container"):(g=window==null?void 0:window.paypal)==null||g.Buttons({style:{layout:"horizontal",color:"blue",height:55},createOrder:function(h,R){return Ee(x).then(S=>S)},onApprove:function(h,R){ke(h.orderID).then(()=>{y(A({loading:!1,sAnimate:!0,message:"Plan Activated Successfully",severity:"success"})),n("/")}).catch(S=>{y(A({loading:!1,snackbar:!0,message:"Unable to activate plan please contact support",severity:"info"}))})},onError:function(h){}}).render("#paypal-button-container"))},[r._id]),a.useEffect(()=>{we({email:l.toLowerCase()}).then(o=>{F(!0)}).catch(o=>{F(!1)})},[]),a.useEffect(()=>{j.token?j.email.toLowerCase()==l.toLowerCase()?ie(x).then(o=>{d(o[0])}).catch(o=>{v(!0),C(404)}):(v(!0),C(401)):ie(x).then(o=>{d(o[0])}).catch(o=>{v(!0),C(404)})},[]);const q=o=>{if(!j.token){p&&!U?n("/onboarding/client",{state:{redirect:c,email:l,token:p}}):n("/login",{state:{redirect:c,email:l,token:p}});return}Fe(o).then(g=>{y(he({type:"Athlete"})).then(h=>{n("/")}),y(A({loading:!1,sAnimate:!0,message:"Program Added Successfully",severity:"success"}))})},N=()=>{s==401?(y(Pe()),p?n("/onboarding/client",{state:{redirect:c,email:l,token:p}}):n("/login",{state:{redirect:c,email:l,token:p}})):n("/")};return e.jsxs(Re,{children:[e.jsx(Te,{open:f,onClose:()=>T(!1),type:"program"}),e.jsx(me,{title:" Simplified Online Fitness Training ",children:E?e.jsx(re,{children:e.jsxs(V,{children:[e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",mt:8,children:e.jsx("img",{src:xe,height:46})}),e.jsxs(i,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",alignItems:"center",children:[e.jsx(pe,{icon:"ant-design:stop-outlined",sx:{fontSize:120,color:"text.secondary",mb:4}}),e.jsx(t,{gutterBottom:!0,variant:"h2",color:"text.secondary",sx:{textAlign:"center"},children:s==404?"Program unavailable":"Unauthorized Access"}),e.jsx(t,{gutterBottom:!0,variant:"body",color:"text.secondary",sx:{textAlign:"center"},children:s==404?"This program might have been removed or unavailable anymore":`This program is sent to ${l} only, you are not authorized to access this program`}),e.jsx("br",{}),e.jsx(O,{onClick:N,children:s==404?"Back to home":`Click here to ${p?"Signup":"Login"} as ${l}`})]})]})}):e.jsxs(re,{children:[" ",e.jsx(ye,{style:{borderRadius:"0px 0px 8px 8px",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",overflow:"hidden"},children:e.jsx(ze,{px:2,py:2,children:e.jsx(i,{display:"flex",alignItems:"center",children:e.jsx(t,{variant:"h5",color:"text.primary",children:"Program view"})})})})," ",r!=null&&r.Amount?e.jsxs(V,{withoutPadding:!0,style:{marginTop:-8},children:[e.jsx(Ve,{children:e.jsxs(i,{display:"flex",alignItems:"center",onClick:()=>n("/programOverview"),children:[e.jsx(oe,{variant:"rounded",style:{width:"96px",height:"83px",backgroundColor:"#F3F5F8"},src:(r==null?void 0:r.Program.BannerImage)||"/images/instructor/programImage.png"}),e.jsxs(i,{width:"auto",marginLeft:2,children:[e.jsx(t,{variant:"h6",color:"text.primary",sx:{textTransform:"capitalize"},children:r==null?void 0:r.Title})," ",e.jsxs(t,{color:"text.secondary",children:["$ ",(Q=r==null?void 0:r.Amount)==null?void 0:Q.toFixed(2)]})]})]})}),e.jsxs(i,{px:2,children:[e.jsx("br",{}),e.jsx(Ne,{}),e.jsx("br",{}),e.jsx($,{}),e.jsxs(u,{spacing:1.5,sx:{width:"100%"},children:[".",e.jsxs(u,{spacing:1,children:[e.jsx(t,{variant:"h4",color:"text.primary",children:"Summary"}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"body1",color:"text.secondary",children:"Original price:"})," ",e.jsxs(t,{variant:"body1",color:"text.secondary",children:["$ ",(X=r.Amount)==null?void 0:X.toFixed(2)]})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"body1",color:"text.secondary",children:"Discount:"})," ",e.jsx(t,{variant:"body1",color:"text.secondary",children:"- $ 0.00"})]}),e.jsx($,{})]}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(t,{variant:"h4",color:"text.primary",children:"Subtotal:"})," ",e.jsxs(t,{variant:"h4",color:"secondary.main",children:["$ ",(D=r.Amount)==null?void 0:D.toFixed(2)]})]}),e.jsx(t,{variant:"body1",color:"text.secondary",children:r.Description})]})]})]}):e.jsxs(V,{withoutPadding:!0,style:{marginTop:-8},children:[e.jsx(i,{position:"relative",backgroundColor:"#fff",children:e.jsx("img",{src:((W=r==null?void 0:r.Program)==null?void 0:W.BannerImage)||"/images/profile-banner.png",style:{width:"100%",height:"auto",marginTop:(M=r==null?void 0:r.Program)!=null&&M.BannerImage?-36:0,objectFit:"cover",borderBottomLeftRadius:8,borderBottomRightRadius:8}})}),e.jsx(i,{px:2,py:3,children:e.jsxs(u,{spacing:2,sx:{width:"100%"},children:[e.jsxs(i,{children:[e.jsx(t,{variant:"h4",align:"left",sx:{textTransform:"capitalize"},color:"text.primary",gutterBottom:!0,children:r==null?void 0:r.Title}),e.jsx(t,{color:"text.secondary",children:((H=r==null?void 0:r.Program)==null?void 0:H.Description)||"No details available"})]}),e.jsxs(u,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(oe,{src:(Y=(G=r==null?void 0:r.Program)==null?void 0:G.createdBy)==null?void 0:Y.profilePic}),e.jsxs(i,{children:[e.jsx(t,{variant:"h6",sx:{textTransform:"capitalize"},color:"text.primary",children:(Z=(K=r==null?void 0:r.Program)==null?void 0:K.createdBy)==null?void 0:Z.name}),e.jsx(t,{variant:"subtitle1",color:"primary",onClick:()=>{var o,g;return n(`/public/instructor-profile/${(g=(o=r==null?void 0:r.Program)==null?void 0:o.createdBy)==null?void 0:g._id}`)},children:"View profile"})]})]}),e.jsx($,{}),e.jsxs(k,{container:!0,children:[e.jsxs(k,{item:!0,xs:6,md:6,children:[e.jsx(t,{variant:"h6",color:"text.primary",children:"Date created"}),e.jsx(t,{color:"text.secondary",children:je(r==null?void 0:r.createdAt).format("DD-MM-YYYY")})]}),e.jsxs(k,{item:!0,xs:6,md:6,children:[e.jsx(t,{variant:"h6",color:"text.primary",children:"Duration"}),e.jsxs(t,{color:"text.secondary",children:[(_=r==null?void 0:r.Program)==null?void 0:_.Duration," Weeks"]})]}),e.jsxs(k,{item:!0,xs:6,md:6,sx:{mt:2},children:[e.jsx(t,{variant:"h6",color:"text.primary",children:"Pricing model"}),e.jsx(t,{color:"text.secondary",children:(J=r==null?void 0:r.Program)==null?void 0:J.PaymentType})]})]})]})})]}),e.jsx(fe,{children:e.jsx(Le,{children:e.jsxs(u,{direction:"row",justifyContent:"space-between",children:[e.jsxs(i,{children:[e.jsx(t,{color:"text.secondary",children:"Total price"}),e.jsxs(t,{variant:"h4",color:"text.primary",children:["$",(ee=r==null?void 0:r.Amount)==null?void 0:ee.toFixed(2)]})]}),r.Amount&&j.token?e.jsx(i,{id:"paypal-button-container"}):e.jsx(O,{variant:"contained",color:"primary",sx:{px:3,minWidth:172},id:"paypal-button-container",onClick:()=>{if(j.token)q(x);else{T(!0);return}},children:e.jsx(t,{variant:"subtitle1",children:(r.Amount==0,"Subscribe")})})]})})})]})})]})}export{mr as default};
