import{n as d,o as r,aF as o}from"./index-tWVfh1a_.js";const c=t=>new Promise((s,a)=>{d.post(`${r.protocol}${r.baseUrl}${r.addNewLog}`,{...t}).then(e=>{let l=o.getState(),i=l.Profile;if((i==null?void 0:i.type)=="Athlete"){let n=l.AtheletePlan;n.Exercises.ExercisePlan.weeks[t.week].days[t.day].Exercise[t.exercise].latestLog={...e.data.latestLog},o.dispatch({type:"UPDATE_ATHLETE_PLAN",payload:n})}else{let n=l.NewProgram;n.ExercisePlan.weeks[t.week].days[t.day].Exercise[t.exercise].latestLog={...e.data.latestLog},setTimeout(()=>{o.dispatch({type:"UPDATE_PROGRAM_CLIENT",payload:n}),o.dispatch({type:"UPDATE_PROGRAM",payload:n})},1e3)}return s(e.data.latestLog)}).catch(e=>{if(e.response&&e.response!==500)return a("error")})}),p=t=>new Promise((s,a)=>{d.get(`${r.protocol}${r.baseUrl}${r.fetchLogs}${t.id}/${t.week}/${t.day}/${t.exercise}`).then(e=>s(e.data)).catch(e=>{if(e.response&&e.response!==404)return s([]);if(e.response&&e.response!==500)return a("error")})}),P=t=>new Promise((s,a)=>{d.get(`${r.protocol}${r.baseUrl}${r.getAllLogs}${t.id}`).then(e=>s(e.data)).catch(e=>{if(e.response&&e.response!==500)return a("error")})}),L=t=>{let a=[...o.getState().ProgressLogs.logs];o.dispatch({type:"UPDATE_PROGRESS_LOGS",payload:[...a,t]})},y=(t,s)=>{let e=[...o.getState().ProgressLogs.logs],l=e.findIndex(i=>i._id==t);e[l]={...e[l],media:[...e[l].media,s]},o.dispatch({type:"UPDATE_PROGRESS_LOGS",payload:e})},h=t=>{let a=[...o.getState().ProgressLogs.logs];o.dispatch({type:"UPDATE_PROGRESS_LOGS",payload:a.filter(e=>e._id!=t)})};export{c as a,y as b,h as d,p as f,P as g,L as n};
