import{a as z,d as M,U as D,r as y,e as N,j as r,s as C,S as F,B as m,I as u,T as g,p as j,C as R,a3 as L,a4 as A,h as P,i as w,c9 as V,bh as U,cb as H,_ as O}from"./index-tWVfh1a_.js";import{P as G}from"./Page-D7TsOLpr.js";import{C as Y}from"./CopyFile-DU55SlIz.js";import{T as $}from"./trash-CssX9TdV.js";import{S as q}from"./Header-C-6_pkkN.js";import{L as J}from"./LabeledInput-B3Qf7l4R.js";import{E as K}from"./exerciseCard-C9-oJpFJ.js";import{A as Q}from"./ArrowLeft-lA8HnlgG.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./CloseRedIcon-DBKQk9yY.js";import"./routepath-BdjIj9sL.js";import"./convertToLink-D3DGDIAW.js";import"./Circular-CdB5voB0.js";import"./MessageCard-BW_wKbJJ.js";import"./moment-G82_0lEo.js";import"./getFileFormat-Bssviiun.js";import"./Image-B5TKYvdb.js";import"./ImageWithFallback-C5zvNA0Z.js";import"./Avatar-DYK8RM-C.js";import"./Grid-C2UtAwNz.js";import"./LogsDrawer-XtoQbBYz.js";import"./ProgressLogs-BwRPUwL2.js";import"./SwipeableDrawer-BEL-t-Lb.js";import"./Divider-0_Mpg1Be.js";import"./dividerClasses-ClaZwgHh.js";import"./Badge-ekxejyFm.js";import"./usePreviousProps-BiTDTLPM.js";import"./ExpandMore-BWzhjxbJ.js";import"./createSvgIcon-UmMwsC2Z.js";import"./UploadIcon-C1mo8_eB.js";import"./SaveCheck-1m_e5Ncs.js";import"./Workout-eTy7zLdJ.js";import"./More-BqGLUvK6.js";import"./edit-DiWhq57E.js";import"./Delete-fvKHvwYo.js";import"./ReactPlayerWithFallback-Zm03AunA.js";import"./index-DmwG6s5l.js";import"./ReactPlayer-B1HYrz8S.js";import"./memoize-one.esm-Cbrq43TT.js";import"./search-qBW2W_DU.js";import"./Checkbox-5Xdp7ogM.js";import"./SwitchBase-Bs2jeD_h.js";import"./YouTube-BrIpEXBG.js";import"./Dumbell-LvyqFLuX.js";import"./MenuItem-BRbCqEYh.js";import"./Share-D8xeKOeo.js";import"./CopyLink-DOxHVA9c.js";import"./exerciseCardBottomSelection-C6_Gz6HQ.js";import"./LibrarySelector-BSF-MZAA.js";import"./footer-BJqjd-0J.js";import"./Footer-BU_S36Uf.js";import"./InputAdornment-DiI_gVyu.js";import"./Tabs-Cs2QRRdO.js";import"./DB-D1UkOgeB.js";import"./AccordionSummary-D915UA4x.js";const X=C("div")(()=>({backgroundColor:"#F2F5F9",height:"100%"})),Z=C(m)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"}));function nt(){const E=z(),{state:ee}=M(),[o,a]=D(),[x,h]=y.useState(null),p=N(),l=y.useRef(null);l.current={},console.log(o);const v=()=>{o._id?E(V(o)).then(t=>{p(-1)}):E(U(o)).then(t=>{p(-1)})},k=()=>{let t={...o};t.Exercise.push({url:"",title:"",reps:null,sets:null,note:"",rest:null,banner:null,isNew:!0,id:new Date().getTime()}),l.current=t;let e=document.getElementById("circled-content");setTimeout(()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},500),a(t)},I=t=>{let e={...o};e={...e,...t},l.current=e,a(e)},T=t=>{let e={...o},i=e.Exercise[t];e.Exercise[t]=e.Exercise[t-1],e.Exercise[t-1]=i,l.current=e,a(e);let s=document.getElementById(e.Exercise[t]._id||e.Exercise[t].id);setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"center"})},500),h(e.Exercise[t].id||e.Exercise[t]._id)},_=t=>{let e={...o},i=e.Exercise[t];e.Exercise[t]=e.Exercise[t+1],e.Exercise[t+1]=i,l.current=e,a(e);let s=document.getElementById(e.Exercise[t]._id||e.Exercise[t].id);setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"center"})},500),h(e.Exercise[t].id||e.Exercise[t]._id)},S=t=>{let e=new Date().getTime(),i={...o},s={...i.Exercise[t],title:i.Exercise[t].title+" copy",id:e};delete s._id,i.Exercise.splice(t+1,0,s),l.current=i,a(i),setTimeout(()=>{h(e),document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"})},500)},b=t=>{var n,d;let e={...o},i=e.Exercise.splice(t,1),s=(d=(n=i==null?void 0:i[0])==null?void 0:n.media)==null?void 0:d.map(c=>c.split("https://vimeo.com/")[1]);s?E(H(s)).then(c=>{l.current=e,a(e)}).catch(c=>{c.response.status==404&&(l.current=e,a(e))}):(l.current=e,a(e))},f=(t,e)=>{let i={...o};i.Exercise[e]={...i.Exercise[e],...t},l.current=i,a(i)},B=(t,e)=>{p("/library/addmedia",{state:{file:t.target.files,index:e,workoutId:o._id}})},W=(t,e)=>{var n,d;let i=[...((n=o.Exercise[e])==null?void 0:n.media)||[],...t.map(c=>({file:c.media,type:c.type,title:c.title}))],s=O.union((d=o.Exercise[e])==null?void 0:d.triggerMuscle,...t.map(c=>c.triggerMuscle));f({media:i,triggerMuscle:s},e)};return r.jsx(X,{children:r.jsxs(G,{title:" Simplified Online Fitness Training ",children:[r.jsxs(F,{children:[" ",r.jsx(q,{noColor:!0,children:r.jsx(Z,{px:2,py:2,children:r.jsxs(m,{width:"100%",display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[r.jsxs(m,{display:"flex",alignItems:"center",flexDirection:"row",children:[r.jsx(u,{onClick:()=>p(-1,{replace:!0,state:{tab:1,sds:2}}),sx:{color:"text.primary"},children:r.jsx(Q,{})}),r.jsx(g,{variant:"body1",color:"text.primary",children:r.jsx(g,{component:"span",color:"text.primary",children:"Create workout"})})]}),r.jsx(j,{sx:{px:0},onClick:()=>v(),children:"Done"})]})})})," ",r.jsxs(R,{style:{paddingTop:16,paddingBottom:16,overflowY:"auto"},children:[r.jsx(J,{fullWidth:!0,placeholder:"Example: Chest day",clabel:"Workout title",onChange:t=>I({Title:t.target.value}),name:"title",value:o==null?void 0:o.Title,InputProps:{style:{backgroundColor:"white",boxShadow:"0px 4px 54px rgb(225 231 240 / 50%)"}}}),r.jsx(L,{children:o.Exercise.map((t,e)=>r.jsx(A,{children:r.jsxs(m,{mt:4,id:t._id||t.id,border:(t._id?x==t._id:t.id&&x==t.id)?"3px solid #2F86EB":"2px solid rgba(225, 231, 240, 1)",borderRadius:1,bgcolor:"white",p:2,onClick:()=>h(t._id||t.id),children:[r.jsxs(m,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(g,{color:"text.primary",sx:{fontSize:18,fontWeight:600,my:.5,background:"rgba(245, 247, 250, 1)",color:"rgba(109, 123, 143, 1)",p:1,px:2,borderRadius:1},children:["Exercise ",e+1]}),r.jsxs(P,{direction:"row",alignItems:"center",spacing:2,children:[r.jsx(u,{size:"small",onClick:()=>T(e),disabled:e==0,children:r.jsx(w,{icon:"ion:chevron-up",color:e==0?"grey.300":"text.primay"})}),r.jsx(u,{size:"small",onClick:()=>_(e),disabled:e+1==o.Exercise.length,children:r.jsx(w,{icon:"ion:chevron-down",color:e+1==o.Exercise.length?"grey.300":"text.primay"})}),r.jsx(u,{size:"small",onClick:()=>S(e),children:r.jsx(Y,{})}),r.jsx(u,{size:"small",onClick:()=>b(e),children:r.jsx($,{sx:{fontSize:21,marginTop:.5}})})]})]}),r.jsx(K,{activeExercise:t._id?x==t._id:t.id?x==t.id:!1,viewMode:!1,mode:"create",individualWorkout:!0,onMediaClick:i=>p("/library/addmedia",{state:{index:e}}),Program:{},_id:o._id,updateProgram:()=>{console.log("program updated")},w:0,onUploadNewMedia:i=>B(i,e),d:0,index:e,newCard:t.isNew||!t.title,deleteExercise:()=>b(e),editExercise:i=>f(i,e),uploadMediasFromLib:i=>W(i,e),plan:o.Exercise[e]})]})},e))}),r.jsx(m,{display:"flex",alignItems:"center",size:"small",sx:{mr:0,ml:0,mt:2},children:r.jsx(j,{fullWidth:!0,variant:"contained",size:"small",disabled:!(o!=null&&o.Title),sx:{borderRadius:1},onClick:()=>k(),children:"Add exercise"})})]})]})," "]})})}export{nt as default};
