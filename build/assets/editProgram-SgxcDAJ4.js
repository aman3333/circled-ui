import{U as A,d as B,r as j,a as _,g as z,e as N,j as e,S as O,B as f,I as $,T as D,p as b,V as h,W as E,c as x,X as k,Q as I,s as g,f as W}from"./index-tWVfh1a_.js";import{P as M}from"./Page-D7TsOLpr.js";import{S as G}from"./Header-C-6_pkkN.js";import{S as U}from"./progress-Dr06BXYB.js";import{S as L,P as H}from"./publishCreateProgram-StRwydA-.js";import P from"./workoutCalendar-CWvxImEO.js";import Q from"./publishProgram-BtCdOmX1.js";import{A as X}from"./ArrowLeft-lA8HnlgG.js";import"./createSvgIcon-UmMwsC2Z.js";import"./isMuiElement-CENM59Ut.js";import"./useControlled-DiwPEJyR.js";import"./Tabs-Cs2QRRdO.js";import"./Stepper-DvYlKPms.js";import"./Divider-0_Mpg1Be.js";import"./dividerClasses-ClaZwgHh.js";import"./LinearProgress-C4AIhOO1.js";import"./LabeledInput-B3Qf7l4R.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./array-DbNmRnh0.js";import"./isObject-MojUmidT.js";import"./formik.esm-jmAInz8L.js";import"./uploader-C1vfyOx8.js";import"./index-CzZqv2Gi.js";import"./calenderFormatPopover-ykbtVjF8.js";import"./InputAdornment-DiI_gVyu.js";import"./ListItemButton-CBlngsNS.js";import"./Radio-C4DJCFiF.js";import"./SwitchBase-Bs2jeD_h.js";import"./MenuItem-BRbCqEYh.js";import"./ProgramDescriptionModal-Dkibb7pp.js";import"./ProgramTypePopover-SwnXS8w9.js";import"./index-HzyBoqWI.js";import"./Badge-ekxejyFm.js";import"./usePreviousProps-BiTDTLPM.js";import"./Grid-C2UtAwNz.js";import"./workoutWeek-CnKE-hW2.js";import"./TextMaxLine-BUlHRtTt.js";import"./Link-D6ktmyc-.js";import"./LibrarySelector-BSF-MZAA.js";import"./Workout-eTy7zLdJ.js";import"./convertToLink-D3DGDIAW.js";import"./ImageWithFallback-C5zvNA0Z.js";import"./Circular-CdB5voB0.js";import"./More-BqGLUvK6.js";import"./edit-DiWhq57E.js";import"./Delete-fvKHvwYo.js";import"./ReactPlayerWithFallback-Zm03AunA.js";import"./index-DmwG6s5l.js";import"./ReactPlayer-B1HYrz8S.js";import"./memoize-one.esm-Cbrq43TT.js";import"./search-qBW2W_DU.js";import"./Checkbox-5Xdp7ogM.js";import"./YouTube-BrIpEXBG.js";import"./Dumbell-LvyqFLuX.js";import"./Share-D8xeKOeo.js";import"./CopyLink-DOxHVA9c.js";import"./moment-G82_0lEo.js";import"./footer-BJqjd-0J.js";import"./Footer-BU_S36Uf.js";import"./DB-D1UkOgeB.js";import"./SaveCheck-1m_e5Ncs.js";import"./SwipeableDrawer-BEL-t-Lb.js";import"./index-BrBV3hc8.js";import"./routepath-BdjIj9sL.js";import"./AddCircled-C-pHs73y.js";import"./trash-CssX9TdV.js";import"./Walkthrough-DXggXs_W.js";import"./index-Cp5sxvbr.js";import"./warning-C20GYw-A.js";import"./sendProgramEmails-BD0dy4IK.js";import"./updateProgramForm-CBjesxIP.js";import"./AddImage-CqZmaXGL.js";g("div")(()=>({display:"flex",flexDirection:"column",flex:1,flexGrow:1,height:"100vh"}));g(f)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 0",maxWidth:"xs",zIndex:100,borderRadius:"0px 0px 8px 8px"}));g(f)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));g(W)(({theme:t})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));function be({}){const[t,v,n]=A(),{state:s}=B(),[o,m]=j.useState((s==null?void 0:s.tab)||0),i=_(),r=j.useRef(null),{showConfirmationModal:T}=z(),p=N(),w=a=>{var l;if(!((l=r.current)!=null&&l.validateForm)){m(a),i({type:"UPDATE_PROGRAM",payload:{ScreenStats:{CurrentScreen:a==0?"start":a==1?"workouts":"publish"}}});return}r.current.validateForm().then(d=>{Object.keys(d).length==0?(o!==(t.IsDraft?3:2)&&r.current.handleSubmit(),p(`/editProgram/${t._id}/publishProgram`,{replace:!0,state:{tab:a}}),i({type:"UPDATE_PROGRAM",payload:{ScreenStats:{CurrentScreen:a==0?"start":a==1?"workouts":"publish"}}}),m(a)):r.current.handleSubmit()})},y=()=>{if(!r.current.validateForm){m(o+1);return}r.current.validateForm().then(a=>{Object.keys(a).length==0?(r.current.handleSubmit(),o!==3&&(m(o+1),p(`/editProgram/${t._id}`,{replace:!0,state:{tab:o+1}}),i({type:"UPDATE_PROGRAM",payload:{ScreenStats:{CurrentScreen:o==0?"start":o==1?"workouts":"publish"}}}))):r.current.handleSubmit()})},R=()=>{m(o-1)},C=()=>{var a,l;if(h(t))T("Save as draft?",`Your week ${E(t)} is currently empty. Please add at least one workout or delete the week to proceed with publishing the program`,"Continue","Save as draft").then(d=>{var c,u;d?R():(i(x({loading:!0})),(c=r.current)!=null&&c.handleSubmit&&((u=r.current)==null||u.handleSubmit(n)),i(v({...t,IsDraft:h(t)})),setTimeout(()=>{i(k({...t,IsDraft:h(t)})).then(S=>{setTimeout(()=>{p("/instructor")},500),i(x({loading:!1,snackbar:!0,message:"Program saved successfully",severity:"success"}))})},500))});else{if(!r.current.validateForm){(a=r.current)!=null&&a.handleSubmit&&((l=r.current)==null||l.handleSubmit(n)),i(x({loading:!0})),i(v({...t,IsDraft:h(t)})),setTimeout(()=>{i(k({...t,IsDraft:h(t)})).then(d=>{setTimeout(()=>{p("/instructor")},500),i(I()),i(x({loading:!1,snackbar:!0,message:"Program saved successfully",severity:"success"}))})},1e3);return}r.current.validateForm().then(d=>{var c,u;Object.keys(d).length==0?(r.current.handleSubmit(),i(x({loading:!0})),(c=r.current)!=null&&c.handleSubmit&&((u=r.current)==null||u.handleSubmit(n)),setTimeout(()=>{i(k({...t,IsDraft:h(t)})).then(S=>{setTimeout(()=>{p("/instructor")},500),i(I()),i(x({loading:!1,snackbar:!0,message:"Program saved successfully",severity:"success"}))})},1e3)):r.current.handleSubmit()})}},F=()=>{if(n=="edit"&&!t.IsDraft)return e.jsx(b,{sx:{fontSize:16,paddingRight:0},onClick:C,children:"Save"});switch(o){case 2:return e.jsx(b,{sx:{fontSize:16,paddingRight:0},onClick:C,children:n=="edit"?t.IsDraft?"Publish":"Save":"Publish"});case 1:return e.jsx(b,{sx:{fontSize:16,paddingRight:0},onClick:y,children:"Next"});case 0:return e.jsx(b,{sx:{fontSize:16,paddingRight:0},onClick:y,children:"Next"});default:return e.jsx(b,{sx:{fontSize:16,paddingRight:0},onClick:y,children:"Next"})}};return j.useEffect(()=>{var a,l,d,c;t.IsDraft&&(((a=t==null?void 0:t.ScreenStats)==null?void 0:a.CurrentScreen)=="workoutDay"&&(s==null?void 0:s.type)!=="inside"&&setTimeout(()=>{var u,S;p(`/editProgram/${t._id}`,{replace:!0,state:{tab:1,type:"inside"}}),p(`/editProgram/${t._id}/workoutDay`,{state:{tab:1,week:(u=t==null?void 0:t.ScreenStats)==null?void 0:u.Week,day:(S=t==null?void 0:t.ScreenStats)==null?void 0:S.Day}})},100),((l=t==null?void 0:t.ScreenStats)==null?void 0:l.CurrentScreen)=="start"&&(s==null?void 0:s.type)!=="inside"&&setTimeout(()=>{m(0),p(`/editProgram/${t._id}`,{replace:!0,state:{tab:0,type:"inside"}})},100),((d=t==null?void 0:t.ScreenStats)==null?void 0:d.CurrentScreen)=="workouts"&&(s==null?void 0:s.type)!=="inside"&&setTimeout(()=>{m(1),p(`/editProgram/${t._id}`,{replace:!0,state:{tab:1,type:"inside"}})},100),((c=t==null?void 0:t.ScreenStats)==null?void 0:c.CurrentScreen)=="publish"&&(s==null?void 0:s.type)!=="inside"&&setTimeout(()=>{m(2),p(`/editProgram/${t._id}`,{replace:!0,state:{tab:2,type:"inside"}})},100))},[t]),e.jsx(M,{title:" Simplified Online Fitness Training ",children:e.jsxs(O,{children:[e.jsx(G,{style:{borderRadius:"0px 0px 8px 8px",backgroundColor:"white",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",overflow:"hidden"},reducedHeight:16,children:e.jsxs(f,{pt:2,borderRadius:4,overflow:"hidden",children:[e.jsxs(f,{width:"100%",display:"flex",px:2,mb:1,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(f,{display:"flex",alignItems:"center",children:[" ",e.jsx($,{onClick:()=>p(-1),sx:{color:"text.primary"},children:e.jsx(X,{})}),e.jsx(D,{variant:"body1",color:"text.primary",children:e.jsx(f,{display:"flex",alignItems:"center",children:e.jsxs(D,{variant:"subtitle1",color:"text.primary",children:[" ",n=="edit"?t.IsDraft?"Draft":"Edit program":n==="customize"?"Workout":"Create program"]})})})," "]})," ",F()]}),e.jsx(f,{px:2,pb:2,children:e.jsx(U,{setSelectedTab:w,noClose:!0,mode:n,stepper:t.IsDraft,Program:t,selectedTab:o,route:n=="edit"&&!t.IsDraft?[0,2]:[0,2],label:n=="edit"&&!t.IsDraft?["Workouts","Overview"]:["Start","Workouts","Publish"],steps:n=="edit"&&!t.IsDraft?2:3,active:(n=="edit"&&!t.IsDraft,1),handleClose:()=>p("/",{replace:!0})})})]})}),t.IsDraft?e.jsxs(e.Fragment,{children:[o===0&&e.jsx(L,{ref:r}),o==1&&e.jsx(P,{ref:r}),o==2&&e.jsx(H,{ref:r})]}):e.jsxs(e.Fragment,{children:[o==0&&e.jsx(P,{ref:r}),o==2&&e.jsx(Q,{ref:r})]})]})})}export{be as default};
