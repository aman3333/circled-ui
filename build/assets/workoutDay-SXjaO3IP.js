import{a as $,d as D,u as H,r as g,U,e as O,g as V,j as i,s as w,S as G,B as y,I as u,T as f,p as T,C as Y,a3 as q,a4 as J,h as K,i as S,_ as Q,f as X}from"./index-tWVfh1a_.js";import{P as Z}from"./Page-D7TsOLpr.js";import{S as ee}from"./Header-C-6_pkkN.js";import{L as te}from"./LabeledInput-B3Qf7l4R.js";import{E as se}from"./exerciseCard-C9-oJpFJ.js";import{c as re}from"./routepath-BdjIj9sL.js";import{A as ie}from"./ArrowLeft-lA8HnlgG.js";import{C as ae}from"./CopyFile-DU55SlIz.js";import{T as oe}from"./trash-CssX9TdV.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./CloseRedIcon-DBKQk9yY.js";import"./convertToLink-D3DGDIAW.js";import"./Circular-CdB5voB0.js";import"./MessageCard-BW_wKbJJ.js";import"./moment-G82_0lEo.js";import"./getFileFormat-Bssviiun.js";import"./Image-B5TKYvdb.js";import"./ImageWithFallback-C5zvNA0Z.js";import"./Avatar-DYK8RM-C.js";import"./Grid-C2UtAwNz.js";import"./LogsDrawer-XtoQbBYz.js";import"./ProgressLogs-BwRPUwL2.js";import"./SwipeableDrawer-BEL-t-Lb.js";import"./Divider-0_Mpg1Be.js";import"./dividerClasses-ClaZwgHh.js";import"./Badge-ekxejyFm.js";import"./usePreviousProps-BiTDTLPM.js";import"./ExpandMore-BWzhjxbJ.js";import"./createSvgIcon-UmMwsC2Z.js";import"./UploadIcon-C1mo8_eB.js";import"./SaveCheck-1m_e5Ncs.js";import"./Workout-eTy7zLdJ.js";import"./More-BqGLUvK6.js";import"./edit-DiWhq57E.js";import"./Delete-fvKHvwYo.js";import"./ReactPlayerWithFallback-Zm03AunA.js";import"./index-DmwG6s5l.js";import"./ReactPlayer-B1HYrz8S.js";import"./memoize-one.esm-Cbrq43TT.js";import"./search-qBW2W_DU.js";import"./Checkbox-5Xdp7ogM.js";import"./SwitchBase-Bs2jeD_h.js";import"./YouTube-BrIpEXBG.js";import"./Dumbell-LvyqFLuX.js";import"./MenuItem-BRbCqEYh.js";import"./Share-D8xeKOeo.js";import"./CopyLink-DOxHVA9c.js";import"./exerciseCardBottomSelection-C6_Gz6HQ.js";import"./LibrarySelector-BSF-MZAA.js";import"./footer-BJqjd-0J.js";import"./Footer-BU_S36Uf.js";import"./InputAdornment-DiI_gVyu.js";import"./Tabs-Cs2QRRdO.js";import"./DB-D1UkOgeB.js";import"./AccordionSummary-D915UA4x.js";const le=w("div")(()=>({backgroundColor:"#F2F5F9",height:"100%"}));w(y)(()=>({position:"relative"}));w(y)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));w(X)(({theme:I})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));const ce=w(y)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"}));function gt({steps:I=4,active:ne=1}){const l=$(),{state:e}=D();H(s=>s.Library.workouts);const{search:B}=D();new URLSearchParams(B);const[de,pe]=g.useState([{},{}]),[a,c,P]=U(),[k,E]=g.useState(null),b=O(),n=g.useRef(null);n.current={...a},g.useEffect(()=>(l({type:"UPDATE_PROGRAM",payload:{ScreenStats:{CurrentScreen:"workoutDay",Week:e.week,Day:e.day}}}),()=>{let s={...n.current.ExercisePlan};s.weeks[e.week].days[e.day].Exercise=s.weeks[e.week].days[e.day].Exercise.filter(t=>{var r;return t.title||((r=t==null?void 0:t.media)==null?void 0:r.length)}),l(c({ExercisePlan:s}))}),[]);const F=()=>{let s={...a.ExercisePlan};s.weeks[e.week].days[e.day].Exercise.push({url:"",title:"",reps:null,sets:null,note:"",rest:null,banner:null,isNew:!0,id:new Date().getTime()}),n.current=s;let t=document.getElementById("circled-content");setTimeout(()=>{t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},500),l(c({ExercisePlan:s}))},W=s=>{let t={...a.ExercisePlan};t.weeks[e.week].days[e.day]={...t.weeks[e.week].days[e.day],...s},n.current=t,l(c({ExercisePlan:t}))},{showConfirmationModal:_}=V(),j=s=>{let t={...a.ExercisePlan};_("Are you sure?","You are going to delete this exercise. This process is irreversible","Delete").then(r=>{r&&t.weeks[e.week].days[e.day].Exercise.splice(s,1)}),n.current=t,l(c({ExercisePlan:t}))},M=(s,t)=>{let r={...a};r.ExercisePlan.weeks[e.week].days[e.day].Exercise[t]={...r.ExercisePlan.weeks[e.week].days[e.day].Exercise[t],...s},n.current=r.ExercisePlan,l(c({ExercisePlan:r.ExercisePlan}))},N=(s,t,r,o)=>{b(re(P,"/workoutDay/editExercise",a._id),{state:{file:s.target.files,week:t,day:r,index:o}})};(a==null?void 0:a.calendarType)=="Numeric days";const z=(s,t,r,o)=>{var p;let d={...a},x=[...(p=d.ExercisePlan.weeks[t].days[r].Exercise[o])!=null&&p.media?d.ExercisePlan.weeks[t].days[r].Exercise[o].media:[],...s.map(m=>({file:m.media,type:m.type,title:m.title}))],h=Q.union(d.ExercisePlan.weeks[t].days[r].Exercise[o].triggerMuscle,...s.map(m=>m.triggerMuscle));d.ExercisePlan.weeks[t].days[r].Exercise[o]={...d.ExercisePlan.weeks[t].days[r].Exercise[o],media:x,triggerMuscle:h},n.current=d,l(c({ExercisePlan:d.ExercisePlan}))},R=s=>{let t={...a.ExercisePlan},r=t.weeks[e.week].days[e.day].Exercise[s];t.weeks[e.week].days[e.day].Exercise[s]=t.weeks[e.week].days[e.day].Exercise[s+1],t.weeks[e.week].days[e.day].Exercise[s+1]=r,n.current=t;let o=document.getElementById(t.weeks[e.week].days[e.day].Exercise[s]._id||t.weeks[e.week].days[e.day].Exercise[s].id);setTimeout(()=>{o.scrollIntoView({top:o.scrollHeight,behavior:"smooth",block:"center"})},500),l(c({ExercisePlan:t})),E(t.weeks[e.week].days[e.day].Exercise[s]._id||t.weeks[e.week].days[e.day].Exercise[s].id)},A=s=>{let t={...a.ExercisePlan},r=t.weeks[e.week].days[e.day].Exercise[s];t.weeks[e.week].days[e.day].Exercise[s]=t.weeks[e.week].days[e.day].Exercise[s-1],t.weeks[e.week].days[e.day].Exercise[s-1]=r,n.current=t,l(c({ExercisePlan:t}));let o=document.getElementById(t.weeks[e.week].days[e.day].Exercise[s]._id||t.weeks[e.week].days[e.day].Exercise[s].id);setTimeout(()=>{o.scrollIntoView({top:o.scrollHeight,behavior:"smooth",block:"center"})},500),E(t.weeks[e.week].days[e.day].Exercise[s]._id||t.weeks[e.week].days[e.day].Exercise[s].id)},L=s=>{let t=new Date().getTime(),r={...a.ExercisePlan};const o=r.weeks[e.week].days[e.day].Exercise[s].title,d=r.weeks[e.week].days[e.day].Exercise.filter(p=>p.title.startsWith(o+" copy")||p.title.includes(" copy"));let x;if(d.length===0)x=o+" copy";else{const p=d.map(C=>{const v=C.title.match(/copy(\d+)$/);return v?parseInt(v[1]):0}),m=Math.max(...p);o.includes("copy")?x=o.replace(/ copy\d+$/,"").replace(" copy","")+" copy"+(m+1):x=o+" copy"+(m+1)}let h={...r.weeks[e.week].days[e.day].Exercise[s],title:x,id:t};delete h._id,r.weeks[e.week].days[e.day].Exercise.splice(s+1,0,h),n.current=r,l(c({ExercisePlan:r})),setTimeout(()=>{let p=document.getElementById(t);p.scrollIntoView({top:p.scrollHeight,behavior:"smooth",block:"center"}),E(t)},1e3)};return i.jsx(le,{children:i.jsxs(Z,{title:" Simplified Online Fitness Training ",children:[i.jsxs(G,{children:[" ",i.jsx(ee,{noColor:!0,children:i.jsx(ce,{px:2,py:2,children:i.jsxs(y,{width:"100%",display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",children:[i.jsxs(y,{display:"flex",alignItems:"center",flexDirection:"row",children:[i.jsx(u,{onClick:()=>b(-1,{replace:!0,state:{tab:1,sds:2}}),sx:{color:"text.primary"},children:i.jsx(ie,{})}),i.jsx(f,{variant:"body1",color:"text.primary",children:i.jsx(f,{component:"span",variant:"subtitle1",color:"text.primary",children:"Workout"})})]}),i.jsx(T,{sx:{px:0},onClick:()=>b(-1),children:"Done"})]})})})," ",i.jsxs(Y,{style:{paddingTop:16,paddingBottom:16,overflowY:"auto",backgroundColor:"#F9FAFD",paddingLeft:16,paddingRight:16},children:[i.jsxs(f,{sx:{fontSize:20,fontWeight:400,color:"#6D7B8F"},color:"text.secondary",children:["Week ",(e==null?void 0:e.week)+1," - Day ",(e==null?void 0:e.day)+1]}),i.jsx("br",{}),i.jsx(te,{fullWidth:!0,placeholder:"Example: Chest day",clabel:"Workout title",onChange:s=>W({Title:s.target.value}),name:"title",value:a.ExercisePlan.weeks[e.week].days[e.day].Title,InputProps:{style:{backgroundColor:"white",boxShadow:"0px 4px 54px rgb(225 231 240 / 50%)"}}}),i.jsx(q,{children:a.ExercisePlan.weeks[e.week].days[e.day].Exercise.map((s,t)=>i.jsx(J,{in:!0,out:!0,timeout:500,children:i.jsxs(y,{mt:4,id:s._id||s.id,onClick:()=>E(s._id||s.id),sx:{cursor:"pointer"},border:(s._id?k==s._id:s.id&&k==s.id)?"3px solid #2F86EB":"2px solid rgba(225, 231, 240, 1)",borderRadius:1,bgcolor:"white",p:2,children:[i.jsxs(y,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[i.jsxs(f,{color:"text.primary",sx:{fontSize:18,fontWeight:600,my:.5,background:"rgba(245, 247, 250, 1)",color:"rgba(109, 123, 143, 1)",p:1,px:2,borderRadius:1},children:["Exercise ",t+1]}),i.jsxs(K,{direction:"row",alignItems:"center",spacing:2,children:[i.jsx(u,{size:"small",onClick:()=>A(t),disabled:t==0,children:i.jsx(S,{icon:"ion:chevron-up",color:t==0?"grey.300":"text.primay"})}),i.jsx(u,{size:"small",onClick:()=>R(t),disabled:t+1==a.ExercisePlan.weeks[e.week].days[e.day].Exercise.length,children:i.jsx(S,{icon:"ion:chevron-down",color:t+1==a.ExercisePlan.weeks[e.week].days[e.day].Exercise.length?"grey.300":"text.primay"})}),i.jsx(u,{size:"small",onClick:()=>L(t),children:i.jsx(ae,{})}),i.jsx(u,{size:"small",onClick:()=>j(t),children:i.jsx(oe,{sx:{fontSize:21,marginTop:.5}})})]})]}),i.jsx(se,{title:`${a.ExercisePlan.weeks[e.week].days[e.day].Title} : Exercise ${t+1} | ${a.ExercisePlan.weeks[e.week].days[e.day].Exercise[t].title}`,viewMode:!0,activeExercise:s._id?k==s._id:s.id?k==s.id:!1,Program:a,updateProgram:c,mode:P,w:e.week,onUploadNewMedia:r=>N(r,e.week,e.day,t),uploadMediasFromLib:r=>z(r,e.week,e.day,t),d:e.day,index:t,newCard:s.isNew||!s.title,deleteExercise:()=>j(t),editExercise:r=>M(r,t),plan:a.ExercisePlan.weeks[e.week].days[e.day].Exercise[t]})]})},t))}),i.jsx(y,{display:"flex",alignItems:"center",size:"small",sx:{mr:0,ml:0,mt:2},children:i.jsx(T,{fullWidth:!0,variant:"contained",size:"small",disabled:!a.ExercisePlan.weeks[e.week].days[e.day].Title,sx:{borderRadius:1},onClick:()=>F(),children:"Add Exercise"})})]})]})," "]})})}export{gt as default};
