import{s as n,B as t,e as g,j as e,T as x,r as u,a as F,u as E,h as v,I as h,i as l,f as k,p as w,b as B,aq as D,R as C,S as M}from"./index-tWVfh1a_.js";import{P as A}from"./Page-D7TsOLpr.js";import{S as U}from"./Header-C-6_pkkN.js";import{S as W}from"./Footer-BU_S36Uf.js";import{A as R}from"./Avatar-DYK8RM-C.js";import{S as N}from"./SwipeableDrawer-BEL-t-Lb.js";import{T}from"./TextField-cyeEFY3i.js";import{I as P}from"./InputAdornment-DiI_gVyu.js";import{T as z}from"./TabContext-CXvaiNSx.js";import{T as $,a as S}from"./Tabs-Cs2QRRdO.js";import{b as I}from"./common-C0dnEDq7.js";import{a as H}from"./chat-DxkSMC6D.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";const L=n(t)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0 0 10px 0",padding:"5px",borderRadius:4,cursor:"pointer",":hover":{boxShadow:"0px 4px 54px rgba(225, 231, 240, 1)"}})),O=n(t)(()=>({width:"100%",backgroundColor:"#fff",borderRadius:"0px 0px 8px 8px"}));n(t)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));function q(o){g();const s=[{},{},{},{}];return e.jsx(O,{children:s.map(r=>e.jsx(L,{children:e.jsxs(t,{display:"flex",alignItems:"center",onClick:()=>o.handleSendProgram(r),children:[e.jsx(R,{variant:"rounded",style:{width:"120px",height:"112px",backgroundColor:"#F3F5F8"},src:"/images/instructor/programImage.png"}),e.jsxs(t,{width:"auto",marginLeft:2,children:[e.jsx(x,{variant:"h5",color:"text.primary",children:r.Title??"Fat Toaster"})," ",e.jsx(x,{variant:"body2",color:"text.secondary",children:"Price : $299.00"})]})]})}))})}const K=n(t)(({theme:o})=>({display:"flex",width:"100%",justifyContent:"center"}));function Y(o){const[s,r]=u.useState(!1);F(),g(),E(a=>a.NewProgram);const i=a=>d=>{d&&d.type==="keydown"&&(d.key==="Tab"||d.key==="Shift")||r(a)},[p,m]=u.useState(0),f=(a,d)=>{m(d)};return e.jsxs("div",{children:[e.jsxs(N,{anchor:"bottom",PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none"}},disableBackdropTransition:!0,open:s,onClose:i(!1),onOpen:i(!0),children:[e.jsx(t,{display:"flex",justifyContent:"center",sx:{mb:1},children:e.jsx("img",{src:"/images/bottomDrawerIndicator.png",width:"170px",height:"5px"})}),e.jsx(t,{padding:"16px",style:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",backgroundColor:"#fff"},children:e.jsxs(v,{spacing:2,children:[e.jsx(T,{fullWidth:!0,placeholder:"Search for programs",InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(h,{children:e.jsx(l,{icon:"eva:search-fill",width:24,height:24,color:"text.secondary"})})})}}),e.jsx(z,{value:p,children:e.jsx(K,{children:e.jsxs($,{variant:"fullWidth",value:p,onChange:f,"aria-label":"",sx:{p:.4,backgroundColor:a=>a.palette.background.default},children:[e.jsx(S,{label:"My Programs",sx:{minWidth:"142px",px:1,"&.Mui-selected":{color:a=>a.palette.primary.main,backgroundColor:"#fff",boxShadow:"0px 1px 7px #E1E7F0",border:"1px solid #E1E7F0"}}}),e.jsx(S,{label:"All Programs",sx:{minWidth:"140px",px:1,"&.Mui-selected":{color:a=>a.palette.primary.main,backgroundColor:"#fff",boxShadow:"0px 1px 7px #E1E7F0",border:"1px solid #E1E7F0"}}})]})})}),e.jsx(q,{handleSendProgram:a=>{o.sendProgram(a),r(!1)}})]})})]}),e.jsx("div",{onClick:()=>r(!0),children:o.children})]})}const G=n(t)(()=>({width:"100%",boxShadow:"0px 4px 54px #E1E7F0",borderRadius:"24px 24px 0px 0px"}));n(t)(()=>({width:"100%",backgroundColor:"#fff",borderRadius:"0px 0px 8px 8px"}));const J=n(t)(()=>({borderRadius:"12px 24px 0px 0px",width:"100%",display:"flex",justifyContent:"space-between",padding:"0 15px 0 10px",alignItems:"center",backgroundColor:"#E1E7F0"})),Q=n(t)(({theme:o})=>({borderRadius:24,backgroundColor:o.palette.background.default,display:"flex",width:"100%",padding:"8px 8px 8px 16px",justifyContent:"space-between",alignItems:"center"}));function V(o){g();const{isClientSide:s,handleSendProgram:r,replyToMessage:i,handleCancelReply:p,handleSendText:m}=o,[f,a]=u.useState(!1),[d,j]=u.useState(""),[b,y]=u.useState(!1);return e.jsx(G,{children:e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"end",width:"100%",px:3,py:2,children:[e.jsx(t,{sx:{mr:1},children:!f&&!b?e.jsx(h,{color:"primary",variant:"contained",onClick:()=>a(!0),sx:{height:48,width:48,backgroundColor:c=>c.palette[s?"secondary":"primary"].main,":hover":{backgroundColor:c=>c.palette[s?"secondary":"primary"].main}},children:e.jsx(l,{icon:"fluent:add-24-filled",color:"common.white",width:24,height:24})}):e.jsx(e.Fragment,{children:b?e.jsx(h,{onClick:()=>y(!1),children:e.jsx(l,{icon:"wpf:delete",color:"error.main",width:24,height:24})}):e.jsx(h,{variant:"contained",onClick:()=>a(!1),sx:{height:48,width:48,backgroundColor:"#E1E7F0",":hover":{backgroundColor:"#E1E7F0"}},children:e.jsx(l,{icon:"eva:close-fill",color:"text.secondary",width:24,height:24})})})}),e.jsxs(t,{width:"100%",position:"relative",children:[" ",i&&e.jsxs(J,{children:[e.jsxs(t,{display:"flex",alignItems:"center",children:[e.jsx(l,{icon:"tabler:arrow-back-up",color:"text.secondary"}),"  ",e.jsxs(x,{variant:"caption",color:"text.secondary",noWrap:!0,width:"180px",children:["Replying to ",i.text]})]}),e.jsx(k,{onClick:()=>p(),children:e.jsx(l,{icon:"eva:close-fill",color:"text.secondary"})})]}),f?e.jsxs(t,{display:"flex",width:"100%",children:[!s&&e.jsx(Y,{sendProgram:c=>{r(c),j("")},children:e.jsxs(w,{variant:"contained",color:"primary",sx:{px:2},children:[e.jsx(l,{icon:"ic:round-ballot",width:"24px",height:"24px",color:"common.white"}),e.jsx(x,{variant:"subtitle2",color:"common.white",children:"Send program"})]})}),"  ",e.jsxs(w,{variant:"contained",fullWidth:s,color:s?"secondary":"primary",sx:{px:2},children:[e.jsx(l,{icon:"bxs:image-alt",width:"24px",height:"24px",color:"common.white"}),e.jsx(x,{variant:"subtitle2",color:"common.white",children:"Media"})]})]}):e.jsx(e.Fragment,{children:b?e.jsxs(Q,{children:[e.jsx(x,{variant:"body1",color:"text.secondary",children:"00:06"}),e.jsx(h,{onClick:()=>y(!1),children:e.jsx(l,{icon:"fluent:send-24-filled",color:"primary.main",width:24,height:24})})]}):e.jsx(T,{fullWidth:!0,placeholder:"Your message",value:d,onChange:c=>j(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(m(d,i),j(""),p())},InputProps:{style:{fontSize:16,height:48,borderRadius:i?"0 0 24px 24px":24,paddingLeft:10},endAdornment:e.jsx(P,{position:"end",children:e.jsx(h,{onClick:()=>y(!0),children:e.jsx(l,{icon:"fluent:mic-24-regular",color:"text.secondary"})})})}})})]})]})})}function X(o){return s=>e.jsx(o,{...s,navigate:g(),params:B()})}const Z=n("div")(()=>({backgroundColor:"#fff",height:"100%"}));n(t)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));n(k)(({theme:o})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));const _=n(t)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"}));n(t)(({theme:o})=>({display:"flex",width:"100%",justifyContent:"center"}));class ee extends u.Component{constructor(s){super(s),this.componentDidMount=()=>{console.log(this.props),this.props.Chat.chatUsers[this.props.params.id]?this.props.getChats(this.props.params.id).then(r=>{r.length<50&&this.setState({hasMore:!1})},r=>{r==404&&this.setState({hasMore:!1})}):I(this.props.params.id).then(r=>{this.props.setUserChatDetails(r),this.props.getChats(this.props.params.id).then(i=>{i.length<50&&this.setState({hasMore:!1})},i=>{i==404&&this.setState({hasMore:!1})})})},this.loadmore=r=>{this.props.getChats(this.props.id).then(i=>i).then(i=>{},i=>{i==404&&this.setState({hasMore:!1})})},this.state={drawer:!1,value:"",hasMore:!0,recorder:null,recordTime:0,record:!1,UploadFile:null,imageUrl:null,Images:[]},this.scrollRef=C.createRef(),this.inputRef=C.createRef()}componentDidUpdate(s,r,i){var p,m;((p=this.props)==null?void 0:p.Chat.chatUsers[this.props.params.id].messages.length)!==((m=this.prevProps)==null?void 0:m.Chat.chatUsers[this.props.params.id].messages.length)&&this.scrollRef.current.scrollTo(100,this.scrollRef.current.scrollHeight)}render(){var s,r;return e.jsx(Z,{children:e.jsxs(A,{title:" An easy-to-use tool to build and manage your client’s fitness programs",children:[e.jsxs(M,{children:[" ",e.jsx(U,{noColor:!0,children:e.jsx(_,{px:2,py:2,children:e.jsxs(t,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{display:"flex",alignItems:"center",children:[" ",e.jsx(h,{onClick:()=>this.props.navigate(-1),children:e.jsx(l,{icon:"ic:round-keyboard-arrow-left",style:{border:"1.5px solid #6D7B8F",borderRadius:"24px"},width:20,height:20,color:"text.secondary"})}),e.jsx(R,{src:(s=this.props.Chat.chatUsers)==null?void 0:s[this.props.params.id].details.profilePic}),e.jsxs(v,{sx:{ml:1},children:[e.jsx(x,{variant:"subtitle1",color:"text.primary",children:(r=this.props.Chat.chatUsers)==null?void 0:r[this.props.params.id].details.name}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{lineHeight:1},children:"... is typing"})]})]}),e.jsx(h,{children:e.jsx(l,{icon:"mdi-light:dots-vertical",width:"24px",height:"24px",color:"text.secondary"})})]})})}),e.jsx(W,{children:e.jsx(V,{})})]})," "]})})}}const te=o=>({Chat:o.Chat,Profile:o.Profile}),we=D(te,{fetchUser:I,getChats:H})(X(ee));export{we as default};
