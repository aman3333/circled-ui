import{R as u,aB as l,r as q,j as s,B as b,a4 as Se,p as Q,e as Ee,a as be,s as ee,S as je,I as Pe,T as A,C as ke,h as we,i as Ae,f as Re}from"./index-tWVfh1a_.js";import{P as Oe}from"./Page-D7TsOLpr.js";import{S as Le}from"./Header-C-6_pkkN.js";import{g as Ne,R as Me,A as Ie}from"./payments-D1Goe-hw.js";import{A as Be}from"./ArrowLeft-lA8HnlgG.js";import{d as Te}from"./ExpandMore-BWzhjxbJ.js";import"./createSvgIcon-UmMwsC2Z.js";import"./isMuiElement-CENM59Ut.js";import"./useControlled-DiwPEJyR.js";function H(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function K(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H(Object(t),!0).forEach(function(n){te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function W(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(e){return typeof e}:W=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(r)}function te(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function re(r,e){return We(r)||Ue(r,e)||_e(r,e)||Fe()}function We(r){if(Array.isArray(r))return r}function Ue(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var n=[],o=!0,i=!1,c,f;try{for(t=t.call(r);!(o=(c=t.next()).done)&&(n.push(c.value),!(e&&n.length===e));o=!0);}catch(a){i=!0,f=a}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw f}}return n}}function _e(r,e){if(r){if(typeof r=="string")return G(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(r,e)}}function G(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=function(e,t,n){var o=!!n,i=u.useRef(n);u.useEffect(function(){i.current=n},[n]),u.useEffect(function(){if(!o||!e)return function(){};var c=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,c),function(){e.off(t,c)}},[o,t,e,i])},D=function(e){var t=u.useRef(e);return u.useEffect(function(){t.current=e},[e]),t.current},k=function(e){return e!==null&&W(e)==="object"},qe=function(e){return k(e)&&typeof e.then=="function"},De=function(e){return k(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},J="[object Object]",$e=function r(e,t){if(!k(e)||!k(t))return e===t;var n=Array.isArray(e),o=Array.isArray(t);if(n!==o)return!1;var i=Object.prototype.toString.call(e)===J,c=Object.prototype.toString.call(t)===J;if(i!==c)return!1;if(!i&&!n)return e===t;var f=Object.keys(e),a=Object.keys(t);if(f.length!==a.length)return!1;for(var m={},v=0;v<f.length;v+=1)m[f[v]]=!0;for(var x=0;x<a.length;x+=1)m[a[x]]=!0;var h=Object.keys(m);if(h.length!==f.length)return!1;var P=e,j=t,E=function(L){return r(P[L],j[L])};return h.every(E)},ne=function(e,t,n){return k(e)?Object.keys(e).reduce(function(o,i){var c=!k(t)||!$e(e[i],t[i]);return n.includes(i)?(c&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),o):c?K(K({},o||{}),{},te({},i,e[i])):o},null):null},oe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",V=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe;if(e===null||De(e))return e;throw new Error(t)},ze=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oe;if(qe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return V(o,t)})};var n=V(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},Ye=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},U=u.createContext(null);U.displayName="ElementsContext";var ae=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},ie=function(e){var t=e.stripe,n=e.options,o=e.children,i=u.useMemo(function(){return ze(t)},[t]),c=u.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),f=re(c,2),a=f[0],m=f[1];u.useEffect(function(){var h=!0,P=function(E){m(function(w){return w.stripe?w:{stripe:E,elements:E.elements(n)}})};return i.tag==="async"&&!a.stripe?i.stripePromise.then(function(j){j&&h&&P(j)}):i.tag==="sync"&&!a.stripe&&P(i.stripe),function(){h=!1}},[i,a,n]);var v=D(t);u.useEffect(function(){v!==null&&v!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,t]);var x=D(n);return u.useEffect(function(){if(a.elements){var h=ne(n,x,["clientSecret","fonts"]);h&&a.elements.update(h)}},[n,x,a.elements]),u.useEffect(function(){Ye(a.stripe)},[a.stripe]),u.createElement(U.Provider,{value:a},o)};ie.propTypes={stripe:l.any,options:l.object};var He=function(e){var t=u.useContext(U);return ae(t,e)},Ke=function(){var e=He("calls useElements()"),t=e.elements;return t};l.func.isRequired;var se=u.createContext(null);se.displayName="CustomCheckoutSdkContext";var Ge=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},Je=u.createContext(null);Je.displayName="CustomCheckoutContext";l.any,l.shape({clientSecret:l.string.isRequired,elementsOptions:l.object}).isRequired;var $=function(e){var t=u.useContext(se),n=u.useContext(U);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return t?Ge(t,e):ae(n,e)},Ve=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},d=function(e,t){var n="".concat(Ve(e),"Element"),o=function(a){var m=a.id,v=a.className,x=a.options,h=x===void 0?{}:x,P=a.onBlur,j=a.onFocus,E=a.onReady,w=a.onChange,L=a.onEscape,de=a.onClick,pe=a.onLoadError,fe=a.onLoaderStart,me=a.onNetworksChange,he=a.onConfirm,ve=a.onCancel,ye=a.onShippingAddressChange,ge=a.onShippingRateChange,N=$("mounts <".concat(n,">")),M="elements"in N?N.elements:null,I="customCheckoutSdk"in N?N.customCheckoutSdk:null,xe=u.useState(null),z=re(xe,2),y=z[0],Ce=z[1],S=u.useRef(null),_=u.useRef(null);g(y,"blur",P),g(y,"focus",j),g(y,"escape",L),g(y,"click",de),g(y,"loaderror",pe),g(y,"loaderstart",fe),g(y,"networkschange",me),g(y,"confirm",he),g(y,"cancel",ve),g(y,"shippingaddresschange",ye),g(y,"shippingratechange",ge),g(y,"change",w);var F;E&&(e==="expressCheckout"?F=E:F=function(){E(y)}),g(y,"ready",F),u.useLayoutEffect(function(){if(S.current===null&&_.current!==null&&(M||I)){var C=null;I?C=I.createElement(e,h):M&&(C=M.create(e,h)),S.current=C,Ce(C),C&&C.mount(_.current)}},[M,I,h]);var Y=D(h);return u.useEffect(function(){if(S.current){var C=ne(h,Y,["paymentRequest"]);C&&"update"in S.current&&S.current.update(C)}},[h,Y]),u.useLayoutEffect(function(){return function(){if(S.current&&typeof S.current.destroy=="function")try{S.current.destroy(),S.current=null}catch{}}},[]),u.createElement("div",{id:m,className:v,ref:_})},i=function(a){$("mounts <".concat(n,">"));var m=a.id,v=a.className;return u.createElement("div",{id:m,className:v})},c=t?i:o;return c.propTypes={id:l.string,className:l.string,onChange:l.func,onBlur:l.func,onFocus:l.func,onReady:l.func,onEscape:l.func,onClick:l.func,onLoadError:l.func,onLoaderStart:l.func,onNetworksChange:l.func,onConfirm:l.func,onCancel:l.func,onShippingAddressChange:l.func,onShippingRateChange:l.func,options:l.object},c.displayName=n,c.__elementType=e,c},p=typeof window>"u",Xe=u.createContext(null);Xe.displayName="EmbeddedCheckoutProviderContext";var Ze=function(){var e=$("calls useStripe()"),t=e.stripe;return t};d("auBankAccount",p);var X=d("card",p);d("cardNumber",p);d("cardExpiry",p);d("cardCvc",p);d("fpxBank",p);d("iban",p);d("idealBank",p);d("p24Bank",p);d("epsBank",p);d("payment",p);d("expressCheckout",p);d("currencySelector",p);d("paymentRequestButton",p);d("linkAuthentication",p);d("address",p);d("shippingAddress",p);d("paymentMethodMessaging",p);d("affirmMessage",p);d("afterpayClearpayMessage",p);var ue="https://js.stripe.com/v3",Qe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var et=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ue,'"]')),t=0;t<e.length;t++){var n=e[t];if(Qe.test(n.src))return n}return null},Z=function(e){var t="",n=document.createElement("script");n.src="".concat(ue).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},tt=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})},R=null,B=null,T=null,rt=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},nt=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},ot=function(e){return R!==null?R:(R=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=et();if(!(o&&e)){if(!o)o=Z(e);else if(o&&T!==null&&B!==null){var i;o.removeEventListener("load",T),o.removeEventListener("error",B),(i=o.parentNode)===null||i===void 0||i.removeChild(o),o=Z(e)}}T=nt(t,n),B=rt(n),o.addEventListener("load",T),o.addEventListener("error",B)}catch(c){n(c);return}}),R.catch(function(t){return R=null,Promise.reject(t)}))},at=function(e,t,n){if(e===null)return null;var o=e.apply(void 0,t);return tt(o,n),o},O,ce=!1,le=function(){return O||(O=ot(null).catch(function(e){return O=null,Promise.reject(e)}),O)};Promise.resolve().then(function(){return le()}).catch(function(r){ce||console.warn(r)});var it=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ce=!0;var o=Date.now();return le().then(function(i){return at(i,t,o)})};const st=({fixedHeight:r,expandedHeight:e,children:t,...n})=>{const[o,i]=q.useState(!1),c=()=>{i(!o)};return s.jsxs(b,{overflow:"hidden",transition:"height 1s",...n,children:[s.jsx(Se,{in:o,collapsedSize:r,children:t}),s.jsxs("center",{children:[" ",s.jsx(Q,{onClick:c,endIcon:s.jsx(Te,{}),size:"small",variant:"text",sx:{fontSize:16,color:"text.primary",mt:2},children:o?"Show Less":"Show More"})]})]})},ut=it("pk_test_51NzgiTKrByvmoNXF7ielQro4TnkxK4F4Zg46fEJWG9OBQinrGODHhnvdcA2R9efEpWHcL4t72MsYcYxp96LEZJYh00ZhfF0Foj"),ct=ee("div")(()=>({backgroundColor:"#fff",height:"100%"})),lt=ee(b)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff"})),dt=()=>{var f;const r=Ee(),[e,t]=q.useState(null);be();const n=Ze(),o=Ke();q.useEffect(()=>{Ne().then(a=>t(a))},[]);const i=async a=>{a.preventDefault();try{const{paymentMethod:m,error:v}=await n.createPaymentMethod({type:"card",card:o.getElement(X)});if(v){console.error("Error creating payment method:",v);return}Ie(m.id).then(x=>{e.paymentMethods=x,t(e)})}catch(m){console.error("Error adding payment method:",m)}},c=a=>{Me(a).then(m=>{e.paymentMethods=m,t(e)}).catch(m=>{})};return s.jsx(ct,{children:s.jsxs(Oe,{title:"Notifications",children:[s.jsxs(je,{children:[" ",s.jsx(Le,{style:{boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px",overflow:"hidden"},children:s.jsxs(lt,{px:2,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[s.jsxs(b,{display:"flex",alignItems:"center",children:[" ",s.jsx(Pe,{onClick:()=>r(-1),sx:{color:"text.primary"},children:s.jsx(Be,{})}),s.jsx(A,{variant:"h6",color:"text.primary",children:"Payment"})," "]})," "]})})," ",s.jsx(ke,{style:{backgroundColor:"#F5F7FA",paddingLeft:0,paddingRight:0},children:s.jsxs(st,{mt:2,backgroundColor:"#fff",p:2,fixedHeight:300,children:[s.jsx(A,{variant:"subtitle1",sx:{mb:1},children:"Payment Methods"}),s.jsx(A,{color:"text.secondary",children:"Select your main payment method for all regular payments."}),s.jsxs(b,{my:2,children:[e&&s.jsx("div",{children:s.jsx(we,{spacing:2,children:(f=e==null?void 0:e.paymentMethods)==null?void 0:f.map(a=>s.jsxs(b,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[s.jsxs(b,{display:"flex",alignItems:"center",children:[s.jsx(Ae,{icon:"logos:"+a.card.brand,sx:{width:24}}),"   "," ",a.card.brand," ","ending in  ",a.card.last4]}),s.jsx(b,{display:"flex",children:s.jsx(Re,{sx:{color:"error.main"},onClick:()=>c(a.id),children:"Remove"})})]}))})}),s.jsx(A,{variant:"subtitle1",sx:{mt:3,mb:2},children:"Add new Methods"}),s.jsxs("form",{onSubmit:i,children:[s.jsx(A,{children:s.jsx(b,{sx:{border:"1px solid grey"},p:2,borderRadius:1,children:s.jsx(X,{options:{style:{base:{fontWeight:"500",fontFamily:"inherit",fontSize:"18px",fontSmoothing:"antialiased"}},hidePostalCode:!0}})})}),s.jsx("center",{children:s.jsx(Q,{size:"small",variant:"outlined",type:"submit",fullWidth:!0,sx:{mt:2},children:"Add Card"})})]})]})]})})]})," "]})})},St=()=>s.jsx(ie,{stripe:ut,children:s.jsx(dt,{})});export{St as default};
