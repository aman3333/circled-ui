import{r as s,a as D,d as c,U as S,e as y,j as e,S as b,s as w,B as r,I as P,T as a,C as v,p as C}from"./index-tWVfh1a_.js";import{S as T}from"./Header-C-6_pkkN.js";import{A as I}from"./ArrowLeft-lA8HnlgG.js";import{c as E,b as p}from"./array-DbNmRnh0.js";import{u as F,F as k,a as B}from"./formik.esm-jmAInz8L.js";import{I as R}from"./Icon_DietPlan-E-4juh60.js";import{S as z}from"./dietEditor-BRHGqV7A.js";import"./isObject-MojUmidT.js";import"./index.es-nfKkgyUc.js";import"./LightBoxContainer-BsEAh_HD.js";import"./index.es-C24u0DtE.js";import"./warning-C20GYw-A.js";import"./uploader-C1vfyOx8.js";const A=w(r)(()=>({width:"100%",zIndex:100,borderRadius:"0px 0px 8px 8px"})),ae=s.forwardRef((N,L)=>{const d=D(),{state:V}=c(),[t,m,O]=S(),{search:x}=c(),[u,h]=s.useState(!!(t.DietPlan.Title||t.DietPlan.Description));new URLSearchParams(x);const f=y(),g=E().shape({Title:p().max(50,"Title too long"),Description:p().required()}),n=F({initialValues:{Title:t.DietPlan.Title||"",Description:t.DietPlan.Description||""},validationSchema:g,onSubmit:async(i,{setErrors:J,setSubmitting:K})=>{d(m({DietPlan:{Title:i.Title,Description:i.Description}}))}}),{errors:U,touched:$,handleSubmit:l,validateForm:q,isSubmitting:G,getFieldProps:H,setFieldValue:j,values:o}=n;return s.useEffect(()=>()=>{l()},[]),e.jsxs(b,{children:[e.jsx(T,{noColor:!0,boxShadow:!0,children:e.jsx(A,{px:2,py:2,children:e.jsxs(r,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(r,{display:"flex",alignItems:"center",children:[" ",e.jsx(P,{onClick:()=>f(-1),sx:{color:"text.primary"},children:e.jsx(I,{})}),e.jsx(a,{variant:"body1",color:"text.primary",children:e.jsx(a,{component:"span",variant:"subtitle1",color:"text.primary",children:"Edit meal plan"})})]})," "]})})}),u?e.jsxs(v,{flex:!0,withoutPadding:!0,style:{paddingTop:24,paddingBottom:24,background:"#fff"},children:[e.jsx(k,{value:n,children:e.jsx(B,{autoComplete:"off",noValidate:!0,onSubmit:l,style:{height:"100%"},children:e.jsx(z,{onChange:i=>j("Description",i),value:o.Description&&o.Description[0]=="["?JSON.parse(o.Description):[{type:"paragraph",children:[{text:""}]}]})})})," "]}):e.jsxs(r,{flexGrow:1,pb:16,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(R,{sx:{mb:0,fontSize:48}}),e.jsx(a,{color:"text.secondary",align:"center",sx:{mt:1},children:"Adding meal plan is optional."}),e.jsx(C,{size:"large",sx:{fontSize:16},onClick:()=>h(!0),children:"Add now"})]})]})});export{ae as default};
