import{e as k,r as x,j as e,h as R,B as t,f as W,T as i,s as a,a as N,b as $,d as V,U as G,S as F,C as B,am as Y,p as j,I as U,an as H}from"./index-tWVfh1a_.js";import{P as J}from"./Page-D7TsOLpr.js";import{S as K}from"./Header-C-6_pkkN.js";import{u as b}from"./Onboarding-CSV0hQFI.js";import{S as Q}from"./Footer-BU_S36Uf.js";import{c as z,b as m,a as E,d as q}from"./array-DbNmRnh0.js";import{u as D,b as X,F as Z,a as _}from"./formik.esm-jmAInz8L.js";import{L as ee}from"./LabeledInput-B3Qf7l4R.js";import{S as te}from"./sendProgramEmails-BD0dy4IK.js";import{W as ie}from"./ProgramDescriptionModal-Dkibb7pp.js";import{A as re}from"./ArrowLeft-lA8HnlgG.js";import{G as S}from"./Grid-C2UtAwNz.js";import{C as se}from"./Chip-CoRnaPyB.js";import{C as ae}from"./Checkbox-5Xdp7ogM.js";import"./isObject-MojUmidT.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./InputAdornment-DiI_gVyu.js";import"./SwitchBase-Bs2jeD_h.js";a("div")(()=>({height:"100%"}));a(t)(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:100}));a(t)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));function ne(r){var c,h;k();const P=z().shape({email:q().of(m().email("Enter a valid email").required("Email is required")),price:E().required("Price is required").min(0,"Price can't be negative"),PaymentType:m().required("Payment type is required"),message:m().max(500,"Message too long")}),[g,o]=x.useState(null);D({initialValues:{email:[""],price:(c=r.Program)==null?void 0:c.Price,PaymentType:(h=r.Program)==null?void 0:h.PaymentType,message:""},validationSchema:P,onSubmit:async(u,{setErrors:M,setSubmitting:O})=>{}});const{errors:l,touched:d,handleSubmit:p,handleChange:n,handleBlur:C,isSubmitting:L,getFieldProps:f,setFieldValue:v,values:w}=X();return e.jsxs(R,{spacing:2,sx:{width:"100%"},children:[r!=null&&r.email?"":e.jsxs(t,{marginTop:2,children:[e.jsx(W,{children:e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,display:"flex"},children:"Send to  "})}),e.jsx(te,{allRecievers:w.email,setAllRecievers:u=>v("email",u),errors:l.email,errorObj:{},modal:!0,setErrorObj:()=>console.log("")})]}),e.jsx(ie,{headerTitle:"Create Program",headerSubTitle:"Message",fullWidth:!0,clabel:"Message (optional)",...f("message"),placeholder:"Write a message here",error:!!(d.message&&l.message),helperText:d.message&&l.message,multiline:!0,minRows:4,children:e.jsx(ee,{fullWidth:!0,clabel:e.jsxs(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,display:"flex"},children:["Message  ",e.jsx(i,{color:"text.secondary",children:"optional"})]}),...f("message"),placeholder:"Write a message here",error:!!(d.message&&l.message),helperText:d.message&&l.message,multiline:!0,minRows:8,maxRows:8})})]})}const oe=a("div")(()=>({backgroundColor:"#fff",height:"100%"})),le=a(t)(()=>({width:"100%",borderTop:"2px solid #ECEEEF",borderRadius:"24px 24px 0px 0px"}));a(t)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));a(W)(({theme:r})=>({height:45,borderRadius:16,background:"#F9FCFD",fontFamily:"Proxima Nova",color:"#172A44",fontSize:18,fontWeight:"bold",width:"100%",marginBottom:8,border:"2px solid rgba(23, 42, 68, 0.5)"}));const de=a(t)(()=>({width:"100%",zIndex:100,backgroundColor:"#fff",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",borderRadius:"0px 0px 8px 8px"}));a(t)(({theme:r})=>({display:"flex",width:"100%",justifyContent:"center"}));a(t)(({theme:r})=>({width:"100%",borderRadius:24,backgroundColor:"rgba(255,255,255, 0.5)",backdropFilter:"blur(12px)",display:"flex",padding:"12px",justifyContent:"center",alignItems:"center"}));function Le(){const r=N(),{id:P}=$(),{search:g,state:o}=V();console.log(g),new URLSearchParams(g);const[l,d]=x.useState(!1),p=k(),[n,C,L,f]=G(),[v,w]=x.useState("About"),[c,h]=x.useState(!1),u=z().shape({email:q().of(m().email("Enter a valid email").required("Email is required")),price:E().required("Price is required").min(0,"Price can't be negative"),message:m().max(100,"Message too long"),PaymentType:m().required("Payment type is required")}),[M,O]=x.useState(null),T=D({initialValues:{email:[(o==null?void 0:o.email)||""],price:n.Price,PaymentType:n.PaymentType,message:""},validationSchema:u,onSubmit:async(s,{setErrors:ce,setSubmitting:me})=>{r(b({loading:!0})),r(H({...n,SendTo:s.email.map(y=>y.toLowerCase()),Price:s.PaymentType=="Free"?0:s.price,PaymentType:s.PaymentType,GreetingMessage:s.message})).then(y=>{r(b({loading:!1})),h(!0)}).catch(y=>{r(b({loading:!1}))})}}),{handleSubmit:A,values:I}=T;return e.jsx(oe,{children:e.jsx(J,{title:" Simplified Online Fitness Training ",children:e.jsx(Z,{value:T,children:e.jsx(_,{autoComplete:"off",noValidate:!0,onSubmit:A,children:c?e.jsx(F,{children:e.jsxs(B,{flex:!0,style:{justifyContent:"center",alignItems:"center"},children:[e.jsx("img",{src:Y,height:42}),e.jsxs(t,{my:4,px:4,width:"100%",children:[e.jsxs(t,{width:"100%",borderRadius:1,overflow:"hidden",style:{border:"1px solid #C3CBD9"},children:[e.jsx("img",{src:n.BannerImage||"/images/instructor/programOverview.jpg",height:150,width:"100%",style:{objectFit:"cover"}}),e.jsxs(t,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",py:2,pt:3,children:[e.jsx(i,{fontSize:"18px",color:"text.secondary",children:"You have sent"}),e.jsx(i,{fontSize:"16px",fontWeight:"600",children:n.Title})]}),e.jsxs(t,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",py:2,children:[e.jsx(i,{fontSize:"16px",color:"text.secondary",children:"To"}),I.email.map(s=>e.jsx(i,{fontSize:"16px",children:s})),e.jsx(i,{fontSize:"14px",color:"text.secondary",align:"center",sx:{mt:4,px:4},children:"You'll be notified by email when the client accepts the program."})]})]}),e.jsx("center",{children:e.jsx(j,{variant:"contained",sx:{mt:4,px:6},onClick:()=>p(-1),children:"Done"})})]})]})}):e.jsxs(F,{children:[" ",e.jsx(K,{noColor:!0,children:e.jsx(de,{px:2,py:2,children:e.jsxs(t,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{display:"flex",alignItems:"center",children:[" ",e.jsx(U,{onClick:()=>p(-1),sx:{color:"text.primary"},children:e.jsx(re,{})}),e.jsx(i,{variant:"body1",color:"text.primary",children:e.jsx(i,{component:"span",variant:"subtitle1",color:"text.primary",children:"Send program"})})]})," "]})})})," ",e.jsxs(B,{style:{marginTop:-8,paddingBottom:24,overflowY:"auto"},withoutPadding:!0,children:[e.jsx(t,{position:"relative",p:2,pb:0,pt:4,children:e.jsxs(S,{container:!0,spacing:2,children:[e.jsxs(S,{item:!0,xs:5,children:[" ",e.jsx("img",{src:n.BannerImage||"/images/profile-banner.png",style:{width:"100%",height:"90px",objectFit:"cover",borderRadius:8}})]}),e.jsx(S,{item:!0,xs:7,children:e.jsx(t,{display:"flex",height:"100%",alignItems:"center",children:e.jsx(i,{variant:"body1",color:"text.primary",fontWeight:600,gutterBottom:!0,sx:{textTransform:"capitalize",fontSize:18},children:n.Title})})})]})}),e.jsxs(t,{px:2,mt:2,children:[e.jsx(R,{mb:2}),c?e.jsxs(e.Fragment,{children:[e.jsx(i,{gutterBottom:!0,align:"center",variant:"h4",color:"text.primary",children:"Program sent successfully"}),e.jsx(i,{align:"center",variant:"h4",children:"To"}),e.jsx(t,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",mt:2,children:I.email.map(s=>e.jsx(se,{label:s,variant:"outlined",color:"primary",sx:{fontSize:16,fontWeight:500,mb:1,py:2,borderRadius:1,borderWidth:2}}))})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{display:"flex",justifyContent:"space-between",alignItem:"center"}),e.jsx(ne,{Program:n,email:o==null?void 0:o.email,updateProgram:C})]})]})]}),e.jsx(Q,{children:e.jsxs(le,{children:[e.jsx(t,{px:2,pt:2,children:e.jsxs(i,{variant:"body2",display:"flex",alignItems:"center",children:[e.jsx(t,{component:"span",mr:.5,children:e.jsx(ae,{size:"small",onChange:s=>d(s.target.checked)})}),"I confirm all of the information above is correct."]})}),e.jsx(t,{display:"flex",justifyContent:"flex-end",width:"100%",px:3,py:2,pt:1,children:c?e.jsx(j,{onClick:()=>p("/",{replace:!0}),variant:"contained",sx:{minWidth:160},children:"Done"}):e.jsx(j,{fullWidth:!0,type:"Submit",variant:"contained",disabled:!l,sx:{borderRadius:2,display:"flex",minWidth:132},children:"Send program"})})]})})]})})})})})}export{Le as default};
