import{bD as Rr,bE as Gr,bF as Zr,bG as mu,w as Mr,bC as Eu,r as R,R as z}from"./index-tWVfh1a_.js";import{b as pu,i as Fu,a as Ir}from"./isObject-MojUmidT.js";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Xr(e){return Object.prototype.toString.call(e)==="[object Object]"}function De(e){var r,t;return Xr(e)===!1?!1:(r=e.constructor,r===void 0?!0:(t=r.prototype,!(Xr(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}function me(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ir=new WeakMap,lr=new WeakMap,Ue=new WeakMap,Jr=new WeakMap,Qr=new WeakMap,et=new WeakMap,rt=new WeakMap;function tt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Au=0,Bs=()=>{var e={children:[],operations:[],selection:null,marks:null,id:Au++,isInline:()=>!1,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:r=>{for(var t of i.pathRefs(e))Qu.transform(t,r);for(var u of i.pointRefs(e))ea.transform(u,r);for(var a of i.rangeRefs(e))ua.transform(a,r);var n=ir.get(e)||[],l=lr.get(e)||new Set,o,f,c=h=>{if(h){var m=h.join(",");f.has(m)||(f.add(m),o.push(h))}};if(v.operationCanTransformPath(r)){o=[],f=new Set;for(var d of n){var g=v.transform(d,r);c(g)}}else o=n,f=l;var D=e.getDirtyPaths(r);for(var s of D)c(s);ir.set(e,o),lr.set(e,f),w.transform(e,r),e.operations.push(r),i.normalize(e),r.type==="set_selection"&&(e.marks=null),Ue.get(e)||(Ue.set(e,!0),Promise.resolve().then(()=>{Ue.set(e,!1),e.onChange(),e.operations=[]}))},addMark:(r,t)=>{var{selection:u,markableVoid:a}=e;if(u){var n=(D,s)=>{if(!j.isText(D))return!1;var[h,m]=i.parent(e,s);return!e.isVoid(h)||e.markableVoid(h)},l=B.isExpanded(u),o=!1;if(!l){var[f,c]=i.node(e,u);if(f&&n(f,c)){var[d]=i.parent(e,c);o=d&&e.markableVoid(d)}}if(l||o)w.setNodes(e,{[r]:t},{match:n,split:!0,voids:!0});else{var g=Je(Je({},i.marks(e)||{}),{},{[r]:t});e.marks=g,Ue.get(e)||e.onChange()}}},deleteBackward:r=>{var{selection:t}=e;t&&B.isCollapsed(t)&&w.delete(e,{unit:r,reverse:!0})},deleteForward:r=>{var{selection:t}=e;t&&B.isCollapsed(t)&&w.delete(e,{unit:r})},deleteFragment:r=>{var{selection:t}=e;t&&B.isExpanded(t)&&w.delete(e,{reverse:r==="backward"})},getFragment:()=>{var{selection:r}=e;return r?O.fragment(e,r):[]},insertBreak:()=>{w.splitNodes(e,{always:!0})},insertSoftBreak:()=>{w.splitNodes(e,{always:!0})},insertFragment:r=>{w.insertFragment(e,r)},insertNode:r=>{w.insertNodes(e,r)},insertText:r=>{var{selection:t,marks:u}=e;if(t){if(u){var a=Je({text:r},u);w.insertNodes(e,a)}else w.insertText(e,r);e.marks=null}},normalizeNode:r=>{var[t,u]=r;if(!j.isText(t)){if(re.isElement(t)&&t.children.length===0){var a={text:""};w.insertNodes(e,a,{at:u.concat(0),voids:!0});return}for(var n=i.isEditor(t)?!1:re.isElement(t)&&(e.isInline(t)||t.children.length===0||j.isText(t.children[0])||e.isInline(t.children[0])),l=0,o=0;o<t.children.length;o++,l++){var f=O.get(e,u);if(!j.isText(f)){var c=t.children[o],d=f.children[l-1],g=o===t.children.length-1,D=j.isText(c)||re.isElement(c)&&e.isInline(c);if(D!==n)w.removeNodes(e,{at:u.concat(l),voids:!0}),l--;else if(re.isElement(c)){if(e.isInline(c)){if(d==null||!j.isText(d)){var s={text:""};w.insertNodes(e,s,{at:u.concat(l),voids:!0}),l++}else if(g){var h={text:""};w.insertNodes(e,h,{at:u.concat(l+1),voids:!0}),l++}}}else d!=null&&j.isText(d)&&(j.equals(c,d,{loose:!0})?(w.mergeNodes(e,{at:u.concat(l),voids:!0}),l--):d.text===""?(w.removeNodes(e,{at:u.concat(l-1),voids:!0}),l--):c.text===""&&(w.removeNodes(e,{at:u.concat(l),voids:!0}),l--))}}}},removeMark:r=>{var{selection:t}=e;if(t){var u=(d,g)=>{if(!j.isText(d))return!1;var[D,s]=i.parent(e,g);return!e.isVoid(D)||e.markableVoid(D)},a=B.isExpanded(t),n=!1;if(!a){var[l,o]=i.node(e,t);if(l&&u(l,o)){var[f]=i.parent(e,o);n=f&&e.markableVoid(f)}}if(a||n)w.unsetNodes(e,r,{match:u,split:!0,voids:!0});else{var c=Je({},i.marks(e)||{});delete c[r],e.marks=c,Ue.get(e)||e.onChange()}}},getDirtyPaths:r=>{switch(r.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=r;return v.levels(t)}case"insert_node":{var{node:u,path:a}=r,n=v.levels(a),l=j.isText(u)?[]:Array.from(O.nodes(u),K=>{var[,Q]=K;return a.concat(Q)});return[...n,...l]}case"merge_node":{var{path:o}=r,f=v.ancestors(o),c=v.previous(o);return[...f,c]}case"move_node":{var{path:d,newPath:g}=r;if(v.equals(d,g))return[];var D=[],s=[];for(var h of v.ancestors(d)){var m=v.transform(h,r);D.push(m)}for(var E of v.ancestors(g)){var b=v.transform(E,r);s.push(b)}var x=s[s.length-1],T=g[g.length-1],L=x.concat(T);return[...D,...s,L]}case"remove_node":{var{path:I}=r,y=v.ancestors(I);return[...y]}case"split_node":{var{path:_}=r,k=v.levels(_),q=v.next(_);return[...k,q]}default:return[]}}};return e};function wu(e,r){if(e==null)return{};var t={},u=Object.keys(e),a,n;for(n=0;n<u.length;n++)a=u[n],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Fe(e,r){if(e==null)return{};var t=wu(e,r),u,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)u=n[a],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(t[u]=e[u])}return t}var Nr=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=!t,a=t?Pu(r):r,n=H.None,l=H.None,o=0,f=null,c=null;for(var d of a){var g=d.codePointAt(0);if(!g)break;var D=Vu(d,g);if([n,l]=u?[l,D]:[D,n],Ve(n,H.ZWJ)&&Ve(l,H.ExtPict)&&(u?f=ut(r.substring(0,o)):f=ut(r.substring(0,r.length-o)),!f)||Ve(n,H.RI)&&Ve(l,H.RI)&&(c!==null?c=!c:u?c=!0:c=Uu(r.substring(0,r.length-o)),!c)||n!==H.None&&l!==H.None&&Hu(n,l))break;o+=d.length}return o||1},bu=/\s/,Ou=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,yu=/['\u2018\u2019]/,xu=function(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=0,a=!1;r.length>0;){var n=Nr(r,t),[l,o]=jr(r,n,t);if(ku(l,o,t))a=!0,u+=n;else if(!a)u+=n;else break;r=o}return u},jr=(e,r,t)=>{if(t){var u=e.length-r;return[e.slice(u,e.length),e.slice(0,u)]}return[e.slice(0,r),e.slice(r)]},ku=function e(r,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(bu.test(r))return!1;if(yu.test(r)){var a=Nr(t,u),[n,l]=jr(t,a,u);if(e(n,l,u))return!0}return!Ou.test(r)},Pu=function*(r){for(var t=r.length-1,u=0;u<r.length;u++){var a=r.charAt(t-u);if(Tu(a.charCodeAt(0))){var n=r.charAt(t-u-1);if(Su(n.charCodeAt(0))){yield n+a,u++;continue}}yield a}},Su=e=>e>=55296&&e<=56319,Tu=e=>e>=56320&&e<=57343,H;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(H||(H={}));var Ru=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Mu=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Iu=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Nu=/^[\u1100-\u115F\uA960-\uA97C]$/,ju=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Lu=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Wu=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,_u=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,qu=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Vu=(e,r)=>{var t=H.Any;return e.search(Ru)!==-1&&(t|=H.Extend),r===8205&&(t|=H.ZWJ),r>=127462&&r<=127487&&(t|=H.RI),e.search(Mu)!==-1&&(t|=H.Prepend),e.search(Iu)!==-1&&(t|=H.SpacingMark),e.search(Nu)!==-1&&(t|=H.L),e.search(ju)!==-1&&(t|=H.V),e.search(Lu)!==-1&&(t|=H.T),e.search(Wu)!==-1&&(t|=H.LV),e.search(_u)!==-1&&(t|=H.LVT),e.search(qu)!==-1&&(t|=H.ExtPict),t};function Ve(e,r){return(e&r)!==0}var $u=[[H.L,H.L|H.V|H.LV|H.LVT],[H.LV|H.V,H.V|H.T],[H.LVT|H.T,H.T],[H.Any,H.Extend|H.ZWJ],[H.Any,H.SpacingMark],[H.Prepend,H.Any],[H.ZWJ,H.ExtPict],[H.RI,H.RI]];function Hu(e,r){return $u.findIndex(t=>Ve(e,t[0])&&Ve(r,t[1]))===-1}var zu=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,ut=e=>e.search(zu)!==-1,Ku=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Uu=e=>{var r=e.match(Ku);if(r===null)return!1;var t=r[0].length/2;return t%2===1},at=e=>De(e)&&O.isNodeList(e.children)&&!i.isEditor(e),re={isAncestor(e){return De(e)&&O.isNodeList(e.children)},isElement:at,isElementList(e){return Array.isArray(e)&&e.every(r=>re.isElement(r))},isElementProps(e){return e.children!==void 0},isElementType:function(r,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return at(r)&&r[u]===t},matches(e,r){for(var t in r)if(t!=="children"&&e[t]!==r[t])return!1;return!0}},Yu=["text"],Gu=["text"];function nt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function _e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?nt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var st=new WeakMap,i={above(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:t=!1,mode:u="lowest",at:a=e.selection,match:n}=r;if(a){var l=i.path(e,a),o=u==="lowest";for(var[f,c]of i.levels(e,{at:l,voids:t,match:n,reverse:o}))if(!j.isText(f)){if(B.isRange(a)){if(v.isAncestor(c,a.anchor.path)&&v.isAncestor(c,a.focus.path))return[f,c]}else if(!v.equals(l,c))return[f,c]}}},addMark(e,r,t){e.addMark(r,t)},after(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=i.point(e,r,{edge:"end"}),a=i.end(e,[]),n={anchor:u,focus:a},{distance:l=1}=t,o=0,f;for(var c of i.positions(e,_e(_e({},t),{},{at:n}))){if(o>l)break;o!==0&&(f=c),o++}return f},before(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=i.start(e,[]),a=i.point(e,r,{edge:"start"}),n={anchor:u,focus:a},{distance:l=1}=t,o=0,f;for(var c of i.positions(e,_e(_e({},t),{},{at:n,reverse:!0}))){if(o>l)break;o!==0&&(f=c),o++}return f},deleteBackward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteBackward(t)},deleteForward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteForward(t)},deleteFragment(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{direction:t="forward"}=r;e.deleteFragment(t)},edges(e,r){return[i.start(e,r),i.end(e,r)]},end(e,r){return i.point(e,r,{edge:"end"})},first(e,r){var t=i.path(e,r,{edge:"start"});return i.node(e,t)},fragment(e,r){var t=i.range(e,r),u=O.fragment(e,t);return u},hasBlocks(e,r){return r.children.some(t=>i.isBlock(e,t))},hasInlines(e,r){return r.children.some(t=>j.isText(t)||i.isInline(e,t))},hasTexts(e,r){return r.children.every(t=>j.isText(t))},insertBreak(e){e.insertBreak()},insertSoftBreak(e){e.insertSoftBreak()},insertFragment(e,r){e.insertFragment(r)},insertNode(e,r){e.insertNode(r)},insertText(e,r){e.insertText(r)},isBlock(e,r){return re.isElement(r)&&!e.isInline(r)},isEditor(e){var r=st.get(e);if(r!==void 0)return r;if(!De(e))return!1;var t=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteBackward=="function"&&typeof e.deleteForward=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isInline=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||De(e.marks))&&(e.selection===null||B.isRange(e.selection))&&O.isNodeList(e.children)&&Ge.isOperationList(e.operations);return st.set(e,t),t},isEnd(e,r,t){var u=i.end(e,t);return Y.equals(r,u)},isEdge(e,r,t){return i.isStart(e,r,t)||i.isEnd(e,r,t)},isEmpty(e,r){var{children:t}=r,[u]=t;return t.length===0||t.length===1&&j.isText(u)&&u.text===""&&!e.isVoid(r)},isInline(e,r){return re.isElement(r)&&e.isInline(r)},isNormalizing(e){var r=Jr.get(e);return r===void 0?!0:r},isStart(e,r,t){if(r.offset!==0)return!1;var u=i.start(e,t);return Y.equals(r,u)},isVoid(e,r){return re.isElement(r)&&e.isVoid(r)},last(e,r){var t=i.path(e,r,{edge:"end"});return i.node(e,t)},leaf(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=i.path(e,r,t),a=O.leaf(e,u);return[a,u]},*levels(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,reverse:u=!1,voids:a=!1}=r,{match:n}=r;if(n==null&&(n=()=>!0),!!t){var l=[],o=i.path(e,t);for(var[f,c]of O.levels(e,o))if(n(f,c)&&(l.push([f,c]),!a&&i.isVoid(e,f)))break;u&&l.reverse(),yield*l}},marks(e){var{marks:r,selection:t}=e;if(!t)return null;if(r)return r;if(B.isExpanded(t)){var[u]=i.nodes(e,{match:j.isText});if(u){var[a]=u,n=Fe(a,Yu);return n}else return{}}var{anchor:l}=t,{path:o}=l,[f]=i.leaf(e,o);if(l.offset===0){var c=i.previous(e,{at:o,match:j.isText}),d=i.above(e,{match:E=>i.isVoid(e,E)&&e.markableVoid(E)});if(!d){var g=i.above(e,{match:E=>i.isBlock(e,E)});if(c&&g){var[D,s]=c,[,h]=g;v.isAncestor(h,s)&&(f=D)}}}var m=Fe(f,Gu);return m},next(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:u=!1}=r,{match:a,at:n=e.selection}=r;if(n){var l=i.after(e,n,{voids:u});if(l){var[,o]=i.last(e,[]),f=[l.path,o];if(v.isPath(n)&&n.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(v.isPath(n)){var[c]=i.parent(e,n);a=g=>c.children.includes(g)}else a=()=>!0;var[d]=i.nodes(e,{at:f,match:a,mode:t,voids:u});return d}}},node(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=i.path(e,r,t),a=O.get(e,u);return[a,u]},*nodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,mode:u="all",universal:a=!1,reverse:n=!1,voids:l=!1}=r,{match:o}=r;if(o||(o=()=>!0),!!t){var f,c;if(Zu.isSpan(t))f=t[0],c=t[1];else{var d=i.path(e,t,{edge:"start"}),g=i.path(e,t,{edge:"end"});f=n?g:d,c=n?d:g}var D=O.nodes(e,{reverse:n,from:f,to:c,pass:T=>{var[L]=T;return l?!1:i.isVoid(e,L)}}),s=[],h;for(var[m,E]of D){var b=h&&v.compare(E,h[1])===0;if(!(u==="highest"&&b)){if(!o(m,E)){if(a&&!b&&j.isText(m))return;continue}if(u==="lowest"&&b){h=[m,E];continue}var x=u==="lowest"?h:[m,E];x&&(a?s.push(x):yield x),h=[m,E]}}u==="lowest"&&h&&(a?s.push(h):yield h),a&&(yield*s)}},normalize(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:t=!1}=r,u=f=>ir.get(f)||[],a=f=>lr.get(f)||new Set,n=f=>{var c=u(f).pop(),d=c.join(",");return a(f).delete(d),c};if(i.isNormalizing(e)){if(t){var l=Array.from(O.nodes(e),f=>{var[,c]=f;return c}),o=new Set(l.map(f=>f.join(",")));ir.set(e,l),lr.set(e,o)}u(e).length!==0&&i.withoutNormalizing(e,()=>{for(var f of u(e))if(O.has(e,f)){var c=i.node(e,f),[d,g]=c;re.isElement(d)&&d.children.length===0&&e.normalizeNode(c)}for(var D=u(e).length*42,s=0;u(e).length!==0;){if(s>D)throw new Error(`
            Could not completely normalize the editor after `.concat(D,` iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.
          `));var h=n(e);if(O.has(e,h)){var m=i.node(e,h);e.normalizeNode(m)}s++}})}},parent(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=i.path(e,r,t),a=v.parent(u),n=i.node(e,a);return n},path(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:u,edge:a}=t;if(v.isPath(r)){if(a==="start"){var[,n]=O.first(e,r);r=n}else if(a==="end"){var[,l]=O.last(e,r);r=l}}return B.isRange(r)&&(a==="start"?r=B.start(r):a==="end"?r=B.end(r):r=v.common(r.anchor.path,r.focus.path)),Y.isPoint(r)&&(r=r.path),u!=null&&(r=r.slice(0,u)),r},hasPath(e,r){return O.has(e,r)},pathRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,a={current:r,affinity:u,unref(){var{current:l}=a,o=i.pathRefs(e);return o.delete(a),a.current=null,l}},n=i.pathRefs(e);return n.add(a),a},pathRefs(e){var r=Qr.get(e);return r||(r=new Set,Qr.set(e,r)),r},point(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:u="start"}=t;if(v.isPath(r)){var a;if(u==="end"){var[,n]=O.last(e,r);a=n}else{var[,l]=O.first(e,r);a=l}var o=O.get(e,a);if(!j.isText(o))throw new Error("Cannot get the ".concat(u," point in the node at path [").concat(r,"] because it has no ").concat(u," text node."));return{path:a,offset:u==="end"?o.text.length:0}}if(B.isRange(r)){var[f,c]=B.edges(r);return u==="start"?f:c}return r},pointRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,a={current:r,affinity:u,unref(){var{current:l}=a,o=i.pointRefs(e);return o.delete(a),a.current=null,l}},n=i.pointRefs(e);return n.add(a),a},pointRefs(e){var r=et.get(e);return r||(r=new Set,et.set(e,r)),r},*positions(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,unit:u="offset",reverse:a=!1,voids:n=!1}=r;if(!t)return;var l=i.range(e,t),[o,f]=B.edges(l),c=a?f:o,d=!1,g="",D=0,s=0,h=0;for(var[m,E]of i.nodes(e,{at:t,reverse:a,voids:n})){if(re.isElement(m)){if(!n&&e.isVoid(m)){yield i.start(e,E);continue}if(e.isInline(m))continue;if(i.hasInlines(e,m)){var b=v.isAncestor(E,f.path)?f:i.end(e,E),x=v.isAncestor(E,o.path)?o:i.start(e,E);g=i.string(e,{anchor:x,focus:b},{voids:n}),d=!0}}if(j.isText(m)){var T=v.equals(E,c.path);for(T?(s=a?c.offset:m.text.length-c.offset,h=c.offset):(s=m.text.length,h=a?s:0),(T||d||u==="offset")&&(yield{path:E,offset:h},d=!1);;){if(D===0){if(g==="")break;D=L(g,u,a),g=jr(g,D,a)[1]}if(h=a?h-D:h+D,s=s-D,s<0){D=-s;break}D=0,yield{path:E,offset:h}}}}function L(I,y,_){return y==="character"?Nr(I,_):y==="word"?xu(I,_):y==="line"||y==="block"?I.length:1}},previous(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:u=!1}=r,{match:a,at:n=e.selection}=r;if(n){var l=i.before(e,n,{voids:u});if(l){var[,o]=i.first(e,[]),f=[l.path,o];if(v.isPath(n)&&n.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(v.isPath(n)){var[c]=i.parent(e,n);a=g=>c.children.includes(g)}else a=()=>!0;var[d]=i.nodes(e,{reverse:!0,at:f,match:a,mode:t,voids:u});return d}}},range(e,r,t){if(B.isRange(r)&&!t)return r;var u=i.start(e,r),a=i.end(e,t||r);return{anchor:u,focus:a}},rangeRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,a={current:r,affinity:u,unref(){var{current:l}=a,o=i.rangeRefs(e);return o.delete(a),a.current=null,l}},n=i.rangeRefs(e);return n.add(a),a},rangeRefs(e){var r=rt.get(e);return r||(r=new Set,rt.set(e,r)),r},removeMark(e,r){e.removeMark(r)},setNormalizing(e,r){Jr.set(e,r)},start(e,r){return i.point(e,r,{edge:"start"})},string(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=t,a=i.range(e,r),[n,l]=B.edges(a),o="";for(var[f,c]of i.nodes(e,{at:a,match:j.isText,voids:u})){var d=f.text;v.equals(c,l.path)&&(d=d.slice(0,l.offset)),v.equals(c,n.path)&&(d=d.slice(n.offset)),o+=d}return o},unhangRange(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=t,[a,n]=B.edges(r);if(a.offset!==0||n.offset!==0||B.isCollapsed(r)||v.hasPrevious(n.path))return r;var l=i.above(e,{at:n,match:s=>i.isBlock(e,s),voids:u}),o=l?l[1]:[],f=i.start(e,a),c={anchor:f,focus:n},d=!0;for(var[g,D]of i.nodes(e,{at:c,match:j.isText,reverse:!0,voids:u})){if(d){d=!1;continue}if(g.text!==""||v.isBefore(D,o)){n={path:D,offset:g.text.length};break}}return{anchor:a,focus:n}},void(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i.above(e,_e(_e({},r),{},{match:t=>i.isVoid(e,t)}))},withoutNormalizing(e,r){var t=i.isNormalizing(e);i.setNormalizing(e,!1);try{r()}finally{i.setNormalizing(e,t)}i.normalize(e)}},Zu={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(v.isPath)}},Xu=["children"],Ju=["text"],it=new WeakMap,O={ancestor(e,r){var t=O.get(e,r);if(j.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(r,"] because it refers to a text node instead: ").concat(ce.stringify(t)));return t},*ancestors(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var u of v.ancestors(r,t)){var a=O.ancestor(e,u),n=[a,u];yield n}},child(e,r){if(j.isText(e))throw new Error("Cannot get the child of a text node: ".concat(ce.stringify(e)));var t=e.children[r];if(t==null)throw new Error("Cannot get child at index `".concat(r,"` in node: ").concat(ce.stringify(e)));return t},*children(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:u=!1}=t,a=O.ancestor(e,r),{children:n}=a,l=u?n.length-1:0;u?l>=0:l<n.length;){var o=O.child(a,l),f=r.concat(l);yield[o,f],l=u?l-1:l+1}},common(e,r,t){var u=v.common(r,t),a=O.get(e,u);return[a,u]},descendant(e,r){var t=O.get(e,r);if(i.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(r,"] because it refers to the root editor node instead: ").concat(ce.stringify(t)));return t},*descendants(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))u.length!==0&&(yield[t,u])},*elements(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))re.isElement(t)&&(yield[t,u])},extractProps(e){if(re.isAncestor(e)){var r=Fe(e,Xu);return r}else{var r=Fe(e,Ju);return r}},first(e,r){for(var t=r.slice(),u=O.get(e,t);u&&!(j.isText(u)||u.children.length===0);)u=u.children[0],t.push(0);return[u,t]},fragment(e,r){if(j.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(ce.stringify(e)));var t=Rr({children:e.children},u=>{var[a,n]=B.edges(r),l=O.nodes(u,{reverse:!0,pass:D=>{var[,s]=D;return!B.includes(r,s)}});for(var[,o]of l){if(!B.includes(r,o)){var f=O.parent(u,o),c=o[o.length-1];f.children.splice(c,1)}if(v.equals(o,n.path)){var d=O.leaf(u,o);d.text=d.text.slice(0,n.offset)}if(v.equals(o,a.path)){var g=O.leaf(u,o);g.text=g.text.slice(a.offset)}}i.isEditor(u)&&(u.selection=null)});return t.children},get(e,r){for(var t=e,u=0;u<r.length;u++){var a=r[u];if(j.isText(t)||!t.children[a])throw new Error("Cannot find a descendant at path [".concat(r,"] in node: ").concat(ce.stringify(e)));t=t.children[a]}return t},has(e,r){for(var t=e,u=0;u<r.length;u++){var a=r[u];if(j.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(e){return j.isText(e)||re.isElement(e)||i.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var r=it.get(e);if(r!==void 0)return r;var t=e.every(u=>O.isNode(u));return it.set(e,t),t},last(e,r){for(var t=r.slice(),u=O.get(e,t);u&&!(j.isText(u)||u.children.length===0);){var a=u.children.length-1;u=u.children[a],t.push(a)}return[u,t]},leaf(e,r){var t=O.get(e,r);if(!j.isText(t))throw new Error("Cannot get the leaf node at path [".concat(r,"] because it refers to a non-leaf node: ").concat(ce.stringify(t)));return t},*levels(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var u of v.levels(r,t)){var a=O.get(e,u);yield[a,u]}},matches(e,r){return re.isElement(e)&&re.isElementProps(r)&&re.matches(e,r)||j.isText(e)&&j.isTextProps(r)&&j.matches(e,r)},*nodes(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:t,reverse:u=!1}=r,{from:a=[],to:n}=r,l=new Set,o=[],f=e;!(n&&(u?v.isBefore(o,n):v.isAfter(o,n)));){if(l.has(f)||(yield[f,o]),!l.has(f)&&!j.isText(f)&&f.children.length!==0&&(t==null||t([f,o])===!1)){l.add(f);var c=u?f.children.length-1:0;v.isAncestor(o,a)&&(c=a[o.length]),o=o.concat(c),f=O.get(e,o);continue}if(o.length===0)break;if(!u){var d=v.next(o);if(O.has(e,d)){o=d,f=O.get(e,o);continue}}if(u&&o[o.length-1]!==0){var g=v.previous(o);o=g,f=O.get(e,o);continue}o=v.parent(o),f=O.get(e,o),l.add(f)}},parent(e,r){var t=v.parent(r),u=O.get(e,t);if(j.isText(u))throw new Error("Cannot get the parent of path [".concat(r,"] because it does not exist in the root."));return u},string(e){return j.isText(e)?e.text:e.children.map(O.string).join("")},*texts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))j.isText(t)&&(yield[t,u])}};function lt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function ne(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?lt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Ge={isNodeOperation(e){return Ge.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!De(e))return!1;switch(e.type){case"insert_node":return v.isPath(e.path)&&O.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&v.isPath(e.path);case"merge_node":return typeof e.position=="number"&&v.isPath(e.path)&&De(e.properties);case"move_node":return v.isPath(e.path)&&v.isPath(e.newPath);case"remove_node":return v.isPath(e.path)&&O.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&v.isPath(e.path);case"set_node":return v.isPath(e.path)&&De(e.properties)&&De(e.newProperties);case"set_selection":return e.properties===null&&B.isRange(e.newProperties)||e.newProperties===null&&B.isRange(e.properties)||De(e.properties)&&De(e.newProperties);case"split_node":return v.isPath(e.path)&&typeof e.position=="number"&&De(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(r=>Ge.isOperation(r))},isSelectionOperation(e){return Ge.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Ge.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ne(ne({},e),{},{type:"remove_node"});case"insert_text":return ne(ne({},e),{},{type:"remove_text"});case"merge_node":return ne(ne({},e),{},{type:"split_node",path:v.previous(e.path)});case"move_node":{var{newPath:r,path:t}=e;if(v.equals(r,t))return e;if(v.isSibling(t,r))return ne(ne({},e),{},{path:r,newPath:t});var u=v.transform(t,e),a=v.transform(v.next(t),e);return ne(ne({},e),{},{path:u,newPath:a})}case"remove_node":return ne(ne({},e),{},{type:"insert_node"});case"remove_text":return ne(ne({},e),{},{type:"insert_text"});case"set_node":{var{properties:n,newProperties:l}=e;return ne(ne({},e),{},{properties:l,newProperties:n})}case"set_selection":{var{properties:o,newProperties:f}=e;return o==null?ne(ne({},e),{},{properties:f,newProperties:null}):f==null?ne(ne({},e),{},{properties:null,newProperties:o}):ne(ne({},e),{},{properties:f,newProperties:o})}case"split_node":return ne(ne({},e),{},{type:"merge_node",path:v.next(e.path)})}}},v={ancestors(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,u=v.levels(e,r);return t?u=u.slice(1):u=u.slice(0,-1),u},common(e,r){for(var t=[],u=0;u<e.length&&u<r.length;u++){var a=e[u],n=r[u];if(a!==n)break;t.push(a)}return t},compare(e,r){for(var t=Math.min(e.length,r.length),u=0;u<t;u++){if(e[u]<r[u])return-1;if(e[u]>r[u])return 1}return 0},endsAfter(e,r){var t=e.length-1,u=e.slice(0,t),a=r.slice(0,t),n=e[t],l=r[t];return v.equals(u,a)&&n>l},endsAt(e,r){var t=e.length,u=e.slice(0,t),a=r.slice(0,t);return v.equals(u,a)},endsBefore(e,r){var t=e.length-1,u=e.slice(0,t),a=r.slice(0,t),n=e[t],l=r[t];return v.equals(u,a)&&n<l},equals(e,r){return e.length===r.length&&e.every((t,u)=>t===r[u])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,r){return v.compare(e,r)===1},isAncestor(e,r){return e.length<r.length&&v.compare(e,r)===0},isBefore(e,r){return v.compare(e,r)===-1},isChild(e,r){return e.length===r.length+1&&v.compare(e,r)===0},isCommon(e,r){return e.length<=r.length&&v.compare(e,r)===0},isDescendant(e,r){return e.length>r.length&&v.compare(e,r)===0},isParent(e,r){return e.length+1===r.length&&v.compare(e,r)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,r){if(e.length!==r.length)return!1;var t=e.slice(0,-1),u=r.slice(0,-1),a=e[e.length-1],n=r[r.length-1];return a!==n&&v.equals(t,u)},levels(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,u=[],a=0;a<=e.length;a++)u.push(e.slice(0,a));return t&&u.reverse(),u},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var r=e[e.length-1];return e.slice(0,-1).concat(r+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var r=e[e.length-1];if(r<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(r-1)},relative(e,r){if(!v.isAncestor(r,e)&&!v.equals(e,r))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(r,"], because it is not above or equal to the path."));return e.slice(r.length)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var u=[...e],{affinity:a="forward"}=t;if(e.length===0)return u;switch(r.type){case"insert_node":{var{path:n}=r;(v.equals(n,u)||v.endsBefore(n,u)||v.isAncestor(n,u))&&(u[n.length-1]+=1);break}case"remove_node":{var{path:l}=r;if(v.equals(l,u)||v.isAncestor(l,u))return null;v.endsBefore(l,u)&&(u[l.length-1]-=1);break}case"merge_node":{var{path:o,position:f}=r;v.equals(o,u)||v.endsBefore(o,u)?u[o.length-1]-=1:v.isAncestor(o,u)&&(u[o.length-1]-=1,u[o.length]+=f);break}case"split_node":{var{path:c,position:d}=r;if(v.equals(c,u)){if(a==="forward")u[u.length-1]+=1;else if(a!=="backward")return null}else v.endsBefore(c,u)?u[c.length-1]+=1:v.isAncestor(c,u)&&e[c.length]>=d&&(u[c.length-1]+=1,u[c.length]-=d);break}case"move_node":{var{path:g,newPath:D}=r;if(v.equals(g,D))return u;if(v.isAncestor(g,u)||v.equals(g,u)){var s=D.slice();return v.endsBefore(g,D)&&g.length<D.length&&(s[g.length-1]-=1),s.concat(u.slice(g.length))}else v.isSibling(g,D)&&(v.isAncestor(D,u)||v.equals(D,u))?v.endsBefore(g,u)?u[g.length-1]-=1:u[g.length-1]+=1:v.endsBefore(D,u)||v.equals(D,u)||v.isAncestor(D,u)?(v.endsBefore(g,u)&&(u[g.length-1]-=1),u[D.length-1]+=1):v.endsBefore(g,u)&&(v.equals(D,u)&&(u[D.length-1]+=1),u[g.length-1]-=1);break}}return u}},Qu={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var a=v.transform(t,r,{affinity:u});e.current=a,a==null&&e.unref()}}};function ot(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function ft(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ot(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ot(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Y={compare(e,r){var t=v.compare(e.path,r.path);return t===0?e.offset<r.offset?-1:e.offset>r.offset?1:0:t},isAfter(e,r){return Y.compare(e,r)===1},isBefore(e,r){return Y.compare(e,r)===-1},equals(e,r){return e.offset===r.offset&&v.equals(e.path,r.path)},isPoint(e){return De(e)&&typeof e.offset=="number"&&v.isPath(e.path)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Rr(e,u=>{if(u===null)return null;var{affinity:a="forward"}=t,{path:n,offset:l}=u;switch(r.type){case"insert_node":case"move_node":{u.path=v.transform(n,r,t);break}case"insert_text":{v.equals(r.path,n)&&(r.offset<l||r.offset===l&&a==="forward")&&(u.offset+=r.text.length);break}case"merge_node":{v.equals(r.path,n)&&(u.offset+=r.position),u.path=v.transform(n,r,t);break}case"remove_text":{v.equals(r.path,n)&&r.offset<=l&&(u.offset-=Math.min(l-r.offset,r.text.length));break}case"remove_node":{if(v.equals(r.path,n)||v.isAncestor(r.path,n))return null;u.path=v.transform(n,r,t);break}case"split_node":{if(v.equals(r.path,n)){if(r.position===l&&a==null)return null;(r.position<l||r.position===l&&a==="forward")&&(u.offset-=r.position,u.path=v.transform(n,r,ft(ft({},t),{},{affinity:"forward"})))}else u.path=v.transform(n,r,t);break}}})}},ea={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var a=Y.transform(t,r,{affinity:u});e.current=a,a==null&&e.unref()}}},ra=["anchor","focus"];function ct(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function ta(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ct(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ct(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var B={edges(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,{anchor:u,focus:a}=e;return B.isBackward(e)===t?[u,a]:[a,u]},end(e){var[,r]=B.edges(e);return r},equals(e,r){return Y.equals(e.anchor,r.anchor)&&Y.equals(e.focus,r.focus)},includes(e,r){if(B.isRange(r)){if(B.includes(e,r.anchor)||B.includes(e,r.focus))return!0;var[t,u]=B.edges(e),[a,n]=B.edges(r);return Y.isBefore(t,a)&&Y.isAfter(u,n)}var[l,o]=B.edges(e),f=!1,c=!1;return Y.isPoint(r)?(f=Y.compare(r,l)>=0,c=Y.compare(r,o)<=0):(f=v.compare(r,l.path)>=0,c=v.compare(r,o.path)<=0),f&&c},intersection(e,r){var t=Fe(e,ra),[u,a]=B.edges(e),[n,l]=B.edges(r),o=Y.isBefore(u,n)?n:u,f=Y.isBefore(a,l)?a:l;return Y.isBefore(f,o)?null:ta({anchor:o,focus:f},t)},isBackward(e){var{anchor:r,focus:t}=e;return Y.isAfter(r,t)},isCollapsed(e){var{anchor:r,focus:t}=e;return Y.equals(r,t)},isExpanded(e){return!B.isCollapsed(e)},isForward(e){return!B.isBackward(e)},isRange(e){return De(e)&&Y.isPoint(e.anchor)&&Y.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[r]=B.edges(e);return r},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Rr(e,u=>{if(u===null)return null;var{affinity:a="inward"}=t,n,l;if(a==="inward"){var o=B.isCollapsed(u);B.isForward(u)?(n="forward",l=o?n:"backward"):(n="backward",l=o?n:"forward")}else a==="outward"?B.isForward(u)?(n="backward",l="forward"):(n="forward",l="backward"):(n=a,l=a);var f=Y.transform(u.anchor,r,{affinity:n}),c=Y.transform(u.focus,r,{affinity:l});if(!f||!c)return null;u.anchor=f,u.focus=c})}},ua={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var a=B.transform(t,r,{affinity:u});e.current=a,a==null&&e.unref()}}},Dt=void 0,ce={setScrubber(e){Dt=e},stringify(e){return JSON.stringify(e,Dt)}},jt=(e,r)=>{for(var t in e){var u=e[t],a=r[t];if(De(u)&&De(a)){if(!jt(u,a))return!1}else if(Array.isArray(u)&&Array.isArray(a)){if(u.length!==a.length)return!1;for(var n=0;n<u.length;n++)if(u[n]!==a[n])return!1}else if(u!==a)return!1}for(var l in r)if(e[l]===void 0&&r[l]!==void 0)return!1;return!0},aa=["text"],na=["anchor","focus"];function vt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Ee(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var j={equals(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:u=!1}=t;function a(n){var l=Fe(n,aa);return l}return jt(u?a(e):e,u?a(r):r)},isText(e){return De(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(r=>j.isText(r))},isTextProps(e){return e.text!==void 0},matches(e,r){for(var t in r)if(t!=="text"&&(!e.hasOwnProperty(t)||e[t]!==r[t]))return!1;return!0},decorations(e,r){var t=[Ee({},e)];for(var u of r){var a=Fe(u,na),[n,l]=B.edges(u),o=[],f=0,c=n.offset,d=l.offset;for(var g of t){var{length:D}=g.text,s=f;if(f+=D,c<=s&&f<=d){Object.assign(g,a),o.push(g);continue}if(c!==d&&(c===f||d===s)||c>f||d<s||d===s&&s!==0){o.push(g);continue}var h=g,m=void 0,E=void 0;if(d<f){var b=d-s;E=Ee(Ee({},h),{},{text:h.text.slice(b)}),h=Ee(Ee({},h),{},{text:h.text.slice(0,b)})}if(c>s){var x=c-s;m=Ee(Ee({},h),{},{text:h.text.slice(0,x)}),h=Ee(Ee({},h),{},{text:h.text.slice(x)})}Object.assign(h,a),m&&o.push(m),o.push(h),E&&o.push(E)}t=o}return t}};function dt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Ye(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?dt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var sa=(e,r,t)=>{switch(t.type){case"insert_node":{var{path:u,node:a}=t,n=O.parent(e,u),l=u[u.length-1];if(l>n.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(u,"] because the destination is past the end of the node."));if(n.children.splice(l,0,a),r)for(var[o,f]of B.points(r))r[f]=Y.transform(o,t);break}case"insert_text":{var{path:c,offset:d,text:g}=t;if(g.length===0)break;var D=O.leaf(e,c),s=D.text.slice(0,d),h=D.text.slice(d);if(D.text=s+g+h,r)for(var[m,E]of B.points(r))r[E]=Y.transform(m,t);break}case"merge_node":{var{path:b}=t,x=O.get(e,b),T=v.previous(b),L=O.get(e,T),I=O.parent(e,b),y=b[b.length-1];if(j.isText(x)&&j.isText(L))L.text+=x.text;else if(!j.isText(x)&&!j.isText(L))L.children.push(...x.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(b,"] to nodes of different interfaces: ").concat(ce.stringify(x)," ").concat(ce.stringify(L)));if(I.children.splice(y,1),r)for(var[_,k]of B.points(r))r[k]=Y.transform(_,t);break}case"move_node":{var{path:q,newPath:K}=t;if(v.isAncestor(q,K))throw new Error("Cannot move a path [".concat(q,"] to new path [").concat(K,"] because the destination is inside itself."));var Q=O.get(e,q),M=O.parent(e,q),P=q[q.length-1];M.children.splice(P,1);var N=v.transform(q,t),S=O.get(e,v.parent(N)),Z=N[N.length-1];if(S.children.splice(Z,0,Q),r)for(var[C,F]of B.points(r))r[F]=Y.transform(C,t);break}case"remove_node":{var{path:A}=t,W=A[A.length-1],$=O.parent(e,A);if($.children.splice(W,1),r)for(var[U,V]of B.points(r)){var G=Y.transform(U,t);if(r!=null&&G!=null)r[V]=G;else{var ee=void 0,X=void 0;for(var[J,le]of O.texts(e))if(v.compare(le,A)===-1)ee=[J,le];else{X=[J,le];break}var ue=!1;ee&&X&&(v.equals(X[1],A)?ue=!v.hasPrevious(X[1]):ue=v.common(ee[1],A).length<v.common(X[1],A).length),ee&&!ue?(U.path=ee[1],U.offset=ee[0].text.length):X?(U.path=X[1],U.offset=0):r=null}}break}case"remove_text":{var{path:oe,offset:te,text:fe}=t;if(fe.length===0)break;var ae=O.leaf(e,oe),we=ae.text.slice(0,te),he=ae.text.slice(te+fe.length);if(ae.text=we+he,r)for(var[Ie,Ke]of B.points(r))r[Ke]=Y.transform(Ie,t);break}case"set_node":{var{path:Ne,properties:dr,newProperties:Cr}=t;if(Ne.length===0)throw new Error("Cannot set properties on the root node!");var hr=O.get(e,Ne);for(var je in Cr){if(je==="children"||je==="text")throw new Error('Cannot set the "'.concat(je,'" property of nodes!'));var zr=Cr[je];zr==null?delete hr[je]:hr[je]=zr}for(var Kr in dr)Cr.hasOwnProperty(Kr)||delete hr[Kr];break}case"set_selection":{var{newProperties:ke}=t;if(ke==null)r=ke;else{if(r==null){if(!B.isRange(ke))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(ce.stringify(ke)," when there is no current selection."));r=Ye({},ke)}for(var Le in ke){var Ur=ke[Le];if(Ur==null){if(Le==="anchor"||Le==="focus")throw new Error('Cannot remove the "'.concat(Le,'" selection property'));delete r[Le]}else r[Le]=Ur}}break}case"split_node":{var{path:We,position:Xe,properties:Yr}=t;if(We.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(We,"] because the root node cannot be split."));var Pe=O.get(e,We),cu=O.parent(e,We),Du=We[We.length-1],gr;if(j.isText(Pe)){var vu=Pe.text.slice(0,Xe),du=Pe.text.slice(Xe);Pe.text=vu,gr=Ye(Ye({},Yr),{},{text:du})}else{var Cu=Pe.children.slice(0,Xe),hu=Pe.children.slice(Xe);Pe.children=Cu,gr=Ye(Ye({},Yr),{},{children:hu})}if(cu.children.splice(Du+1,0,gr),r)for(var[gu,Bu]of B.points(r))r[Bu]=Y.transform(gu,t);break}}return r},ia={transform(e,r){e.children=Gr(e.children);var t=e.selection&&Gr(e.selection);try{t=sa(e,t,r)}finally{e.children=Zr(e.children),t?e.selection=mu(t)?Zr(t):t:e.selection=null}}},la=["text"],oa=["children"];function Ct(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function ht(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ct(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ct(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var fa={insertNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1,mode:n="lowest"}=t,{at:l,match:o,select:f}=t;if(O.isNode(r)&&(r=[r]),r.length!==0){var[c]=r;if(l||(e.selection?l=e.selection:e.children.length>0?l=i.end(e,[]):l=[0],f=!0),f==null&&(f=!1),B.isRange(l))if(u||(l=i.unhangRange(e,l,{voids:a})),B.isCollapsed(l))l=l.anchor;else{var[,d]=B.edges(l),g=i.pointRef(e,d);w.delete(e,{at:l}),l=g.unref()}if(Y.isPoint(l)){o==null&&(j.isText(c)?o=y=>j.isText(y):e.isInline(c)?o=y=>j.isText(y)||i.isInline(e,y):o=y=>i.isBlock(e,y));var[D]=i.nodes(e,{at:l.path,match:o,mode:n,voids:a});if(D){var[,s]=D,h=i.pathRef(e,s),m=i.isEnd(e,l,s);w.splitNodes(e,{at:l,match:o,mode:n,voids:a});var E=h.unref();l=m?v.next(E):E}else return}var b=v.parent(l),x=l[l.length-1];if(!(!a&&i.void(e,{at:b}))){for(var T of r){var L=b.concat(x);x++,e.apply({type:"insert_node",path:L,node:T}),l=v.next(l)}if(l=v.previous(l),f){var I=i.end(e,l);I&&w.select(e,I)}}}})},liftNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{at:t=e.selection,mode:u="lowest",voids:a=!1}=r,{match:n}=r;if(n==null&&(n=v.isPath(t)?qe(e,t):T=>i.isBlock(e,T)),!!t){var l=i.nodes(e,{at:t,match:n,mode:u,voids:a}),o=Array.from(l,T=>{var[,L]=T;return i.pathRef(e,L)});for(var f of o){var c=f.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var d=i.node(e,v.parent(c)),[g,D]=d,s=c[c.length-1],{length:h}=g.children;if(h===1){var m=v.next(D);w.moveNodes(e,{at:c,to:m,voids:a}),w.removeNodes(e,{at:D,voids:a})}else if(s===0)w.moveNodes(e,{at:c,to:D,voids:a});else if(s===h-1){var E=v.next(D);w.moveNodes(e,{at:c,to:E,voids:a})}else{var b=v.next(c),x=v.next(D);w.splitNodes(e,{at:b,voids:a}),w.moveNodes(e,{at:c,to:x,voids:a})}}}})},mergeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{match:t,at:u=e.selection}=r,{hanging:a=!1,voids:n=!1,mode:l="lowest"}=r;if(u){if(t==null)if(v.isPath(u)){var[o]=i.parent(e,u);t=q=>o.children.includes(q)}else t=q=>i.isBlock(e,q);if(!a&&B.isRange(u)&&(u=i.unhangRange(e,u,{voids:n})),B.isRange(u))if(B.isCollapsed(u))u=u.anchor;else{var[,f]=B.edges(u),c=i.pointRef(e,f);w.delete(e,{at:u}),u=c.unref(),r.at==null&&w.select(e,u)}var[d]=i.nodes(e,{at:u,match:t,voids:n,mode:l}),g=i.previous(e,{at:u,match:t,voids:n,mode:l});if(!(!d||!g)){var[D,s]=d,[h,m]=g;if(!(s.length===0||m.length===0)){var E=v.next(m),b=v.common(s,m),x=v.isSibling(s,m),T=Array.from(i.levels(e,{at:s}),q=>{var[K]=q;return K}).slice(b.length).slice(0,-1),L=i.above(e,{at:s,mode:"highest",match:q=>T.includes(q)&&Lt(e,q)}),I=L&&i.pathRef(e,L[1]),y,_;if(j.isText(D)&&j.isText(h)){var k=Fe(D,la);_=h.text.length,y=k}else if(re.isElement(D)&&re.isElement(h)){var k=Fe(D,oa);_=h.children.length,y=k}else throw new Error("Cannot merge the node at path [".concat(s,"] with the previous sibling because it is not the same kind: ").concat(ce.stringify(D)," ").concat(ce.stringify(h)));x||w.moveNodes(e,{at:s,to:E,voids:n}),I&&w.removeNodes(e,{at:I.current,voids:n}),re.isElement(h)&&i.isEmpty(e,h)||j.isText(h)&&h.text===""&&m[m.length-1]!==0?w.removeNodes(e,{at:m,voids:n}):e.apply({type:"merge_node",path:E,position:_,properties:y}),I&&I.unref()}}}})},moveNodes(e,r){i.withoutNormalizing(e,()=>{var{to:t,at:u=e.selection,mode:a="lowest",voids:n=!1}=r,{match:l}=r;if(u){l==null&&(l=v.isPath(u)?qe(e,u):s=>i.isBlock(e,s));var o=i.pathRef(e,t),f=i.nodes(e,{at:u,match:l,mode:a,voids:n}),c=Array.from(f,s=>{var[,h]=s;return i.pathRef(e,h)});for(var d of c){var g=d.unref(),D=o.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:D}),o.current&&v.isSibling(D,g)&&v.isAfter(D,g)&&(o.current=v.next(o.current))}o.unref()}})},removeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{hanging:t=!1,voids:u=!1,mode:a="lowest"}=r,{at:n=e.selection,match:l}=r;if(n){l==null&&(l=v.isPath(n)?qe(e,n):D=>i.isBlock(e,D)),!t&&B.isRange(n)&&(n=i.unhangRange(e,n,{voids:u}));var o=i.nodes(e,{at:n,match:l,mode:a,voids:u}),f=Array.from(o,D=>{var[,s]=D;return i.pathRef(e,s)});for(var c of f){var d=c.unref();if(d){var[g]=i.node(e,d);e.apply({type:"remove_node",path:d,node:g})}}}})},setNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{match:u,at:a=e.selection,compare:n,merge:l}=t,{hanging:o=!1,mode:f="lowest",split:c=!1,voids:d=!1}=t;if(a){if(u==null&&(u=v.isPath(a)?qe(e,a):_=>i.isBlock(e,_)),!o&&B.isRange(a)&&(a=i.unhangRange(e,a,{voids:d})),c&&B.isRange(a)){if(B.isCollapsed(a)&&i.leaf(e,a.anchor)[0].text.length>0)return;var g=i.rangeRef(e,a,{affinity:"inward"}),[D,s]=B.edges(a),h=f==="lowest"?"lowest":"highest",m=i.isEnd(e,s,s.path);w.splitNodes(e,{at:s,match:u,mode:h,voids:d,always:!m});var E=i.isStart(e,D,D.path);w.splitNodes(e,{at:D,match:u,mode:h,voids:d,always:!E}),a=g.unref(),t.at==null&&w.select(e,a)}n||(n=(_,k)=>_!==k);for(var[b,x]of i.nodes(e,{at:a,match:u,mode:f,voids:d})){var T={},L={};if(x.length!==0){var I=!1;for(var y in r)y==="children"||y==="text"||n(r[y],b[y])&&(I=!0,b.hasOwnProperty(y)&&(T[y]=b[y]),l?r[y]!=null&&(L[y]=l(b[y],r[y])):r[y]!=null&&(L[y]=r[y]));I&&e.apply({type:"set_node",path:x,properties:T,newProperties:L})}}}})},splitNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{mode:t="lowest",voids:u=!1}=r,{match:a,at:n=e.selection,height:l=0,always:o=!1}=r;if(a==null&&(a=F=>i.isBlock(e,F)),B.isRange(n)&&(n=ca(e,n)),v.isPath(n)){var f=n,c=i.point(e,f),[d]=i.parent(e,f);a=F=>F===d,l=c.path.length-f.length+1,n=c,o=!0}if(n){var g=i.pointRef(e,n,{affinity:"backward"}),D;try{var[s]=i.nodes(e,{at:n,match:a,mode:t,voids:u});if(!s)return;var h=i.void(e,{at:n,mode:"highest"}),m=0;if(!u&&h){var[E,b]=h;if(re.isElement(E)&&e.isInline(E)){var x=i.after(e,b);if(!x){var T={text:""},L=v.next(b);w.insertNodes(e,T,{at:L,voids:u}),x=i.point(e,L)}n=x,o=!0}var I=n.path.length-b.length;l=I+1,o=!0}D=i.pointRef(e,n);var y=n.path.length-l,[,_]=s,k=n.path.slice(0,y),q=l===0?n.offset:n.path[y]+m;for(var[K,Q]of i.levels(e,{at:k,reverse:!0,voids:u})){var M=!1;if(Q.length<_.length||Q.length===0||!u&&i.isVoid(e,K))break;var P=g.current,N=i.isEnd(e,P,Q);if(o||!g||!i.isEdge(e,P,Q)){M=!0;var S=O.extractProps(K);e.apply({type:"split_node",path:Q,position:q,properties:S})}q=Q[Q.length-1]+(M||N?1:0)}if(r.at==null){var Z=D.current||i.end(e,[]);w.select(e,Z)}}finally{var C;g.unref(),(C=D)===null||C===void 0||C.unref()}}})},unsetNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var u={};for(var a of r)u[a]=null;w.setNodes(e,u,t)},unwrapNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{mode:t="lowest",split:u=!1,voids:a=!1}=r,{at:n=e.selection,match:l}=r;if(n){l==null&&(l=v.isPath(n)?qe(e,n):D=>i.isBlock(e,D)),v.isPath(n)&&(n=i.range(e,n));var o=B.isRange(n)?i.rangeRef(e,n):null,f=i.nodes(e,{at:n,match:l,mode:t,voids:a}),c=Array.from(f,D=>{var[,s]=D;return i.pathRef(e,s)}).reverse(),d=function(s){var h=s.unref(),[m]=i.node(e,h),E=i.range(e,h);u&&o&&(E=B.intersection(o.current,E)),w.liftNodes(e,{at:E,match:b=>re.isAncestor(m)&&m.children.includes(b),voids:a})};for(var g of c)d(g);o&&o.unref()}})},wrapNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{mode:u="lowest",split:a=!1,voids:n=!1}=t,{match:l,at:o=e.selection}=t;if(o){if(l==null&&(v.isPath(o)?l=qe(e,o):e.isInline(r)?l=E=>i.isInline(e,E)||j.isText(E):l=E=>i.isBlock(e,E)),a&&B.isRange(o)){var[f,c]=B.edges(o),d=i.rangeRef(e,o,{affinity:"inward"});w.splitNodes(e,{at:c,match:l,voids:n}),w.splitNodes(e,{at:f,match:l,voids:n}),o=d.unref(),t.at==null&&w.select(e,o)}var g=Array.from(i.nodes(e,{at:o,match:e.isInline(r)?E=>i.isBlock(e,E):E=>i.isEditor(E),mode:"lowest",voids:n}));for(var[,D]of g){var s=B.isRange(o)?B.intersection(o,i.range(e,D)):o;if(s){var h=Array.from(i.nodes(e,{at:s,match:l,mode:u,voids:n}));if(h.length>0){var m=function(){var[E]=h,b=h[h.length-1],[,x]=E,[,T]=b;if(x.length===0&&T.length===0)return"continue";var L=v.equals(x,T)?v.parent(x):v.common(x,T),I=i.range(e,x,T),y=i.node(e,L),[_]=y,k=L.length+1,q=v.next(T.slice(0,k)),K=ht(ht({},r),{},{children:[]});w.insertNodes(e,K,{at:q,voids:n}),w.moveNodes(e,{at:I,match:Q=>re.isAncestor(_)&&_.children.includes(Q),to:q.concat(0),voids:n})}();if(m==="continue")continue}}}}})}},Lt=(e,r)=>{if(re.isElement(r)){var t=r;return i.isVoid(e,r)?!0:t.children.length===1?Lt(e,t.children[0]):!1}else return!i.isEditor(r)},ca=(e,r)=>{if(B.isCollapsed(r))return r.anchor;var[,t]=B.edges(r),u=i.pointRef(e,t);return w.delete(e,{at:r}),u.unref()},qe=(e,r)=>{var[t]=i.node(e,r);return u=>u===t};function gt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Bt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?gt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Da={collapse(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:t="anchor"}=r,{selection:u}=e;if(u){if(t==="anchor")w.select(e,u.anchor);else if(t==="focus")w.select(e,u.focus);else if(t==="start"){var[a]=B.edges(u);w.select(e,a)}else if(t==="end"){var[,n]=B.edges(u);w.select(e,n)}}else return},deselect(e){var{selection:r}=e;r&&e.apply({type:"set_selection",properties:r,newProperties:null})},move(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:t}=e,{distance:u=1,unit:a="character",reverse:n=!1}=r,{edge:l=null}=r;if(t){l==="start"&&(l=B.isBackward(t)?"focus":"anchor"),l==="end"&&(l=B.isBackward(t)?"anchor":"focus");var{anchor:o,focus:f}=t,c={distance:u,unit:a},d={};if(l==null||l==="anchor"){var g=n?i.before(e,o,c):i.after(e,o,c);g&&(d.anchor=g)}if(l==null||l==="focus"){var D=n?i.before(e,f,c):i.after(e,f,c);D&&(d.focus=D)}w.setSelection(e,d)}},select(e,r){var{selection:t}=e;if(r=i.range(e,r),t){w.setSelection(e,r);return}if(!B.isRange(r))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(ce.stringify(r)));e.apply({type:"set_selection",properties:t,newProperties:r})},setPoint(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u}=e,{edge:a="both"}=t;if(u){a==="start"&&(a=B.isBackward(u)?"focus":"anchor"),a==="end"&&(a=B.isBackward(u)?"anchor":"focus");var{anchor:n,focus:l}=u,o=a==="anchor"?n:l;w.setSelection(e,{[a==="anchor"?"anchor":"focus"]:Bt(Bt({},o),r)})}},setSelection(e,r){var{selection:t}=e,u={},a={};if(t){for(var n in r)(n==="anchor"&&r.anchor!=null&&!Y.equals(r.anchor,t.anchor)||n==="focus"&&r.focus!=null&&!Y.equals(r.focus,t.focus)||n!=="anchor"&&n!=="focus"&&r[n]!==t[n])&&(u[n]=t[n],a[n]=r[n]);Object.keys(u).length>0&&e.apply({type:"set_selection",properties:u,newProperties:a})}}},va={delete(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.withoutNormalizing(e,()=>{var{reverse:t=!1,unit:u="character",distance:a=1,voids:n=!1}=r,{at:l=e.selection,hanging:o=!1}=r;if(l){var f=!1;if(B.isRange(l)&&B.isCollapsed(l)&&(f=!0,l=l.anchor),Y.isPoint(l)){var c=i.void(e,{at:l,mode:"highest"});if(!n&&c){var[,d]=c;l=d}else{var g={unit:u,distance:a},D=t?i.before(e,l,g)||i.start(e,[]):i.after(e,l,g)||i.end(e,[]);l={anchor:l,focus:D},o=!0}}if(v.isPath(l)){w.removeNodes(e,{at:l,voids:n});return}if(!B.isCollapsed(l)){if(!o){var[,s]=B.edges(l),h=i.end(e,[]);Y.equals(s,h)||(l=i.unhangRange(e,l,{voids:n}))}var[m,E]=B.edges(l),b=i.above(e,{match:te=>i.isBlock(e,te),at:m,voids:n}),x=i.above(e,{match:te=>i.isBlock(e,te),at:E,voids:n}),T=b&&x&&!v.equals(b[1],x[1]),L=v.equals(m.path,E.path),I=n?null:i.void(e,{at:m,mode:"highest"}),y=n?null:i.void(e,{at:E,mode:"highest"});if(I){var _=i.before(e,m);_&&b&&v.isAncestor(b[1],_.path)&&(m=_)}if(y){var k=i.after(e,E);k&&x&&v.isAncestor(x[1],k.path)&&(E=k)}var q=[],K;for(var Q of i.nodes(e,{at:l,voids:n})){var[M,P]=Q;K&&v.compare(P,K)===0||(!n&&i.isVoid(e,M)||!v.isCommon(P,m.path)&&!v.isCommon(P,E.path))&&(q.push(Q),K=P)}var N=Array.from(q,te=>{var[,fe]=te;return i.pathRef(e,fe)}),S=i.pointRef(e,m),Z=i.pointRef(e,E),C="";if(!L&&!I){var F=S.current,[A]=i.leaf(e,F),{path:W}=F,{offset:$}=m,U=A.text.slice($);U.length>0&&(e.apply({type:"remove_text",path:W,offset:$,text:U}),C=U)}if(N.reverse().map(te=>te.unref()).filter(te=>te!==null).forEach(te=>w.removeNodes(e,{at:te,voids:n})),!y){var V=Z.current,[G]=i.leaf(e,V),{path:ee}=V,X=L?m.offset:0,J=G.text.slice(X,E.offset);J.length>0&&(e.apply({type:"remove_text",path:ee,offset:X,text:J}),C=J)}!L&&T&&Z.current&&S.current&&w.mergeNodes(e,{at:Z.current,hanging:!0,voids:n}),f&&t&&u==="character"&&C.length>1&&C.match(/[\u0E00-\u0E7F]+/)&&w.insertText(e,C.slice(0,C.length-a));var le=S.unref(),ue=Z.unref(),oe=t?le||ue:ue||le;r.at==null&&oe&&w.select(e,oe)}}})},insertFragment(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1}=t,{at:n=e.selection}=t;if(r.length){if(n)if(B.isRange(n))if(u||(n=i.unhangRange(e,n,{voids:a})),B.isCollapsed(n))n=n.anchor;else{var[,l]=B.edges(n);if(!a&&i.void(e,{at:l}))return;var o=i.pointRef(e,l);w.delete(e,{at:n}),n=o.unref()}else v.isPath(n)&&(n=i.start(e,n));else return;if(!(!a&&i.void(e,{at:n}))){var f=i.above(e,{at:n,match:V=>i.isInline(e,V),mode:"highest",voids:a});if(f){var[,c]=f;if(i.isEnd(e,n,c)){var d=i.after(e,c);n=d}else if(i.isStart(e,n,c)){var g=i.before(e,c);n=g}}var D=i.above(e,{match:V=>i.isBlock(e,V),at:n,voids:a}),[,s]=D,h=i.isStart(e,n,s),m=i.isEnd(e,n,s),E=h&&m,b=!h||h&&m,x=!m,[,T]=O.first({children:r},[]),[,L]=O.last({children:r},[]),I=[],y=V=>{var[G,ee]=V,X=ee.length===0;return X?!1:E?!0:!(b&&v.isAncestor(ee,T)&&re.isElement(G)&&!e.isVoid(G)&&!e.isInline(G)||x&&v.isAncestor(ee,L)&&re.isElement(G)&&!e.isVoid(G)&&!e.isInline(G))};for(var _ of O.nodes({children:r},{pass:y}))y(_)&&I.push(_);var k=[],q=[],K=[],Q=!0,M=!1;for(var[P]of I)re.isElement(P)&&!e.isInline(P)?(Q=!1,M=!0,q.push(P)):Q?k.push(P):K.push(P);var[N]=i.nodes(e,{at:n,match:V=>j.isText(V)||i.isInline(e,V),mode:"highest",voids:a}),[,S]=N,Z=i.isStart(e,n,S),C=i.isEnd(e,n,S),F=i.pathRef(e,m&&!K.length?v.next(s):s),A=i.pathRef(e,C?v.next(S):S);w.splitNodes(e,{at:n,match:V=>M?i.isBlock(e,V):j.isText(V)||i.isInline(e,V),mode:M?"lowest":"highest",always:M&&(!h||k.length>0)&&(!m||K.length>0),voids:a});var W=i.pathRef(e,!Z||Z&&C?v.next(S):S);if(w.insertNodes(e,k,{at:W.current,match:V=>j.isText(V)||i.isInline(e,V),mode:"highest",voids:a}),E&&!k.length&&q.length&&!K.length&&w.delete(e,{at:s,voids:a}),w.insertNodes(e,q,{at:F.current,match:V=>i.isBlock(e,V),mode:"lowest",voids:a}),w.insertNodes(e,K,{at:A.current,match:V=>j.isText(V)||i.isInline(e,V),mode:"highest",voids:a}),!t.at){var $;if(K.length>0&&A.current?$=v.previous(A.current):q.length>0&&F.current?$=v.previous(F.current):W.current&&($=v.previous(W.current)),$){var U=i.end(e,$);w.select(e,U)}}W.unref(),F.unref(),A.unref()}}})},insertText(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i.withoutNormalizing(e,()=>{var{voids:u=!1}=t,{at:a=e.selection}=t;if(a){if(v.isPath(a)&&(a=i.range(e,a)),B.isRange(a))if(B.isCollapsed(a))a=a.anchor;else{var n=B.end(a);if(!u&&i.void(e,{at:n}))return;var l=B.start(a),o=i.pointRef(e,l),f=i.pointRef(e,n);w.delete(e,{at:a,voids:u});var c=o.unref(),d=f.unref();a=c||d,w.setSelection(e,{anchor:a,focus:a})}if(!(!u&&i.void(e,{at:a}))){var{path:g,offset:D}=a;r.length>0&&e.apply({type:"insert_text",path:g,offset:D,text:r})}}})}};function mt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Qe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mt(Object(t),!0).forEach(function(u){me(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var w=Qe(Qe(Qe(Qe({},ia),fa),Da),va),da=ga,Wt="֑-߿יִ-﷽ﹰ-ﻼ",_t="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Ca=new RegExp("^[^"+_t+"]*["+Wt+"]"),ha=new RegExp("^[^"+Wt+"]*["+_t+"]");function ga(e){return e=String(e||""),Ca.test(e)?"rtl":ha.test(e)?"ltr":"neutral"}const qt=Mr(da);var Ba=pu,ma=function(){return Ba.Date.now()},Ea=ma,pa=/\s/;function Fa(e){for(var r=e.length;r--&&pa.test(e.charAt(r)););return r}var Aa=Fa,wa=Aa,ba=/^\s+/;function Oa(e){return e&&e.slice(0,wa(e)+1).replace(ba,"")}var ya=Oa,xa=ya,Et=Ir,ka=Fu,pt=NaN,Pa=/^[-+]0x[0-9a-f]+$/i,Sa=/^0b[01]+$/i,Ta=/^0o[0-7]+$/i,Ra=parseInt;function Ma(e){if(typeof e=="number")return e;if(ka(e))return pt;if(Et(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Et(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=xa(e);var t=Sa.test(e);return t||Ta.test(e)?Ra(e.slice(2),t?2:8):Pa.test(e)?pt:+e}var Ia=Ma,Na=Ir,Br=Ea,Ft=Ia,ja="Expected a function",La=Math.max,Wa=Math.min;function _a(e,r,t){var u,a,n,l,o,f,c=0,d=!1,g=!1,D=!0;if(typeof e!="function")throw new TypeError(ja);r=Ft(r)||0,Na(t)&&(d=!!t.leading,g="maxWait"in t,n=g?La(Ft(t.maxWait)||0,r):n,D="trailing"in t?!!t.trailing:D);function s(y){var _=u,k=a;return u=a=void 0,c=y,l=e.apply(k,_),l}function h(y){return c=y,o=setTimeout(b,r),d?s(y):l}function m(y){var _=y-f,k=y-c,q=r-_;return g?Wa(q,n-k):q}function E(y){var _=y-f,k=y-c;return f===void 0||_>=r||_<0||g&&k>=n}function b(){var y=Br();if(E(y))return x(y);o=setTimeout(b,m(y))}function x(y){return o=void 0,D&&u?s(y):(u=a=void 0,l)}function T(){o!==void 0&&clearTimeout(o),c=0,u=f=a=o=void 0}function L(){return o===void 0?l:x(Br())}function I(){var y=Br(),_=E(y);if(u=arguments,a=this,f=y,_){if(o===void 0)return h(f);if(g)return clearTimeout(o),o=setTimeout(b,r),s(f)}return o===void 0&&(o=setTimeout(b,r)),l}return I.cancel=T,I.flush=L,I}var Vt=_a;const qa=Mr(Vt);var Va=Vt,$a=Ir,Ha="Expected a function";function za(e,r,t){var u=!0,a=!0;if(typeof e!="function")throw new TypeError(Ha);return $a(t)&&(u="leading"in t?!!t.leading:u,a="trailing"in t?!!t.trailing:a),Va(e,r,{leading:u,maxWait:r,trailing:a})}var Ka=za;const Ua=Mr(Ka);function At(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function wt(e,r){return(!r||e!=="hidden")&&e!=="visible"&&e!=="clip"}function mr(e,r){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return wt(t.overflowY,r)||wt(t.overflowX,r)||function(u){var a=function(n){if(!n.ownerDocument||!n.ownerDocument.defaultView)return null;try{return n.ownerDocument.defaultView.frameElement}catch{return null}}(u);return!!a&&(a.clientHeight<u.scrollHeight||a.clientWidth<u.scrollWidth)}(e)}return!1}function er(e,r,t,u,a,n,l,o){return n<e&&l>r||n>e&&l<r?0:n<=e&&o<=t||l>=r&&o>=t?n-e-u:l>r&&o<t||n<e&&o>t?l-r+a:0}var bt=function(e,r){var t=window,u=r.scrollMode,a=r.block,n=r.inline,l=r.boundary,o=r.skipOverflowHiddenElements,f=typeof l=="function"?l:function(we){return we!==l};if(!At(e))throw new TypeError("Invalid target");for(var c,d,g=document.scrollingElement||document.documentElement,D=[],s=e;At(s)&&f(s);){if((s=(d=(c=s).parentElement)==null?c.getRootNode().host||null:d)===g){D.push(s);break}s!=null&&s===document.body&&mr(s)&&!mr(document.documentElement)||s!=null&&mr(s,o)&&D.push(s)}for(var h=t.visualViewport?t.visualViewport.width:innerWidth,m=t.visualViewport?t.visualViewport.height:innerHeight,E=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,x=e.getBoundingClientRect(),T=x.height,L=x.width,I=x.top,y=x.right,_=x.bottom,k=x.left,q=a==="start"||a==="nearest"?I:a==="end"?_:I+T/2,K=n==="center"?k+L/2:n==="end"?y:k,Q=[],M=0;M<D.length;M++){var P=D[M],N=P.getBoundingClientRect(),S=N.height,Z=N.width,C=N.top,F=N.right,A=N.bottom,W=N.left;if(u==="if-needed"&&I>=0&&k>=0&&_<=m&&y<=h&&I>=C&&_<=A&&k>=W&&y<=F)return Q;var $=getComputedStyle(P),U=parseInt($.borderLeftWidth,10),V=parseInt($.borderTopWidth,10),G=parseInt($.borderRightWidth,10),ee=parseInt($.borderBottomWidth,10),X=0,J=0,le="offsetWidth"in P?P.offsetWidth-P.clientWidth-U-G:0,ue="offsetHeight"in P?P.offsetHeight-P.clientHeight-V-ee:0,oe="offsetWidth"in P?P.offsetWidth===0?0:Z/P.offsetWidth:0,te="offsetHeight"in P?P.offsetHeight===0?0:S/P.offsetHeight:0;if(g===P)X=a==="start"?q:a==="end"?q-m:a==="nearest"?er(b,b+m,m,V,ee,b+q,b+q+T,T):q-m/2,J=n==="start"?K:n==="center"?K-h/2:n==="end"?K-h:er(E,E+h,h,U,G,E+K,E+K+L,L),X=Math.max(0,X+b),J=Math.max(0,J+E);else{X=a==="start"?q-C-V:a==="end"?q-A+ee+ue:a==="nearest"?er(C,A,S,V,ee+ue,q,q+T,T):q-(C+S/2)+ue/2,J=n==="start"?K-W-U:n==="center"?K-(W+Z/2)+le/2:n==="end"?K-F+G+le:er(W,F,Z,U,G+le,K,K+L,L);var fe=P.scrollLeft,ae=P.scrollTop;q+=ae-(X=Math.max(0,Math.min(ae+X/te,P.scrollHeight-S/te+ue))),K+=fe-(J=Math.max(0,Math.min(fe+J/oe,P.scrollWidth-Z/oe+le)))}Q.push({el:P,top:X,left:J})}return Q};function $t(e){return e===Object(e)&&Object.keys(e).length!==0}function Ya(e,r){r===void 0&&(r="auto");var t="scrollBehavior"in document.body.style;e.forEach(function(u){var a=u.el,n=u.top,l=u.left;a.scroll&&t?a.scroll({top:n,left:l,behavior:r}):(a.scrollTop=n,a.scrollLeft=l)})}function Ga(e){return e===!1?{block:"end",inline:"nearest"}:$t(e)?e:{block:"start",inline:"nearest"}}function Za(e,r){var t=e.isConnected||e.ownerDocument.documentElement.contains(e);if($t(r)&&typeof r.behavior=="function")return r.behavior(t?bt(e,r):[]);if(t){var u=Ga(r);return Ya(bt(e,u),u.behavior)}}var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var Xa=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Er={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Ja={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Xa?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Ht={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var rr=1;rr<20;rr++)Ht["f"+rr]=111+rr;function fr(e,r,t){r&&!("byKey"in r)&&(t=r,r=null),Array.isArray(e)||(e=[e]);var u=e.map(function(l){return zt(l,r)}),a=function(o){return u.some(function(f){return Kt(f,o)})},n=t==null?a:a(t);return n}function Qa(e,r){return fr(e,r)}function en(e,r){return fr(e,{byKey:!0},r)}function zt(e,r){var t=r&&r.byKey,u={};e=e.replace("++","+add");var a=e.split("+"),n=a.length;for(var l in Er)u[Er[l]]=!1;var o=!0,f=!1,c=void 0;try{for(var d=a[Symbol.iterator](),g;!(o=(g=d.next()).done);o=!0){var D=g.value,s=D.endsWith("?")&&D.length>1;s&&(D=D.slice(0,-1));var h=Lr(D),m=Er[h];(n===1||!m)&&(t?u.key=h:u.which=Ut(D)),m&&(u[m]=s?null:!0)}}catch(E){f=!0,c=E}finally{try{!o&&d.return&&d.return()}finally{if(f)throw c}}return u}function Kt(e,r){for(var t in e){var u=e[t],a=void 0;if(u!=null&&(t==="key"&&r.key!=null?a=r.key.toLowerCase():t==="which"?a=u===91&&r.which===93?91:r.which:a=r[t],!(a==null&&u===!1)&&a!==u))return!1}return!0}function Ut(e){e=Lr(e);var r=Ht[e]||e.toUpperCase().charCodeAt(0);return r}function Lr(e){return e=e.toLowerCase(),e=Ja[e]||e,e}Ae.default=fr;Ae.isHotkey=fr;Ae.isCodeHotkey=Qa;var pr=Ae.isKeyHotkey=en;Ae.parseHotkey=zt;Ae.compareHotkey=Kt;Ae.toKeyCode=Ut;Ae.toKeyName=Lr;function cr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rn(e,r){if(e==null)return{};var t={},u=Object.keys(e),a,n;for(n=0;n<u.length;n++)a=u[n],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function $e(e,r){if(e==null)return{};var t=rn(e,r),u,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)u=n[a],!(r.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(e,u)&&(t[u]=e[u])}return t}var tn=0;class un{constructor(){this.id="".concat(tn++)}}var Wr=new WeakMap,_r=new WeakMap,Yt=new WeakMap,br=new WeakMap,nr=new WeakMap,Dr=new WeakMap,He=new WeakMap,Or=new WeakMap,vr=new WeakMap,or=new WeakMap,yr=new WeakMap,Se=new WeakMap,Te=new WeakMap,Ze=new WeakMap,xr=new WeakMap,qr=new WeakMap,ge=new WeakMap,pe=new WeakMap,de=new WeakMap,Oe=new WeakMap,ye=new WeakMap,Gt=new WeakMap,ze=Symbol("placeholder"),Zt=Symbol("mark-placeholder"),an=globalThis.Text,Vr=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,nn=e=>Me(e)&&e.nodeType===8,Ce=e=>Me(e)&&e.nodeType===1,Me=e=>{var r=Vr(e);return!!r&&e instanceof r.Node},kr=e=>{var r=e&&e.anchorNode&&Vr(e.anchorNode);return!!r&&e instanceof r.Selection},Xt=e=>Me(e)&&e.nodeType===3,sn=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,ln=e=>{var[r,t]=e;if(Ce(r)&&r.childNodes.length){var u=t===r.childNodes.length,a=u?t-1:t;for([r,a]=Jt(r,a,u?"backward":"forward"),u=a<t;Ce(r)&&r.childNodes.length;){var n=u?r.childNodes.length-1:0;r=fn(r,n,u?"backward":"forward")}t=u&&r.textContent!=null?r.textContent.length:0}return[r,t]},on=e=>{for(var r=e&&e.parentNode;r;){if(r.toString()==="[object ShadowRoot]")return!0;r=r.parentNode}return!1},Jt=(e,r,t)=>{for(var{childNodes:u}=e,a=u[r],n=r,l=!1,o=!1;(nn(a)||Ce(a)&&a.childNodes.length===0||Ce(a)&&a.getAttribute("contenteditable")==="false")&&!(l&&o);){if(n>=u.length){l=!0,n=r-1,t="backward";continue}if(n<0){o=!0,n=r+1,t="forward";continue}a=u[n],r=n,n+=t==="forward"?1:-1}return[a,r]},fn=(e,r,t)=>{var[u]=Jt(e,r,t);return u},Qt=e=>{var r="";if(Xt(e)&&e.nodeValue)return e.nodeValue;if(Ce(e)){for(var t of Array.from(e.childNodes))r+=Qt(t);var u=getComputedStyle(e).getPropertyValue("display");(u==="block"||u==="list"||e.tagName==="BR")&&(r+=`
`)}return r},cn=/data-slate-fragment="(.+?)"/m,Dn=e=>{var r=e.getData("text/html"),[,t]=r.match(cn)||[];return t},$r=(e,r,t)=>{var{target:u}=r;if(Ce(u)&&u.matches('[contentEditable="false"]'))return!1;var{document:a}=p.getWindow(e);if(a.contains(u))return p.hasDOMNode(e,u,{editable:!0});var n=t.find(l=>{var{addedNodes:o,removedNodes:f}=l;for(var c of o)if(c===u||c.contains(u))return!0;for(var d of f)if(d===u||d.contains(u))return!0});return!n||n===r?!1:$r(e,n,t)},vn=parseInt(z.version.split(".")[0],10)>=17,dn=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ot=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Be=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Pr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Fr=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Cn=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),eu=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),hn=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),gn=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Bn=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),mn=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),sr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",be=!hn&&!Cn&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",p={isComposing(e){return!!Te.get(e)},getWindow(e){var r=Yt.get(e);if(!r)throw new Error("Unable to find a host window element for this editor");return r},findKey(e,r){var t=Or.get(r);return t||(t=new un,Or.set(r,t)),t},findPath(e,r){for(var t=[],u=r;;){var a=_r.get(u);if(a==null){if(i.isEditor(u))return t;break}var n=Wr.get(u);if(n==null)break;t.unshift(n),u=a}throw new Error("Unable to find the path for Slate node: ".concat(ce.stringify(r)))},findDocumentOrShadowRoot(e){var r=p.toDOMNode(e,e),t=r.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:r.ownerDocument},isFocused(e){return!!Se.get(e)},isReadOnly(e){return!!yr.get(e)},blur(e){var r=p.toDOMNode(e,e),t=p.findDocumentOrShadowRoot(e);Se.set(e,!1),t.activeElement===r&&r.blur()},focus(e){var r=p.toDOMNode(e,e),t=p.findDocumentOrShadowRoot(e);Se.set(e,!0),t.activeElement!==r&&r.focus({preventScroll:!0})},deselect(e){var{selection:r}=e,t=p.findDocumentOrShadowRoot(e),u=t.getSelection();u&&u.rangeCount>0&&u.removeAllRanges(),r&&w.deselect(e)},hasDOMNode(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:u=!1}=t,a=p.toDOMNode(e,e),n;try{n=Ce(r)?r:r.parentElement}catch(l){if(!l.message.includes('Permission denied to access property "nodeType"'))throw l}return n?n.closest("[data-slate-editor]")===a&&(!u||n.isContentEditable?!0:typeof n.isContentEditable=="boolean"&&n.closest('[contenteditable="false"]')===a||!!n.getAttribute("data-slate-zero-width")):!1},insertData(e,r){e.insertData(r)},insertFragmentData(e,r){return e.insertFragmentData(r)},insertTextData(e,r){return e.insertTextData(r)},setFragmentData(e,r,t){e.setFragmentData(r,t)},toDOMNode(e,r){var t=vr.get(e),u=i.isEditor(r)?br.get(e):t==null?void 0:t.get(p.findKey(e,r));if(!u)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(ce.stringify(r)));return u},toDOMPoint(e,r){var[t]=i.node(e,r.path),u=p.toDOMNode(e,t),a;i.void(e,{at:r})&&(r={path:r.path,offset:0});for(var n="[data-slate-string], [data-slate-zero-width]",l=Array.from(u.querySelectorAll(n)),o=0,f=0;f<l.length;f++){var c=l[f],d=c.childNodes[0];if(!(d==null||d.textContent==null)){var{length:g}=d.textContent,D=c.getAttribute("data-slate-length"),s=D==null?g:parseInt(D,10),h=o+s,m=l[f+1];if(r.offset===h&&m!==null&&m!==void 0&&m.hasAttribute("data-slate-mark-placeholder")){var E,b=m.childNodes[0];a=[b instanceof an?b:m,(E=m.textContent)!==null&&E!==void 0&&E.startsWith("\uFEFF")?1:0];break}if(r.offset<=h){var x=Math.min(g,Math.max(0,r.offset-o));a=[d,x];break}o=h}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(ce.stringify(r)));return a},toDOMRange(e,r){var{anchor:t,focus:u}=r,a=B.isBackward(r),n=p.toDOMPoint(e,t),l=B.isCollapsed(r)?n:p.toDOMPoint(e,u),o=p.getWindow(e),f=o.document.createRange(),[c,d]=a?l:n,[g,D]=a?n:l,s=Ce(c)?c:c.parentElement,h=!!s.getAttribute("data-slate-zero-width"),m=Ce(g)?g:g.parentElement,E=!!m.getAttribute("data-slate-zero-width");return f.setStart(c,h?1:d),f.setEnd(g,E?1:D),f},toSlateNode(e,r){var t=Ce(r)?r:r.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var u=t?Dr.get(t):null;if(!u)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return u},findEventRange(e,r){"nativeEvent"in r&&(r=r.nativeEvent);var{clientX:t,clientY:u,target:a}=r;if(t==null||u==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var n=p.toSlateNode(e,r.target),l=p.findPath(e,n);if(i.isVoid(e,n)){var o=a.getBoundingClientRect(),f=e.isInline(n)?t-o.left<o.left+o.width-t:u-o.top<o.top+o.height-u,c=i.point(e,l,{edge:f?"start":"end"}),d=f?i.before(e,c):i.after(e,c);if(d){var g=i.range(e,d);return g}}var D,{document:s}=p.getWindow(e);if(s.caretRangeFromPoint)D=s.caretRangeFromPoint(t,u);else{var h=s.caretPositionFromPoint(t,u);h&&(D=s.createRange(),D.setStart(h.offsetNode,h.offset),D.setEnd(h.offsetNode,h.offset))}if(!D)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var m=p.toSlateRange(e,D,{exactMatch:!1,suppressThrow:!1});return m},toSlatePoint(e,r,t){var{exactMatch:u,suppressThrow:a}=t,[n,l]=u?r:ln(r),o=n.parentNode,f=null,c=0;if(o){var d,g,D=p.toDOMNode(e,e),s=o.closest('[data-slate-void="true"]'),h=s&&D.contains(s)?s:null,m=o.closest("[data-slate-leaf]"),E=null;if(m){if(f=m.closest('[data-slate-node="text"]'),f){var b=p.getWindow(e),x=b.document.createRange();x.setStart(f,0),x.setEnd(n,l);var T=x.cloneContents(),L=[...Array.prototype.slice.call(T.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(T.querySelectorAll("[contenteditable=false]"))];L.forEach(N=>{if(Be&&!u&&N.hasAttribute("data-slate-zero-width")&&N.textContent.length>0&&N.textContext!=="\uFEFF"){N.textContent.startsWith("\uFEFF")&&(N.textContent=N.textContent.slice(1));return}N.parentNode.removeChild(N)}),c=T.textContent.length,E=f}}else if(h){for(var I=h.querySelectorAll("[data-slate-leaf]"),y=0;y<I.length;y++){var _=I[y];if(p.hasDOMNode(e,_)){m=_;break}}m?(f=m.closest('[data-slate-node="text"]'),E=m,c=E.textContent.length,E.querySelectorAll("[data-slate-zero-width]").forEach(N=>{c-=N.textContent.length})):c=1}E&&c===E.textContent.length&&Be&&E.getAttribute("data-slate-zero-width")==="z"&&(d=E.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(o.hasAttribute("data-slate-zero-width")||Pr&&(g=E.textContent)!==null&&g!==void 0&&g.endsWith(`

`))&&c--}if(Be&&!f&&!u){var k=o.hasAttribute("data-slate-node")?o:o.closest("[data-slate-node]");if(k&&p.hasDOMNode(e,k,{editable:!0})){var q=p.toSlateNode(e,k),{path:K,offset:Q}=i.start(e,p.findPath(e,q));return k.querySelector("[data-slate-leaf]")||(Q=l),{path:K,offset:Q}}}if(!f){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(r))}var M=p.toSlateNode(e,f),P=p.findPath(e,M);return{path:P,offset:c}},toSlateRange(e,r,t){var{exactMatch:u,suppressThrow:a}=t,n=kr(r)?r.anchorNode:r.startContainer,l,o,f,c,d;if(n&&(kr(r)?(l=r.anchorNode,o=r.anchorOffset,f=r.focusNode,c=r.focusOffset,eu&&on(l)?d=r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset:d=r.isCollapsed):(l=r.startContainer,o=r.startOffset,f=r.endContainer,c=r.endOffset,d=r.collapsed)),l==null||f==null||o==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(r));var g=p.toSlatePoint(e,[l,o],{exactMatch:u,suppressThrow:a});if(!g)return null;var D=d?g:p.toSlatePoint(e,[f,c],{exactMatch:u,suppressThrow:a});if(!D)return null;var s={anchor:g,focus:D};return B.isExpanded(s)&&B.isForward(s)&&Ce(f)&&i.void(e,{at:s.focus,mode:"highest"})&&(s=i.unhangRange(e,s,{voids:!0})),s},hasRange(e,r){var{anchor:t,focus:u}=r;return i.hasPath(e,t.path)&&i.hasPath(e,u.path)},hasTarget(e,r){return Me(r)&&p.hasDOMNode(e,r)},hasEditableTarget(e,r){return Me(r)&&p.hasDOMNode(e,r,{editable:!0})},hasSelectableTarget(e,r){return p.hasEditableTarget(e,r)||p.isTargetInsideNonReadonlyVoid(e,r)},isTargetInsideNonReadonlyVoid(e,r){if(yr.get(e))return!1;var t=p.hasTarget(e,r)&&p.toSlateNode(e,r);return i.isVoid(e,t)},androidScheduleFlush(e){var r;(r=qr.get(e))===null||r===void 0||r()},androidPendingDiffs(e){return de.get(e)}},Re=sr?R.useLayoutEffect:R.useEffect,En=["anchor","focus"],pn=["anchor","focus"],Fn=(e,r)=>Object.keys(e).length===Object.keys(r).length&&Object.keys(e).every(t=>r.hasOwnProperty(t)&&e[t]===r[t]),ru=(e,r)=>{if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var u=e[t],a=r[t],n=$e(u,En),l=$e(a,pn);if(!B.equals(u,a)||u[ze]!==a[ze]||!Fn(n,l))return!1}return!0},An=e=>{var{isLast:r,leaf:t,parent:u,text:a}=e,n=xe(),l=p.findPath(n,a),o=v.parent(l),f=t[Zt]===!0;return n.isVoid(u)?z.createElement(Ar,{length:O.string(u).length}):t.text===""&&u.children[u.children.length-1]===a&&!n.isInline(u)&&i.string(n,o)===""?z.createElement(Ar,{isLineBreak:!0,isMarkPlaceholder:f}):t.text===""?z.createElement(Ar,{isMarkPlaceholder:f}):r&&t.text.slice(-1)===`
`?z.createElement(yt,{isTrailing:!0,text:t.text}):z.createElement(yt,{text:t.text})},yt=e=>{var{text:r,isTrailing:t=!1}=e,u=R.useRef(null),a=()=>"".concat(r??"").concat(t?`
`:"");return Re(()=>{var n=a();u.current&&u.current.textContent!==n&&(u.current.textContent=n)}),u.current?z.createElement("span",{"data-slate-string":!0,ref:u}):z.createElement("span",{"data-slate-string":!0,ref:u},a())},Ar=e=>{var{length:r=0,isLineBreak:t=!1,isMarkPlaceholder:u=!1}=e,a={"data-slate-zero-width":t?"n":"z","data-slate-length":r};return u&&(a["data-slate-mark-placeholder"]=!0),z.createElement("span",Object.assign({},a),!Be||!t?"\uFEFF":null,t?z.createElement("br",null):null)},Hr=R.createContext(null),xe=()=>{var e=R.useContext(Hr);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},wn=e=>{var{leaf:r,isLast:t,text:u,parent:a,renderPlaceholder:n,renderLeaf:l=s=>z.createElement(On,Object.assign({},s))}=e,o=R.useRef(null),f=xe(),c=R.useRef(null);R.useEffect(()=>()=>{c.current&&c.current.disconnect()},[]),R.useEffect(()=>{var s=o==null?void 0:o.current;if(s?nr.set(f,s):nr.delete(f),c.current?(c.current.disconnect(),s&&c.current.observe(s)):s&&(c.current=new ResizeObserver(m=>{var[{target:E}]=m,b=or.get(f);if(b){var x="".concat(E.clientHeight,"px");b.innerHTML=':where([data-slate-editor-id="'.concat(f.id,'"]) { min-height: ').concat(x,"; }")}}),c.current.observe(s)),!s){var h=or.get(f);h&&(h.innerHTML="")}return()=>{nr.delete(f)}},[o,r]);var d=z.createElement(An,{isLast:t,leaf:r,parent:a,text:u});if(r[ze]){var g={children:r.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:o}};d=z.createElement(z.Fragment,null,n(g),d)}var D={"data-slate-leaf":!0};return l({attributes:D,children:d,leaf:r,text:u})},bn=z.memo(wn,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&r.text===e.text&&j.equals(r.leaf,e.leaf)&&r.leaf[ze]===e.leaf[ze]),On=e=>{var{attributes:r,children:t}=e;return z.createElement("span",Object.assign({},r),t)},yn=e=>{for(var{decorations:r,isLast:t,parent:u,renderPlaceholder:a,renderLeaf:n,text:l}=e,o=xe(),f=R.useRef(null),c=j.decorations(l,r),d=p.findKey(o,l),g=[],D=0;D<c.length;D++){var s=c[D];g.push(z.createElement(bn,{isLast:t&&D===c.length-1,key:"".concat(d.id,"-").concat(D),renderPlaceholder:a,leaf:s,text:l,parent:u,renderLeaf:n}))}return Re(()=>{var h=vr.get(o);f.current?(h==null||h.set(d,f.current),He.set(l,f.current),Dr.set(f.current,l)):(h==null||h.delete(d),He.delete(l))}),z.createElement("span",{"data-slate-node":"text",ref:f},g)},tu=z.memo(yn,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.text===e.text&&ru(r.decorations,e.decorations)),xn=e=>{var{decorations:r,element:t,renderElement:u=x=>z.createElement(Pn,Object.assign({},x)),renderPlaceholder:a,renderLeaf:n,selection:l}=e,o=xe(),f=Tn(),c=o.isInline(t),d=p.findKey(o,t),g=R.useCallback(x=>{var T=vr.get(o);x?(T==null||T.set(d,x),He.set(t,x),Dr.set(x,t)):(T==null||T.delete(d),He.delete(t))},[o,d,t]),D=nu({decorations:r,node:t,renderElement:u,renderPlaceholder:a,renderLeaf:n,selection:l}),s={"data-slate-node":"element",ref:g};if(c&&(s["data-slate-inline"]=!0),!c&&i.hasInlines(o,t)){var h=O.string(t),m=qt(h);m==="rtl"&&(s.dir=m)}if(i.isVoid(o,t)){s["data-slate-void"]=!0,!f&&c&&(s.contentEditable=!1);var E=c?"span":"div",[[b]]=O.texts(t);D=z.createElement(E,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},z.createElement(tu,{renderPlaceholder:a,decorations:[],isLast:!1,parent:t,text:b})),Wr.set(b,0),_r.set(b,t)}return u({attributes:s,children:D,element:t})},kn=z.memo(xn,(e,r)=>e.element===r.element&&e.renderElement===r.renderElement&&e.renderLeaf===r.renderLeaf&&ru(e.decorations,r.decorations)&&(e.selection===r.selection||!!e.selection&&!!r.selection&&B.equals(e.selection,r.selection))),Pn=e=>{var{attributes:r,children:t,element:u}=e,a=xe(),n=a.isInline(u)?"span":"div";return z.createElement(n,Object.assign({},r,{style:{position:"relative"}}),t)},uu=R.createContext(()=>[]),Sn=()=>R.useContext(uu),au=R.createContext(!1),ms=()=>R.useContext(au),nu=e=>{for(var{decorations:r,node:t,renderElement:u,renderPlaceholder:a,renderLeaf:n,selection:l}=e,o=Sn(),f=xe(),c=p.findPath(f,t),d=[],g=re.isElement(t)&&!f.isInline(t)&&i.hasInlines(f,t),D=0;D<t.children.length;D++){var s=c.concat(D),h=t.children[D],m=p.findKey(f,h),E=i.range(f,s),b=l&&B.intersection(E,l),x=o([h,s]);for(var T of r){var L=B.intersection(T,E);L&&x.push(L)}re.isElement(h)?d.push(z.createElement(au.Provider,{key:"provider-".concat(m.id),value:!!b},z.createElement(kn,{decorations:x,element:h,key:m.id,renderElement:u,renderPlaceholder:a,renderLeaf:n,selection:b}))):d.push(z.createElement(tu,{decorations:x,key:m.id,isLast:g&&D===t.children.length-1,parent:t,renderPlaceholder:a,renderLeaf:n,text:h})),Wr.set(h,D),_r.set(h,t)}return d},su=R.createContext(!1),Tn=()=>R.useContext(su),iu=R.createContext(null),Rn=()=>{var e=R.useContext(iu);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:r}=e;return r},Mn=3,In={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Nn={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},jn={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},se=e=>{var r=In[e],t=Nn[e],u=jn[e],a=r&&pr(r),n=t&&pr(t),l=u&&pr(u);return o=>!!(a&&a(o)||Ot&&n&&n(o)||!Ot&&l&&l(o))},ie={isBold:se("bold"),isCompose:se("compose"),isMoveBackward:se("moveBackward"),isMoveForward:se("moveForward"),isDeleteBackward:se("deleteBackward"),isDeleteForward:se("deleteForward"),isDeleteLineBackward:se("deleteLineBackward"),isDeleteLineForward:se("deleteLineForward"),isDeleteWordBackward:se("deleteWordBackward"),isDeleteWordForward:se("deleteWordForward"),isExtendBackward:se("extendBackward"),isExtendForward:se("extendForward"),isExtendLineBackward:se("extendLineBackward"),isExtendLineForward:se("extendLineForward"),isItalic:se("italic"),isMoveLineBackward:se("moveLineBackward"),isMoveLineForward:se("moveLineForward"),isMoveWordBackward:se("moveWordBackward"),isMoveWordForward:se("moveWordForward"),isRedo:se("redo"),isSoftBreak:se("insertSoftBreak"),isSplitBlock:se("splitBlock"),isTransposeCharacter:se("transposeCharacter"),isUndo:se("undo")},Ln=(e,r)=>{var t=[],u=()=>{t=[]},a=l=>{if(r.current){var o=l.filter(f=>$r(e,f,l));t.push(...o)}};function n(){t.reverse().forEach(l=>{if(l.type==="characterData"){l.target.textContent=l.oldValue;return}l.removedNodes.forEach(o=>{l.target.insertBefore(o,l.nextSibling)}),l.addedNodes.forEach(o=>{l.target.removeChild(o)})}),u()}return{registerMutations:a,restoreDOM:n,clear:u}},Wn={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class lu extends R.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var r,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(r=this.mutationObserver)===null||r===void 0||r.observe(t.current,Wn)}componentDidMount(){var{receivedUserInput:r}=this.props,t=this.context;this.manager=Ln(t,r),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var r,t,u,a=(r=this.mutationObserver)===null||r===void 0?void 0:r.takeRecords();if(a!=null&&a.length){var n;(n=this.manager)===null||n===void 0||n.registerMutations(a)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(u=this.manager)===null||u===void 0||u.restoreDOM(),null}componentDidUpdate(){var r;(r=this.manager)===null||r===void 0||r.clear(),this.observe()}componentWillUnmount(){var r;(r=this.mutationObserver)===null||r===void 0||r.disconnect()}render(){return this.props.children}}lu.contextType=Hr;var _n=Be?lu:e=>{var{children:r}=e;return z.createElement(z.Fragment,null,r)};function qn(e,r){var{path:t,diff:u}=r;if(!i.hasPath(e,t))return!1;var a=O.get(e,t);if(!j.isText(a))return!1;if(u.start!==a.text.length||u.text.length===0)return a.text.slice(u.start,u.start+u.text.length)===u.text;var n=v.next(t);if(!i.hasPath(e,n))return!1;var l=O.get(e,n);return j.isText(l)&&l.text.startsWith(u.text)}function Vn(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),u=1;u<r;u++)t[u-1]=arguments[u];return t.reduce((a,n)=>a.slice(0,n.start)+n.text+a.slice(n.end),e)}function $n(e,r){for(var t=Math.min(e.length,r.length),u=0;u<t;u++)if(e.charAt(u)!==r.charAt(u))return u;return t}function Hn(e,r,t){for(var u=Math.min(e.length,r.length,t),a=0;a<u;a++)if(e.charAt(e.length-a-1)!==r.charAt(r.length-a-1))return a;return u}function ou(e,r){var{start:t,end:u,text:a}=r,n=e.slice(t,u),l=$n(n,a),o=Math.min(n.length-l,a.length-l),f=Hn(n,a,o),c={start:t+l,end:u-f,text:a.slice(l,a.length-f)};return c.start===c.end&&c.text.length===0?null:c}function zn(e,r,t){var u=Math.min(r.start,t.start),a=Math.max(0,Math.min(r.start+r.text.length,t.end)-t.start),n=Vn(e,r,t),l=Math.max(t.start+t.text.length,r.start+r.text.length+(r.start+r.text.length>t.start?t.text.length:0)-a),o=n.slice(u,l),f=Math.max(r.end,t.end-r.text.length+(r.end-r.start));return ou(e,{start:u,end:f,text:o})}function Kn(e){var{path:r,diff:t}=e;return{anchor:{path:r,offset:t.start},focus:{path:r,offset:t.end}}}function Sr(e,r){var{path:t,offset:u}=r;if(!i.hasPath(e,t))return null;var a=O.get(e,t);if(!j.isText(a))return null;var n=i.above(e,{match:o=>i.isBlock(e,o),at:t});if(!n)return null;for(;u>a.text.length;){var l=i.next(e,{at:t,match:j.isText});if(!l||!v.isDescendant(l[1],n[1]))return null;u-=a.text.length,a=l[0],t=l[1]}return{path:t,offset:u}}function xt(e,r){var t=Sr(e,r.anchor);if(!t)return null;if(B.isCollapsed(r))return{anchor:t,focus:t};var u=Sr(e,r.focus);return u?{anchor:t,focus:u}:null}function Tr(e,r,t){var u=de.get(e),a=u==null?void 0:u.find(d=>{var{path:g}=d;return v.equals(g,r.path)});if(!a||r.offset<=a.diff.start)return Y.transform(r,t,{affinity:"backward"});var{diff:n}=a;if(r.offset<=n.start+n.text.length){var l={path:r.path,offset:n.start},o=Y.transform(l,t,{affinity:"backward"});return o?{path:o.path,offset:o.offset+r.offset-n.start}:null}var f={path:r.path,offset:r.offset-n.text.length+n.end-n.start},c=Y.transform(f,t,{affinity:"backward"});return c?t.type==="split_node"&&v.equals(t.path,r.path)&&f.offset<t.position&&n.start<t.position?c:{path:c.path,offset:c.offset+n.text.length-n.end+n.start}:null}function kt(e,r,t){var u=Tr(e,r.anchor,t);if(!u)return null;if(B.isCollapsed(r))return{anchor:u,focus:u};var a=Tr(e,r.focus,t);return a?{anchor:u,focus:a}:null}function Un(e,r){var{path:t,diff:u,id:a}=e;switch(r.type){case"insert_text":return!v.equals(r.path,t)||r.offset>=u.end?e:r.offset<=u.start?{diff:{start:r.text.length+u.start,end:r.text.length+u.end,text:u.text},id:a,path:t}:{diff:{start:u.start,end:u.end+r.text.length,text:u.text},id:a,path:t};case"remove_text":return!v.equals(r.path,t)||r.offset>=u.end?e:r.offset+r.text.length<=u.start?{diff:{start:u.start-r.text.length,end:u.end-r.text.length,text:u.text},id:a,path:t}:{diff:{start:u.start,end:u.end-r.text.length,text:u.text},id:a,path:t};case"split_node":return!v.equals(r.path,t)||r.position>=u.end?{diff:u,id:a,path:v.transform(t,r,{affinity:"backward"})}:r.position>u.start?{diff:{start:u.start,end:Math.min(r.position,u.end),text:u.text},id:a,path:t}:{diff:{start:u.start-r.position,end:u.end-r.position,text:u.text},id:a,path:v.transform(t,r,{affinity:"forward"})};case"merge_node":return v.equals(r.path,t)?{diff:{start:u.start+r.position,end:u.end+r.position,text:u.text},id:a,path:v.transform(t,r)}:{diff:u,id:a,path:v.transform(t,r)}}var n=v.transform(t,r);return n?{diff:u,path:n,id:a}:null}function Pt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function tr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Pt(Object(t),!0).forEach(function(u){cr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Yn=25,Gn=200,Zn=function(){};function Xn(e){var{editor:r,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:u}=e,a=!1,n=null,l=null,o=null,f=0,c=!1,d=()=>{var M=ye.get(r);if(ye.delete(r),M){var{selection:P}=r,N=xt(r,M);N&&(!P||!B.equals(N,P))&&w.select(r,N)}},g=()=>{var M=Oe.get(r);if(Oe.delete(r),!!M){if(M.at){var P=Y.isPoint(M.at)?Sr(r,M.at):xt(r,M.at);if(!P)return;var N=i.range(r,P);(!r.selection||!B.equals(r.selection,N))&&w.select(r,P)}M.run()}},D=()=>{var M;if(l&&(clearTimeout(l),l=null),o&&(clearTimeout(o),o=null),!L()&&!T()){d();return}a||(a=!0,setTimeout(()=>a=!1)),T()&&(a="action");var P=r.selection&&i.rangeRef(r,r.selection,{affinity:"forward"});pe.set(r,r.marks),Zn("flush",Oe.get(r),de.get(r));for(var N=!!((M=de.get(r))!==null&&M!==void 0&&M.length),S;S=(Z=de.get(r))===null||Z===void 0?void 0:Z[0];){var Z,C,F=ge.get(r);F!==void 0&&(ge.delete(r),r.marks=F),F&&c===!1&&(c=null);var A=Kn(S);(!r.selection||!B.equals(r.selection,A))&&w.select(r,A),S.diff.text?i.insertText(r,S.diff.text):i.deleteFragment(r),de.set(r,(C=de.get(r))===null||C===void 0?void 0:C.filter(U=>{var{id:V}=U;return V!==S.id})),qn(r,S)||(N=!1,Oe.delete(r),pe.delete(r),a="action",ye.delete(r),t.cancel(),u.cancel(),P==null||P.unref())}var W=P==null?void 0:P.unref();if(W&&!ye.get(r)&&(!r.selection||!B.equals(W,r.selection))&&w.select(r,W),T()){g();return}N&&t(),t.flush(),u.flush(),d();var $=pe.get(r);pe.delete(r),$!==void 0&&(r.marks=$,r.onChange())},s=M=>{n&&clearTimeout(n),n=setTimeout(()=>{Te.set(r,!1),D()},Yn)},h=M=>{Te.set(r,!0),n&&(clearTimeout(n),n=null)},m=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,N=nr.get(r);if(N){if(L()||P){N.style.display="none";return}N.style.removeProperty("display")}},E=(M,P)=>{var N,S=(N=de.get(r))!==null&&N!==void 0?N:[];de.set(r,S);var Z=O.leaf(r,M),C=S.findIndex(W=>v.equals(W.path,M));if(C<0){var F=ou(Z.text,P);F&&S.push({path:M,diff:P,id:f++}),m();return}var A=zn(Z.text,S[C].diff,P);if(!A){S.splice(C,1),m();return}S[C]=tr(tr({},S[C]),{},{diff:A})},b=function(P){var{at:N}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,ye.delete(r),t.cancel(),u.cancel(),T()&&D(),Oe.set(r,{at:N,run:P}),o=setTimeout(D)},x=M=>{var P;l&&(clearTimeout(l),l=null);var{inputType:N}=M,S=null,Z=M.dataTransfer||M.data||void 0;c!==!1&&N!=="insertText"&&N!=="insertCompositionText"&&(c=!1);var[C]=M.getTargetRanges();C&&(S=p.toSlateRange(r,C,{exactMatch:!1,suppressThrow:!0}));var F=p.getWindow(r),A=F.getSelection();if(!S&&A&&(C=A,S=p.toSlateRange(r,A,{exactMatch:!1,suppressThrow:!0})),S=(P=S)!==null&&P!==void 0?P:r.selection,!!S){if(B.isExpanded(S)&&N.startsWith("delete")){var[W,$]=B.edges(S),U=O.leaf(r,W.path);if(U.text.length===W.offset&&$.offset===0){var V=i.next(r,{at:W.path,match:j.isText});V&&v.equals(V[1],$.path)&&(S={anchor:$,focus:$})}}if(B.isExpanded(S)&&N.startsWith("delete")){if(v.equals(S.anchor.path,S.focus.path)){var[G,ee]=B.edges(S);return E(S.anchor.path,{text:"",end:ee.offset,start:G.offset})}var X=N.endsWith("Backward")?"backward":"forward";return b(()=>i.deleteFragment(r,{direction:X}),{at:S})}switch(N){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return b(()=>i.deleteFragment(r),{at:S});case"deleteContent":case"deleteContentForward":{var{anchor:J}=S;if(B.isCollapsed(S)){var le=O.leaf(r,J.path);if(J.offset<le.text.length)return E(J.path,{text:"",start:J.offset,end:J.offset+1})}return b(()=>i.deleteForward(r),{at:S})}case"deleteContentBackward":{var ue,{anchor:oe}=S,te=kr(C)?C.isCollapsed:!!((ue=C)!==null&&ue!==void 0&&ue.collapsed);return te&&B.isCollapsed(S)&&oe.offset>0?E(oe.path,{text:"",start:oe.offset-1,end:oe.offset}):b(()=>i.deleteBackward(r),{at:S})}case"deleteEntireSoftLine":return b(()=>{i.deleteBackward(r,{unit:"line"}),i.deleteForward(r,{unit:"line"})},{at:S});case"deleteHardLineBackward":return b(()=>i.deleteBackward(r,{unit:"block"}),{at:S});case"deleteSoftLineBackward":return b(()=>i.deleteBackward(r,{unit:"line"}),{at:S});case"deleteHardLineForward":return b(()=>i.deleteForward(r,{unit:"block"}),{at:S});case"deleteSoftLineForward":return b(()=>i.deleteForward(r,{unit:"line"}),{at:S});case"deleteWordBackward":return b(()=>i.deleteBackward(r,{unit:"word"}),{at:S});case"deleteWordForward":return b(()=>i.deleteForward(r,{unit:"word"}),{at:S});case"insertLineBreak":return b(()=>i.insertSoftBreak(r),{at:S});case"insertParagraph":return b(()=>i.insertBreak(r),{at:S});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if((Z==null?void 0:Z.constructor.name)==="DataTransfer")return b(()=>p.insertData(r,Z),{at:S});if(typeof Z=="string"&&Z.includes(`
`))return b(()=>i.insertSoftBreak(r),{at:B.end(S)});var fe=Z??"";if(ge.get(r)&&(fe=fe.replace("\uFEFF","")),v.equals(S.anchor.path,S.focus.path)){var[ae,we]=B.edges(S),he={start:ae.offset,end:we.offset,text:fe};if(fe&&c&&N==="insertCompositionText"){var Ie=c.start+c.text.search(/\S|$/),Ke=he.start+he.text.search(/\S|$/);Ke===Ie+1&&he.end===c.start+c.text.length?(he.start-=1,c=null,K()):c=!1}else N==="insertText"?c===null?c=he:c&&B.isCollapsed(S)&&c.end+c.text.length===ae.offset?c=tr(tr({},c),{},{text:c.text+fe}):c=!1:c=!1;E(ae.path,he);return}return b(()=>i.insertText(r,fe),{at:S})}}}},T=()=>!!Oe.get(r),L=()=>{var M;return!!((M=de.get(r))!==null&&M!==void 0&&M.length)},I=()=>T()||L(),y=()=>a,_=M=>{ye.set(r,M),l&&(clearTimeout(l),l=null);var{selection:P}=r;if(M){var N=!P||!v.equals(P.anchor.path,M.anchor.path),S=!P||!v.equals(P.anchor.path.slice(0,-1),M.anchor.path.slice(0,-1));(N&&c||S)&&(c=!1),(N||!L())&&(l=setTimeout(D,Gn))}},k=()=>{(T()||!L())&&D()},q=M=>{L()||(m(!0),setTimeout(m))},K=()=>{T()||(o=setTimeout(D))},Q=M=>{if(!(L()||T())&&M.some(N=>$r(r,N,M))){var P;(P=Gt.get(r))===null||P===void 0||P()}};return{flush:D,scheduleFlush:K,hasPendingDiffs:L,hasPendingAction:T,hasPendingChanges:I,isFlushing:y,handleUserSelect:_,handleCompositionEnd:s,handleCompositionStart:h,handleDOMBeforeInput:x,handleKeyDown:q,handleDomMutations:Q,handleInput:k}}function Jn(){var e=R.useRef(!1);return R.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}function Qn(e,r,t){var[u]=R.useState(()=>new MutationObserver(r));Re(()=>{u.takeRecords()}),R.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return u.observe(e.current,t),()=>u.disconnect()},[])}var es=["node"];function St(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function rs(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?St(Object(t),!0).forEach(function(u){cr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):St(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var ts={subtree:!0,childList:!0,characterData:!0};function us(e){var{node:r}=e,t=$e(e,es);if(!Be)return null;var u=xe(),a=Jn(),[n]=R.useState(()=>Xn(rs({editor:u},t)));return Qn(r,n.handleDomMutations,ts),qr.set(u,n.scheduleFlush),a&&n.flush(),n}function as(){var e=xe(),r=R.useRef(!1),t=R.useRef(0),u=R.useCallback(()=>{if(!r.current){r.current=!0;var a=p.getWindow(e);a.cancelAnimationFrame(t.current),t.current=a.requestAnimationFrame(()=>{r.current=!1})}},[]);return R.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:r,onUserInput:u}}var ns=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"],ss=["text"];function Tt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function wr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Tt(Object(t),!0).forEach(function(u){cr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tt(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var is=e=>z.createElement(z.Fragment,null,nu(e)),ur=0,Es=e=>{var{autoFocus:r,decorate:t=os,onDOMBeforeInput:u,placeholder:a,readOnly:n=!1,renderElement:l,renderLeaf:o,renderPlaceholder:f=C=>z.createElement(ls,Object.assign({},C)),scrollSelectionIntoView:c=fs,style:d={},as:g="div"}=e,D=$e(e,ns),s=Rn(),[h,m]=R.useState(!1),E=R.useRef(null),b=R.useRef([]),{onUserInput:x,receivedUserInput:T}=as(),[,L]=R.useReducer(C=>C+1,0);Gt.set(s,L),yr.set(s,n);var I=R.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);R.useEffect(()=>{E.current&&r&&E.current.focus()},[r]);var y=R.useCallback(Ua(()=>{if((Be||!p.isComposing(s))&&(!I.isUpdatingSelection||k!=null&&k.isFlushing())&&!I.isDraggingInternally){var C=p.findDocumentOrShadowRoot(s),{activeElement:F}=C,A=p.toDOMNode(s,s),W=C.getSelection();if(F===A?(I.latestElement=F,Se.set(s,!0)):Se.delete(s),!W)return w.deselect(s);var{anchorNode:$,focusNode:U}=W,V=p.hasEditableTarget(s,$)||p.isTargetInsideNonReadonlyVoid(s,$),G=p.hasEditableTarget(s,U)||p.isTargetInsideNonReadonlyVoid(s,U);if(V&&G){var ee=p.toSlateRange(s,W,{exactMatch:!1,suppressThrow:!0});ee&&(!p.isComposing(s)&&!(k!=null&&k.hasPendingChanges())&&!(k!=null&&k.isFlushing())?w.select(s,ee):k==null||k.handleUserSelect(ee))}n&&(!V||!G)&&w.deselect(s)}},100),[n]),_=R.useMemo(()=>qa(y,0),[y]),k=us({node:E,onDOMSelectionChange:y,scheduleOnDOMSelectionChange:_});Re(()=>{var C;E.current&&(C=Vr(E.current))?(Yt.set(s,C),br.set(s,E.current),He.set(s,E.current),Dr.set(E.current,s)):He.delete(s);var{selection:F}=s,A=p.findDocumentOrShadowRoot(s),W=A.getSelection();if(!(!W||!p.isFocused(s)||k!=null&&k.hasPendingAction())){var $=X=>{var J=W.type!=="None";if(!(!F&&!J)){var le=br.get(s),ue=!1;if(le.contains(W.anchorNode)&&le.contains(W.focusNode)&&(ue=!0),J&&ue&&F&&!X){var oe=p.toSlateRange(s,W,{exactMatch:!0,suppressThrow:!0});if(oe&&B.equals(oe,F)){var te;if(!I.hasMarkPlaceholder)return;var{anchorNode:fe}=W;if(fe!=null&&(te=fe.parentElement)!==null&&te!==void 0&&te.hasAttribute("data-slate-mark-placeholder"))return}}if(F&&!p.hasRange(s,F)){s.selection=p.toSlateRange(s,W,{exactMatch:!1,suppressThrow:!0});return}I.isUpdatingSelection=!0;var ae=F&&p.toDOMRange(s,F);return ae?(B.isBackward(F)?W.setBaseAndExtent(ae.endContainer,ae.endOffset,ae.startContainer,ae.startOffset):W.setBaseAndExtent(ae.startContainer,ae.startOffset,ae.endContainer,ae.endOffset),c(s,ae)):W.removeAllRanges(),ae}},U=$(),V=(k==null?void 0:k.isFlushing())==="action";if(!Be||!V){setTimeout(()=>{if(U&&Pr){var X=p.toDOMNode(s,s);X.focus()}I.isUpdatingSelection=!1});return}var G=null,ee=requestAnimationFrame(()=>{if(V){var X=J=>{try{var le=p.toDOMNode(s,s);le.focus(),$(J)}catch{}};X(),G=setTimeout(()=>{X(!0),I.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(ee),G&&clearTimeout(G)}}});var q=R.useCallback(C=>{if(x(),!n&&p.hasEditableTarget(s,C.target)&&!cs(C,u)){var F;if(k)return k.handleDOMBeforeInput(C);_.flush(),y.flush();var{selection:A}=s,{inputType:W}=C,$=C.dataTransfer||C.data||void 0,U=W==="insertCompositionText"||W==="deleteCompositionText";if(U&&p.isComposing(s))return;var V=!1;if(W==="insertText"&&A&&B.isCollapsed(A)&&C.data&&C.data.length===1&&/[a-z ]/i.test(C.data)&&A.anchor.offset!==0){var G,ee;V=!0,s.marks&&(V=!1);var{anchor:X}=A,[J,le]=p.toDOMPoint(s,X),ue=(G=J.parentElement)===null||G===void 0?void 0:G.closest("a"),oe=p.getWindow(s);if(V&&ue&&p.hasDOMNode(s,ue)){var te,fe=oe==null?void 0:oe.document.createTreeWalker(ue,NodeFilter.SHOW_TEXT).lastChild();fe===J&&((te=fe.textContent)===null||te===void 0?void 0:te.length)===le&&(V=!1)}if(V&&J.parentElement&&(oe==null||(ee=oe.getComputedStyle(J.parentElement))===null||ee===void 0?void 0:ee.whiteSpace)==="pre"){var ae=i.above(s,{at:X.path,match:dr=>i.isBlock(s,dr)});ae&&O.string(ae[0]).includes("	")&&(V=!1)}}if(!W.startsWith("delete")||W.startsWith("deleteBy")){var[we]=C.getTargetRanges();if(we){var he=p.toSlateRange(s,we,{exactMatch:!1,suppressThrow:!1});if(!A||!B.equals(A,he)){V=!1;var Ie=!U&&s.selection&&i.rangeRef(s,s.selection);w.select(s,he),Ie&&Ze.set(s,Ie)}}}if(U)return;if(V||C.preventDefault(),A&&B.isExpanded(A)&&W.startsWith("delete")){var Ke=W.endsWith("Backward")?"backward":"forward";i.deleteFragment(s,{direction:Ke});return}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{i.deleteFragment(s);break}case"deleteContent":case"deleteContentForward":{i.deleteForward(s);break}case"deleteContentBackward":{i.deleteBackward(s);break}case"deleteEntireSoftLine":{i.deleteBackward(s,{unit:"line"}),i.deleteForward(s,{unit:"line"});break}case"deleteHardLineBackward":{i.deleteBackward(s,{unit:"block"});break}case"deleteSoftLineBackward":{i.deleteBackward(s,{unit:"line"});break}case"deleteHardLineForward":{i.deleteForward(s,{unit:"block"});break}case"deleteSoftLineForward":{i.deleteForward(s,{unit:"line"});break}case"deleteWordBackward":{i.deleteBackward(s,{unit:"word"});break}case"deleteWordForward":{i.deleteForward(s,{unit:"word"});break}case"insertLineBreak":i.insertSoftBreak(s);break;case"insertParagraph":{i.insertBreak(s);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{W==="insertFromComposition"&&p.isComposing(s)&&(m(!1),Te.set(s,!1)),($==null?void 0:$.constructor.name)==="DataTransfer"?p.insertData(s,$):typeof $=="string"&&(V?b.current.push(()=>i.insertText(s,$)):i.insertText(s,$));break}}var Ne=(F=Ze.get(s))===null||F===void 0?void 0:F.unref();Ze.delete(s),Ne&&(!s.selection||!B.equals(s.selection,Ne))&&w.select(s,Ne)}},[n,u]);Re(()=>(E.current&&be&&E.current.addEventListener("beforeinput",q),()=>{E.current&&be&&E.current.removeEventListener("beforeinput",q)}),[q]),Re(()=>{var C=p.getWindow(s);return C.document.addEventListener("selectionchange",_),()=>{C.document.removeEventListener("selectionchange",_)}},[_]);var K=t([s,[]]);if(a&&s.children.length===1&&Array.from(O.texts(s)).length===1&&O.string(s)===""&&!h){var Q=i.start(s,[]);K.push({[ze]:!0,placeholder:a,anchor:Q,focus:Q})}var{marks:M}=s;if(I.hasMarkPlaceholder=!1,s.selection&&B.isCollapsed(s.selection)&&M){var{anchor:P}=s.selection,N=O.leaf(s,P.path),S=$e(N,ss);if(!j.equals(N,M,{loose:!0})){I.hasMarkPlaceholder=!0;var Z=Object.fromEntries(Object.keys(S).map(C=>[C,null]));K.push(wr(wr(wr({[Zt]:!0},Z),M),{},{anchor:P,focus:P}))}}return R.useEffect(()=>{setTimeout(()=>{var{selection:C}=s;if(C){var{anchor:F}=C,A=O.leaf(s,F.path);if(M&&!j.equals(A,M,{loose:!0})){ge.set(s,M);return}}ge.delete(s)})}),R.useEffect(()=>{if(ur++,ur===1){var C=document.createElement("style");C.setAttribute("data-slate-default-styles","true"),C.innerHTML=":where([data-slate-editor]) {position: relative;outline: none;white-space: pre-wrap;word-wrap: break-word;}",document.head.appendChild(C)}return()=>{var F;ur--,ur<=0&&((F=document.querySelector("style[data-slate-default-styles]"))===null||F===void 0||F.remove())}},[]),R.useEffect(()=>{var C=document.createElement("style");return document.head.appendChild(C),or.set(s,C),()=>{C.remove(),or.delete(s)}},[]),z.createElement(su.Provider,{value:n},z.createElement(uu.Provider,{value:t},z.createElement(_n,{node:E,receivedUserInput:T},z.createElement(g,Object.assign({role:n?void 0:"textbox","aria-multiline":n?void 0:!0},D,{spellCheck:be||!sr?D.spellCheck:!1,autoCorrect:be||!sr?D.autoCorrect:"false",autoCapitalize:be||!sr?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-editor-id":s.id,"data-slate-node":"value",contentEditable:!n,zindex:-1,suppressContentEditableWarning:!0,ref:E,style:d,onBeforeInput:R.useCallback(C=>{if(!be&&!n&&!ve(C,D.onBeforeInput)&&p.hasSelectableTarget(s,C.target)&&(C.preventDefault(),!p.isComposing(s))){var F=C.data;i.insertText(s,F)}},[n]),onInput:R.useCallback(C=>{if(k){k.handleInput();return}for(var F of b.current)F();b.current=[]},[]),onBlur:R.useCallback(C=>{if(!(n||I.isUpdatingSelection||!p.hasSelectableTarget(s,C.target)||ve(C,D.onBlur))){var F=p.findDocumentOrShadowRoot(s);if(I.latestElement!==F.activeElement){var{relatedTarget:A}=C,W=p.toDOMNode(s,s);if(A!==W&&!(Ce(A)&&A.hasAttribute("data-slate-spacer"))){if(A!=null&&Me(A)&&p.hasDOMNode(s,A)){var $=p.toSlateNode(s,A);if(re.isElement($)&&!s.isVoid($))return}if(Fr){var U=F.getSelection();U==null||U.removeAllRanges()}Se.delete(s)}}}},[n,D.onBlur]),onClick:R.useCallback(C=>{if(p.hasTarget(s,C.target)&&!ve(C,D.onClick)&&Me(C.target)){var F=p.toSlateNode(s,C.target),A=p.findPath(s,F);if(!i.hasPath(s,A)||O.get(s,A)!==F)return;if(C.detail===Mn&&A.length>=1){var W=A;if(!i.isBlock(s,F)){var $,U=i.above(s,{match:ue=>i.isBlock(s,ue),at:A});W=($=U==null?void 0:U[1])!==null&&$!==void 0?$:A.slice(0,1)}var V=i.range(s,W);w.select(s,V);return}if(n)return;var G=i.start(s,A),ee=i.end(s,A),X=i.void(s,{at:G}),J=i.void(s,{at:ee});if(X&&J&&v.equals(X[1],J[1])){var le=i.range(s,G);w.select(s,le)}}},[n,D.onClick]),onCompositionEnd:R.useCallback(C=>{if(p.hasSelectableTarget(s,C.target)){if(p.isComposing(s)&&(m(!1),Te.set(s,!1)),k==null||k.handleCompositionEnd(C),ve(C,D.onCompositionEnd)||Be)return;if(!Fr&&!gn&&!dn&&!mn&&!Bn&&C.data){var F=ge.get(s);ge.delete(s),F!==void 0&&(pe.set(s,s.marks),s.marks=F),i.insertText(s,C.data);var A=pe.get(s);pe.delete(s),A!==void 0&&(s.marks=A)}}},[D.onCompositionEnd]),onCompositionUpdate:R.useCallback(C=>{p.hasSelectableTarget(s,C.target)&&!ve(C,D.onCompositionUpdate)&&(p.isComposing(s)||(m(!0),Te.set(s,!0)))},[D.onCompositionUpdate]),onCompositionStart:R.useCallback(C=>{if(p.hasSelectableTarget(s,C.target)){if(k==null||k.handleCompositionStart(C),ve(C,D.onCompositionStart)||Be)return;m(!0);var{selection:F}=s;if(F){if(B.isExpanded(F)){i.deleteFragment(s);return}var A=i.above(s,{match:U=>i.isInline(s,U),mode:"highest"});if(A){var[,W]=A;if(i.isEnd(s,F.anchor,W)){var $=i.after(s,W);w.setSelection(s,{anchor:$,focus:$})}}}}},[D.onCompositionStart]),onCopy:R.useCallback(C=>{p.hasSelectableTarget(s,C.target)&&!ve(C,D.onCopy)&&(C.preventDefault(),p.setFragmentData(s,C.clipboardData,"copy"))},[D.onCopy]),onCut:R.useCallback(C=>{if(!n&&p.hasSelectableTarget(s,C.target)&&!ve(C,D.onCut)){C.preventDefault(),p.setFragmentData(s,C.clipboardData,"cut");var{selection:F}=s;if(F)if(B.isExpanded(F))i.deleteFragment(s);else{var A=O.parent(s,F.anchor.path);i.isVoid(s,A)&&w.delete(s)}}},[n,D.onCut]),onDragOver:R.useCallback(C=>{if(p.hasTarget(s,C.target)&&!ve(C,D.onDragOver)){var F=p.toSlateNode(s,C.target);i.isVoid(s,F)&&C.preventDefault()}},[D.onDragOver]),onDragStart:R.useCallback(C=>{if(!n&&p.hasTarget(s,C.target)&&!ve(C,D.onDragStart)){var F=p.toSlateNode(s,C.target),A=p.findPath(s,F),W=i.isVoid(s,F)||i.void(s,{at:A,voids:!0});if(W){var $=i.range(s,A);w.select(s,$)}I.isDraggingInternally=!0,p.setFragmentData(s,C.dataTransfer,"drag")}},[n,D.onDragStart]),onDrop:R.useCallback(C=>{if(!n&&p.hasTarget(s,C.target)&&!ve(C,D.onDrop)){C.preventDefault();var F=s.selection,A=p.findEventRange(s,C),W=C.dataTransfer;w.select(s,A),I.isDraggingInternally&&F&&!B.equals(F,A)&&!i.void(s,{at:A,voids:!0})&&w.delete(s,{at:F}),p.insertData(s,W),p.isFocused(s)||p.focus(s)}I.isDraggingInternally=!1},[n,D.onDrop]),onDragEnd:R.useCallback(C=>{!n&&I.isDraggingInternally&&D.onDragEnd&&p.hasTarget(s,C.target)&&D.onDragEnd(C),I.isDraggingInternally=!1},[n,D.onDragEnd]),onFocus:R.useCallback(C=>{if(!n&&!I.isUpdatingSelection&&p.hasEditableTarget(s,C.target)&&!ve(C,D.onFocus)){var F=p.toDOMNode(s,s),A=p.findDocumentOrShadowRoot(s);if(I.latestElement=A.activeElement,Pr&&C.target!==F){F.focus();return}Se.set(s,!0)}},[n,D.onFocus]),onKeyDown:R.useCallback(C=>{if(!n&&p.hasEditableTarget(s,C.target)){k==null||k.handleKeyDown(C);var{nativeEvent:F}=C;if(p.isComposing(s)&&F.isComposing===!1&&(Te.set(s,!1),m(!1)),ve(C,D.onKeyDown)||p.isComposing(s))return;var{selection:A}=s,W=s.children[A!==null?A.focus.path[0]:0],$=qt(O.string(W))==="rtl";if(ie.isRedo(F)){C.preventDefault();var U=s;typeof U.redo=="function"&&U.redo();return}if(ie.isUndo(F)){C.preventDefault();var V=s;typeof V.undo=="function"&&V.undo();return}if(ie.isMoveLineBackward(F)){C.preventDefault(),w.move(s,{unit:"line",reverse:!0});return}if(ie.isMoveLineForward(F)){C.preventDefault(),w.move(s,{unit:"line"});return}if(ie.isExtendLineBackward(F)){C.preventDefault(),w.move(s,{unit:"line",edge:"focus",reverse:!0});return}if(ie.isExtendLineForward(F)){C.preventDefault(),w.move(s,{unit:"line",edge:"focus"});return}if(ie.isMoveBackward(F)){C.preventDefault(),A&&B.isCollapsed(A)?w.move(s,{reverse:!$}):w.collapse(s,{edge:"start"});return}if(ie.isMoveForward(F)){C.preventDefault(),A&&B.isCollapsed(A)?w.move(s,{reverse:$}):w.collapse(s,{edge:"end"});return}if(ie.isMoveWordBackward(F)){C.preventDefault(),A&&B.isExpanded(A)&&w.collapse(s,{edge:"focus"}),w.move(s,{unit:"word",reverse:!$});return}if(ie.isMoveWordForward(F)){C.preventDefault(),A&&B.isExpanded(A)&&w.collapse(s,{edge:"focus"}),w.move(s,{unit:"word",reverse:$});return}if(be){if((eu||Fr)&&A&&(ie.isDeleteBackward(F)||ie.isDeleteForward(F))&&B.isCollapsed(A)){var G=O.parent(s,A.anchor.path);if(re.isElement(G)&&i.isVoid(s,G)&&(i.isInline(s,G)||i.isBlock(s,G))){C.preventDefault(),i.deleteBackward(s,{unit:"block"});return}}}else{if(ie.isBold(F)||ie.isItalic(F)||ie.isTransposeCharacter(F)){C.preventDefault();return}if(ie.isSoftBreak(F)){C.preventDefault(),i.insertSoftBreak(s);return}if(ie.isSplitBlock(F)){C.preventDefault(),i.insertBreak(s);return}if(ie.isDeleteBackward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s);return}if(ie.isDeleteForward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s);return}if(ie.isDeleteLineBackward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s,{unit:"line"});return}if(ie.isDeleteLineForward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s,{unit:"line"});return}if(ie.isDeleteWordBackward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"backward"}):i.deleteBackward(s,{unit:"word"});return}if(ie.isDeleteWordForward(F)){C.preventDefault(),A&&B.isExpanded(A)?i.deleteFragment(s,{direction:"forward"}):i.deleteForward(s,{unit:"word"});return}}}},[n,D.onKeyDown]),onPaste:R.useCallback(C=>{!n&&p.hasSelectableTarget(s,C.target)&&!ve(C,D.onPaste)&&(!be||sn(C.nativeEvent))&&(C.preventDefault(),p.insertData(s,C.clipboardData))},[n,D.onPaste])}),z.createElement(is,{decorations:K,node:s,renderElement:l,renderPlaceholder:f,renderLeaf:o,selection:s.selection})))))},ls=e=>{var{attributes:r,children:t}=e;return z.createElement("span",Object.assign({},r),t,Be&&z.createElement("br",null))},os=()=>[],fs=(e,r)=>{if(r.getBoundingClientRect&&(!e.selection||e.selection&&B.isCollapsed(e.selection))){var t=r.startContainer.parentElement;t.getBoundingClientRect=r.getBoundingClientRect.bind(r),Za(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},ve=(e,r)=>{if(!r)return!1;var t=r(e);return t??(e.isDefaultPrevented()||e.isPropagationStopped())},cs=(e,r)=>{if(!r)return!1;var t=r(e);return t??e.defaultPrevented},fu=R.createContext(!1),ps=()=>R.useContext(fu),Ds=R.createContext({});function vs(e){var r=R.useRef([]).current,t=R.useRef({editor:e}).current,u=R.useCallback(n=>{t.editor=n,r.forEach(l=>l(n))},[]),a=R.useMemo(()=>({getSlate:()=>t.editor,addEventListener:n=>(r.push(n),()=>{r.splice(r.indexOf(n),1)})}),[r,t]);return{selectorContext:a,onChange:u}}var ds=["editor","children","onChange","value"],Fs=e=>{var{editor:r,children:t,onChange:u,value:a}=e,n=$e(e,ds),l=R.useRef(!1),[o,f]=z.useState(()=>{if(!O.isNodeList(a))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(ce.stringify(a)));if(!i.isEditor(r))throw new Error("[Slate] editor is invalid! You passed: ".concat(ce.stringify(r)));return r.children=a,Object.assign(r,n),{v:0,editor:r}}),{selectorContext:c,onChange:d}=vs(r),g=R.useCallback(()=>{u&&u(r.children),f(h=>({v:h.v+1,editor:r})),d(r)},[u]);xr.set(r,g),R.useEffect(()=>()=>{xr.set(r,()=>{}),l.current=!0},[]);var[D,s]=R.useState(p.isFocused(r));return R.useEffect(()=>{s(p.isFocused(r))}),Re(()=>{var h=()=>s(p.isFocused(r));return vn?(document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",h)}):(document.addEventListener("focus",h,!0),document.addEventListener("blur",h,!0),()=>{document.removeEventListener("focus",h,!0),document.removeEventListener("blur",h,!0)})},[]),z.createElement(Ds.Provider,{value:c},z.createElement(iu.Provider,{value:o},z.createElement(Hr.Provider,{value:o.editor},z.createElement(fu.Provider,{value:D},t))))},Rt=(e,r)=>{var t=(r.top+r.bottom)/2;return e.top<=t&&e.bottom>=t},Mt=(e,r,t)=>{var u=p.toDOMRange(e,r).getBoundingClientRect(),a=p.toDOMRange(e,t).getBoundingClientRect();return Rt(u,a)&&Rt(a,u)},Cs=(e,r)=>{var t=i.range(e,B.end(r)),u=Array.from(i.positions(e,{at:r})),a=0,n=u.length,l=Math.floor(n/2);if(Mt(e,i.range(e,u[a]),t))return i.range(e,u[a],t);if(u.length<2)return i.range(e,u[u.length-1],t);for(;l!==u.length&&l!==a;)Mt(e,i.range(e,u[l]),t)?n=l:a=l,l=Math.floor((a+n)/2);return i.range(e,u[n],t)};function It(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,u)}return t}function Nt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?It(Object(t),!0).forEach(function(u){cr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):It(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var As=e=>{var r=e,{apply:t,onChange:u,deleteBackward:a,addMark:n,removeMark:l}=r;return vr.set(r,new WeakMap),r.addMark=(o,f)=>{var c,d;(c=qr.get(r))===null||c===void 0||c(),!ge.get(r)&&(d=de.get(r))!==null&&d!==void 0&&d.length&&ge.set(r,null),pe.delete(r),n(o,f)},r.removeMark=o=>{var f;!ge.get(r)&&(f=de.get(r))!==null&&f!==void 0&&f.length&&ge.set(r,null),pe.delete(r),l(o)},r.deleteBackward=o=>{if(o!=="line")return a(o);if(r.selection&&B.isCollapsed(r.selection)){var f=i.above(r,{match:D=>i.isBlock(r,D),at:r.selection});if(f){var[,c]=f,d=i.range(r,c,r.selection.anchor),g=Cs(r,d);B.isCollapsed(g)||w.delete(r,{at:g})}}},r.apply=o=>{var f=[],c=de.get(r);if(c!=null&&c.length){var d=c.map(L=>Un(L,o)).filter(Boolean);de.set(r,d)}var g=ye.get(r);g&&ye.set(r,kt(r,g,o));var D=Oe.get(r);if(D!=null&&D.at){var s=Y.isPoint(D==null?void 0:D.at)?Tr(r,D.at,o):kt(r,D.at,o);Oe.set(r,s?Nt(Nt({},D),{},{at:s}):null)}switch(o.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...ar(r,o.path));break}case"set_selection":{var h;(h=Ze.get(r))===null||h===void 0||h.unref(),Ze.delete(r);break}case"insert_node":case"remove_node":{f.push(...ar(r,v.parent(o.path)));break}case"merge_node":{var m=v.previous(o.path);f.push(...ar(r,m));break}case"move_node":{var E=v.common(v.parent(o.path),v.parent(o.newPath));f.push(...ar(r,E));break}}t(o);for(var[b,x]of f){var[T]=i.node(r,b);Or.set(T,x)}},r.setFragmentData=o=>{var{selection:f}=r;if(f){var[c,d]=B.edges(f),g=i.void(r,{at:c.path}),D=i.void(r,{at:d.path});if(!(B.isCollapsed(f)&&!g)){var s=p.toDOMRange(r,f),h=s.cloneContents(),m=h.childNodes[0];if(h.childNodes.forEach(k=>{k.textContent&&k.textContent.trim()!==""&&(m=k)}),D){var[E]=D,b=s.cloneRange(),x=p.toDOMNode(r,E);b.setEndAfter(x),h=b.cloneContents()}if(g&&(m=h.querySelector("[data-slate-spacer]")),Array.from(h.querySelectorAll("[data-slate-zero-width]")).forEach(k=>{var q=k.getAttribute("data-slate-zero-width")==="n";k.textContent=q?`
`:""}),Xt(m)){var T=m.ownerDocument.createElement("span");T.style.whiteSpace="pre",T.appendChild(m),h.appendChild(T),m=T}var L=r.getFragment(),I=JSON.stringify(L),y=window.btoa(encodeURIComponent(I));m.setAttribute("data-slate-fragment",y),o.setData("application/x-slate-fragment",y);var _=h.ownerDocument.createElement("div");return _.appendChild(h),_.setAttribute("hidden","true"),h.ownerDocument.body.appendChild(_),o.setData("text/html",_.innerHTML),o.setData("text/plain",Qt(_)),h.ownerDocument.body.removeChild(_),o}}},r.insertData=o=>{r.insertFragmentData(o)||r.insertTextData(o)},r.insertFragmentData=o=>{var f=o.getData("application/x-slate-fragment")||Dn(o);if(f){var c=decodeURIComponent(window.atob(f)),d=JSON.parse(c);return r.insertFragment(d),!0}return!1},r.insertTextData=o=>{var f=o.getData("text/plain");if(f){var c=f.split(/\r\n|\r|\n/),d=!1;for(var g of c)d&&w.splitNodes(r,{always:!0}),r.insertText(g),d=!0;return!0}return!1},r.onChange=()=>{Eu.unstable_batchedUpdates(()=>{var o=xr.get(r);o&&o(),u()})},r},ar=(e,r)=>{var t=[];for(var[u,a]of i.levels(e,{at:r})){var n=p.findKey(e,u);t.push([a,n])}return t};export{i as E,Ge as O,v as P,p as R,Fs as S,w as T,Es as a,ps as b,Bs as c,xe as d,ms as e,De as i,Rn as u,As as w};
