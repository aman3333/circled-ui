import{e as D,a as W,u as Z,d as N,r as b,j as e,s as c,S as q,C as A,B as a,h as L,T as f,f as _,c as o,bg as R,o as r,n as J}from"./index-tWVfh1a_.js";import{P as K}from"./Page-D7TsOLpr.js";import{c as z,b as C,f as Q}from"./array-DbNmRnh0.js";import{u as G,F as H,a as M}from"./formik.esm-jmAInz8L.js";import{H as P}from"./footer-BJqjd-0J.js";import{L as X}from"./LabeledInput-B3Qf7l4R.js";import{H as k}from"./header-Bo2DC4uj.js";import{S as Y}from"./Footer-BU_S36Uf.js";import{S as ee}from"./Header-C-6_pkkN.js";import{L as V}from"./PasswordInput-D_vhx4J8.js";import{O as te}from"./index-DhwHdC5A.js";import{u as se}from"./useCountdown-DDX_p9lt.js";import"./isObject-MojUmidT.js";import"./Checkbox-5Xdp7ogM.js";import"./SwitchBase-Bs2jeD_h.js";import"./useFormControl-BEzaUW9U.js";import"./useControlled-DiwPEJyR.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./isMuiElement-CENM59Ut.js";import"./ArrowLeft-lA8HnlgG.js";import"./createSvgIcon-UmMwsC2Z.js";import"./InputAdornment-DiI_gVyu.js";const O=c("div")(()=>({display:"flex",flexDirection:"column",backgroundColor:"#fff",flex:1,flexGrow:1,height:"100vh"}));c(a)(()=>({position:"relative"}));c(a)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));function oe(n){const $=D(),t=W();Z(s=>s.Onboarding);const{state:j}=N(),[m,w]=b.useState(!1),[d,u]=b.useState(""),[h,y]=b.useState(""),E=s=>{const T=/^[0-9]*$/;let g=s.toString();T.test(g)&&u(g),g.length==0&&u("")},x=se(Date.now()+12e4),F=()=>{t(o({loading:!0})),R.post(`${r.protocol}${r.baseUrl}${r.verifyMail}`,{email:n.formEmail,token:d}).then(s=>{t(o({loading:!1,snackbar:!0,message:"Otp Verified!",severity:"success"})),w(!0),y(s.data)}).catch(s=>{if(s.response.status===406&&t(o({loading:!1,snackbar:!0,message:"Acccount with give email address already exists!",severity:"error"})),s.response.status===404)return t(o({loading:!1,snackbar:!0,message:"Invalid code!",severity:"error"}))})},B=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?])[A-Za-z\d!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]{8,}$/,p=z().shape({password:C().required("Password is required").matches(B,"Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),confirmPass:C().required("Confirm password is required").oneOf([Q("password"),null],"Passwords must match")}),v=G({initialValues:{password:"",confirmPass:""},validationSchema:p,onSubmit:async(s,{setErrors:T,setSubmitting:g})=>{t(o({loading:!0})),R.patch(`${r.protocol}${r.baseUrl}${r.changePassword}`,{Email:n.formEmail,Password:s.password,token:h}).then(S=>{t(o({loading:!1,snackbar:!0,message:"Password Reset completed",severity:"success"})),$("/")}).catch(S=>{if(S.response.status===406&&t(o({loading:!1,snackbar:!0,message:"Acccount with give email address already exists!",severity:"error"})),S.response.status===404)return t(o({loading:!1,snackbar:!0,message:"Invalid code!",severity:"error"}))})}}),{errors:l,touched:i,handleSubmit:U,isSubmitting:ae,getFieldProps:I,setFieldValue:ie,values:ne}=v;return e.jsx(e.Fragment,{children:m?e.jsx(O,{children:e.jsx(H,{value:v,children:e.jsx(M,{autoComplete:"off",noValidate:!0,onSubmit:U,children:e.jsxs(q,{children:[e.jsx(k,{title:"Create new password"}),e.jsx(A,{children:e.jsx(a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",px:2,flexGrow:"1",children:e.jsxs(L,{spacing:2,sx:{width:"100%"},children:[e.jsx(V,{clabel:" New Password",fullWidth:!0,placeholder:"",...I("password"),error:!!(i.password&&l.password),helperText:i.password&&l.password}),e.jsx(V,{clabel:"Confirm Password",fullWidth:!0,placeholder:"",...I("confirmPass"),error:!!(i.confirmPass&&l.confirmPass),helperText:i.confirmPass&&l.confirmPass})]})})}),e.jsx(P,{next:!0})]})})})}):e.jsxs(O,{children:[e.jsx(k,{title:"Reset Password"}),e.jsxs(a,{display:"flex",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",flexGrow:1,px:2,children:[e.jsx(f,{variant:'"body2',color:"grey.600",children:"Please enter the verification code sent to"}),e.jsx(f,{variant:"body2",color:"primary",sx:{my:1,fontWeight:"bold",mb:3},children:n.formEmail}),e.jsx(a,{width:"100%",children:e.jsx(te,{value:d,onChange:E,numInputs:6,isInputNum:!0,shouldAutoFocus:!0,separator:e.jsx("span",{children:" "}),containerStyle:{border:"none",width:"100%",justifyContent:"space-around"},inputStyle:{borderTop:"none",borderLeft:"none",borderRight:"none",padding:10,width:48,height:64,backgroundColor:"rgba(245, 247, 250, 1)",fontSize:24,color:"#2F86EB",boxShadow:"none",borderRadius:8,borderBottom:"0px",fontWeight:"bold"},focusStyle:{outline:"none",borderBottom:"0px",color:"#2F86EB",fontWeight:"bold"}})}),e.jsxs(a,{display:"flex",justifyContent:"space-between",sx:{my:3},children:[e.jsxs(f,{variant:'"body2',children:["Wait till ",x.minutes," mins ",x.seconds," s"]}),e.jsx(_,{sx:{fontWeight:"bold",ml:2},children:e.jsx(f,{variant:'"body2',color:"primary",children:"Resend code"})})]})]}),e.jsx(P,{back:!0,next:!0,backClick:n.handleBackToEmail,disabledNext:d.length<6,nextClick:F})]})})}const re=c("div")(()=>({backgroundColor:"#fff",height:"100vh"}));c(a)(()=>({position:"relative"}));c(a)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));function Ve(){const n=W(),{state:$}=N(),t=D(),[j,m]=b.useState(""),w=z().shape({email:C().email("Email must be a valid email address").required("Email is required")}),d=G({initialValues:{email:""},validationSchema:w,onSubmit:async(p,{setErrors:v,setSubmitting:l})=>{l(!0),n(o({loading:!0})),J.post(`${r.protocol}${r.baseUrl}${r.ChangePasswordMail2}`,{email:p.email}).then(i=>{console.log(i.data),m(p.email)}).catch(i=>{console.error(i)}).finally(()=>{n(o({loading:!1})),l(!1)}),m(p.email)}}),{errors:u,touched:h,handleSubmit:y,isSubmitting:E,getFieldProps:x,setFieldValue:F,values:B}=d;return e.jsx(K,{title:" Simplified Online Fitness Training ",children:j?e.jsx(oe,{formEmail:j,handleBackToEmail:()=>m("")}):e.jsx(re,{children:e.jsx(H,{value:d,children:e.jsx(M,{autoComplete:"off",noValidate:!0,onSubmit:y,children:e.jsxs(q,{children:[e.jsx(ee,{children:e.jsx(k,{title:"Forgot Password ?",onClose:()=>t(-1)})}),e.jsx(A,{children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:2,flexGrow:"1",children:[e.jsx(f,{variant:"subtitle1",color:"primary",sx:{mb:4},children:"Follow these steps to recover your account"}),e.jsx(L,{spacing:2,sx:{width:"100%"},children:e.jsx(X,{fullWidth:!0,placeholder:"",clabel:"Email address*",...x("email"),error:!!(h.email&&u.email),helperText:h.email&&u.email})})]})}),e.jsx(Y,{children:e.jsx(P,{next:!0})})]})})})})})}export{Ve as default};
