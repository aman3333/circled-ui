import{r as f,aP as ct,j as L,F as rt,s as gt,G as P,H as wt,bt as A,J as yt,b0 as mt,E as St,aV as Tt,ap as bt,bu as j,bv as Pt,aR as Q,x as at,aM as z,aN as I,a5 as xt}from"./index-tWVfh1a_.js";function Rt(e){const{children:n,defer:s=!1,fallback:a=null}=e,[u,m]=f.useState(!1);return ct(()=>{s||m(!0)},[s]),f.useEffect(()=>{s&&m(!0)},[s]),L.jsx(f.Fragment,{children:u?n:a})}const Mt=["anchor","classes","className","width","style"],Dt=gt("div",{shouldForwardProp:mt})(({theme:e,ownerState:n})=>P({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},n.anchor==="left"&&{right:"auto"},n.anchor==="right"&&{left:"auto",right:0},n.anchor==="top"&&{bottom:"auto",right:0},n.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),Ht=f.forwardRef(function(n,s){const{anchor:a,classes:u={},className:m,width:o,style:x}=n,R=rt(n,Mt),D=n;return L.jsx(Dt,P({className:wt("PrivateSwipeArea-root",u.root,u[`anchor${yt(a)}`],m),ref:s,style:P({[A(a)?"width":"height"]:o},x),ownerState:D},R))}),kt=["BackdropProps"],At=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],F=3,Z=20;let b=null;function v(e,n,s){return e==="right"?s.body.offsetWidth-n[0].pageX:n[0].pageX}function tt(e,n,s){return e==="bottom"?s.innerHeight-n[0].clientY:n[0].clientY}function X(e,n){return e?n.clientWidth:n.clientHeight}function it(e,n,s,a){return Math.min(Math.max(s?n-e:a+n-e,0),a)}function Lt(e,n){const s=[];for(;e&&e!==n.parentElement;){const a=I(n).getComputedStyle(e);a.getPropertyValue("position")==="absolute"||a.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&s.push(e),e=e.parentElement}return s}function Yt({domTreeShapes:e,start:n,current:s,anchor:a}){const u={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(m=>{let o=s>=n;(a==="top"||a==="left")&&(o=!o);const x=a==="left"||a==="right"?"x":"y",R=Math.round(m[u.scrollPosition[x]]),D=R>0,H=R+m[u.clientLength[x]]<m[u.scrollLength[x]];return!!(o&&H||!o&&D)})}const Xt=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Wt=f.forwardRef(function(n,s){const a=St({name:"MuiSwipeableDrawer",props:n}),u=Tt(),m={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:o="left",disableBackdropTransition:x=!1,disableDiscovery:R=!1,disableSwipeToOpen:D=Xt,hideBackdrop:H,hysteresis:et=.52,allowSwipeInChildren:Y=!1,minFlingVelocity:O=450,ModalProps:{BackdropProps:ut}={},onClose:nt,onOpen:lt,open:c=!1,PaperProps:_={},SwipeAreaProps:ft,swipeAreaWidth:V=20,transitionDuration:G=m,variant:M="temporary"}=a,pt=rt(a.ModalProps,kt),dt=rt(a,At),[ot,$]=f.useState(!1),t=f.useRef({isSwiping:null}),E=f.useRef(),J=f.useRef(),p=f.useRef(),ht=bt(_.ref,p),N=f.useRef(!1),U=f.useRef();ct(()=>{U.current=null},[c]);const W=f.useCallback((r,w={})=>{const{mode:i=null,changeTransition:l=!0}=w,d=j(u,o),h=["right","bottom"].indexOf(d)!==-1?1:-1,S=A(o),y=S?`translate(${h*r}px, 0)`:`translate(0, ${h*r}px)`,k=p.current.style;k.webkitTransform=y,k.transform=y;let g="";if(i&&(g=u.transitions.create("all",Pt({easing:void 0,style:void 0,timeout:G},{mode:i}))),l&&(k.webkitTransition=g,k.transition=g),!x&&!H){const T=J.current.style;T.opacity=1-r/X(S,p.current),l&&(T.webkitTransition=g,T.transition=g)}},[o,x,H,u,G]),B=Q(r=>{if(!N.current)return;if(b=null,N.current=!1,at.flushSync(()=>{$(!1)}),!t.current.isSwiping){t.current.isSwiping=null;return}t.current.isSwiping=null;const w=j(u,o),i=A(o);let l;i?l=v(w,r.changedTouches,z(r.currentTarget)):l=tt(w,r.changedTouches,I(r.currentTarget));const d=i?t.current.startX:t.current.startY,h=X(i,p.current),S=it(l,d,c,h),y=S/h;if(Math.abs(t.current.velocity)>O&&(U.current=Math.abs((h-S)/t.current.velocity)*1e3),c){t.current.velocity>O||y>et?nt():W(0,{mode:"exit"});return}t.current.velocity<-O||1-y>et?lt():W(X(i,p.current),{mode:"enter"})}),st=(r=!1)=>{if(!ot){(r||!(R&&Y))&&at.flushSync(()=>{$(!0)});const w=A(o);!c&&p.current&&W(X(w,p.current)+(R?15:-Z),{changeTransition:!1}),t.current.velocity=0,t.current.lastTime=null,t.current.lastTranslate=null,t.current.paperHit=!1,N.current=!0}},q=Q(r=>{if(!p.current||!N.current||b!==null&&b!==t.current)return;st(!0);const w=j(u,o),i=A(o),l=v(w,r.touches,z(r.currentTarget)),d=tt(w,r.touches,I(r.currentTarget));if(c&&p.current.contains(r.target)&&b===null){const g=Lt(r.target,p.current);if(Yt({domTreeShapes:g,start:i?t.current.startX:t.current.startY,current:i?l:d,anchor:o})){b=!0;return}b=t.current}if(t.current.isSwiping==null){const g=Math.abs(l-t.current.startX),T=Math.abs(d-t.current.startY),C=i?g>T&&g>F:T>g&&T>F;if(C&&r.cancelable&&r.preventDefault(),C===!0||(i?T>F:g>F)){if(t.current.isSwiping=C,!C){B(r);return}t.current.startX=l,t.current.startY=d,!R&&!c&&(i?t.current.startX-=Z:t.current.startY-=Z)}}if(!t.current.isSwiping)return;const h=X(i,p.current);let S=i?t.current.startX:t.current.startY;c&&!t.current.paperHit&&(S=Math.min(S,h));const y=it(i?l:d,S,c,h);if(c)if(t.current.paperHit)y===0&&(t.current.startX=l,t.current.startY=d);else if(i?l<h:d<h)t.current.paperHit=!0,t.current.startX=l,t.current.startY=d;else return;t.current.lastTranslate===null&&(t.current.lastTranslate=y,t.current.lastTime=performance.now()+1);const k=(y-t.current.lastTranslate)/(performance.now()-t.current.lastTime)*1e3;t.current.velocity=t.current.velocity*.4+k*.6,t.current.lastTranslate=y,t.current.lastTime=performance.now(),r.cancelable&&r.preventDefault(),W(y)}),K=Q(r=>{if(r.defaultPrevented||r.defaultMuiPrevented||c&&(H||!J.current.contains(r.target))&&!p.current.contains(r.target))return;const w=j(u,o),i=A(o),l=v(w,r.touches,z(r.currentTarget)),d=tt(w,r.touches,I(r.currentTarget));if(!c){var h;if(D||!(r.target===E.current||(h=p.current)!=null&&h.contains(r.target)&&(typeof Y=="function"?Y(r,E.current,p.current):Y)))return;if(i){if(l>V)return}else if(d>V)return}r.defaultMuiPrevented=!0,b=null,t.current.startX=l,t.current.startY=d,st()});return f.useEffect(()=>{if(M==="temporary"){const r=z(p.current);return r.addEventListener("touchstart",K),r.addEventListener("touchmove",q,{passive:!c}),r.addEventListener("touchend",B),()=>{r.removeEventListener("touchstart",K),r.removeEventListener("touchmove",q,{passive:!c}),r.removeEventListener("touchend",B)}}},[M,c,K,q,B]),f.useEffect(()=>()=>{b===t.current&&(b=null)},[]),f.useEffect(()=>{c||$(!1)},[c]),L.jsxs(f.Fragment,{children:[L.jsx(xt,P({open:M==="temporary"&&ot?!0:c,variant:M,ModalProps:P({BackdropProps:P({},ut,{ref:J})},M==="temporary"&&{keepMounted:!0},pt),hideBackdrop:H,PaperProps:P({},_,{style:P({pointerEvents:M==="temporary"&&!c&&!Y?"none":""},_.style),ref:ht}),anchor:o,transitionDuration:U.current||G,onClose:nt,ref:s},dt)),!D&&M==="temporary"&&L.jsx(Rt,{children:L.jsx(Ht,P({anchor:o,ref:E,width:V},ft))})]})});export{Wt as S};
