import{d as f,j as e,a as k,r as S,c as s,n as F,o as h,e as $,S as C,C as P,B as d,am as E,T as a,h as O,p as x,i as T,s as R}from"./index-tWVfh1a_.js";import{P as V}from"./Page-D7TsOLpr.js";import{c as D,b as L}from"./array-DbNmRnh0.js";import{u as B,F as I,a as M}from"./formik.esm-jmAInz8L.js";import{H as W}from"./header-Bo2DC4uj.js";import{u as m}from"./Onboarding-CSV0hQFI.js";import{L as q}from"./PhoneInput-DiPK4YCV.js";import{D as z}from"./Divider-0_Mpg1Be.js";import"./isObject-MojUmidT.js";import"./Header-C-6_pkkN.js";import"./ArrowLeft-lA8HnlgG.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./dividerClasses-ClaZwgHh.js";R("div")(()=>({display:"flex",flexDirection:"column",flex:1,flexGrow:1,height:"100vh"}));function xe({mode:t}){const{state:i}=f();return e.jsx(G,{mode:t})}const G=({mode:t})=>{const i=k(),{state:o}=f(),[H,b]=S.useState(""),g=D().shape({phone:L().required("Mobile is required")}),r=B({initialValues:{phone:(o==null?void 0:o.phone)||"",channel:"whatsapp"},validationSchema:g,onSubmit:async(n,{setErrors:J,setSubmitting:w},K)=>{b(""),w(!0),i(s({loading:!0})),i(m({phone:n.phone})),o!=null&&o.token?(i(s({loading:!1})),i(m({authType:1,email:n.phone,password:n.password,token:o==null?void 0:o.token})),l(`/onboarding/${t=="client"?"client/":""}${o!=null&&o.phone?"info":"verification"}`,{state:{...o,type:"phone"}})):F.get(`${h.protocol}${h.baseUrl}${h.sendOtp}${n.phone}&channel=${n.channel}`).then(u=>{i(m({authType:"1",phone:n.phone,password:n.password})),i(s({loading:!1,snackbar:!0,message:"Verification message sent to your mobile number!",severity:"success"})),l(`/onboarding/${t=="client"?"client/":""}verification`,{state:{...o,type:"phone",authType:u.data.type}})}).catch(u=>i(s({loading:!1,snackbar:!0,message:"Oops caught some error! Please try again",severity:"error"})))}}),l=$(),{errors:c,touched:y,handleSubmit:p,isSubmitting:N,getFieldProps:j,setFieldValue:v,setFieldError:A,values:U}=r;return console.log(c),e.jsx(V,{title:" Simplified Online Fitness Training ",children:e.jsx(I,{value:r,children:e.jsx(M,{autoComplete:"off",noValidate:!0,onSubmit:p,children:e.jsxs(C,{children:[" ",e.jsx(W,{title:"Create account",onClose:()=>l("/",{state:o}),style:{borderRadius:"32px",backgroundColor:"white",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",overflow:"hidden"}}),e.jsxs(P,{children:[e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",mt:4,children:e.jsx("img",{src:E,height:46})}),e.jsxs(d,{display:"flex",flexDirection:"column",flexGrow:"1",children:[e.jsxs(a,{variant:"h2",sx:{mt:4},children:["Enter your mobile",e.jsx("br",{}),"number"]}),e.jsxs(a,{align:"left",color:"text.secondary",component:"span",sx:{my:4,mt:2},children:["We will send you verification code to the",e.jsx("br",{}),"number you entered"]}),e.jsx(O,{spacing:2,sx:{width:"100%"},children:e.jsx(q,{fullWidth:!0,clabel:e.jsx(a,{variant:"subtitle1",children:"Phone number"}),setFieldValue:v,...j("phone"),error:c.phone,helperText:y.phone&&c.phone})}),e.jsxs(x,{variant:"contained",sx:{mt:4},size:"large",onClick:()=>{r.setFieldValue("channel","whatsapp"),p()},name:"whatsapp",children:[e.jsx(T,{icon:"ic:baseline-whatsapp",sx:{fontSize:28,mr:1}}),"  Receive code by WhatsApp"]}),e.jsx(d,{sx:{my:3,mb:2},children:e.jsx(z,{children:e.jsx(a,{color:"text.secondary",children:"OR"})})}),e.jsx(x,{onClick:()=>{r.setFieldValue("channel","sms"),p()},children:"Receive code via sms"})]})]})]})})})})};export{xe as default};
