import{r as D,j as e,a5 as q,B as n,T as f,u as v,R as w,e as M,a as S,g as _,f as E,N as Y,s as $,I,bw as J,h as R,w as Q,Y as X,bh as p,a2 as ee,c as L,bx as te}from"./index-tWVfh1a_.js";import{a as ie,b as ne,c as oe}from"./convertToLink-D3DGDIAW.js";import{I as K}from"./ImageWithFallback-C5zvNA0Z.js";import{C as le}from"./Circular-CdB5voB0.js";import{M as O}from"./More-BqGLUvK6.js";import{E as F}from"./edit-DiWhq57E.js";import{D as A}from"./Delete-fvKHvwYo.js";import{R as re}from"./ReactPlayerWithFallback-Zm03AunA.js";import{s as T}from"./search-qBW2W_DU.js";import{A as N}from"./ArrowLeft-lA8HnlgG.js";import{C as V}from"./Checkbox-5Xdp7ogM.js";import{D as P}from"./Divider-0_Mpg1Be.js";import{R as ae}from"./ReactPlayer-B1HYrz8S.js";import{a as se}from"./YouTube-BrIpEXBG.js";import{D as ce}from"./Dumbell-LvyqFLuX.js";import{M as de}from"./MenuItem-BRbCqEYh.js";import{S as he}from"./Share-D8xeKOeo.js";import{C as xe}from"./CopyLink-DOxHVA9c.js";import{h as B}from"./moment-G82_0lEo.js";function G(t){const[s,c]=D.useState(!1),d=i=>o=>{o&&o.type==="keydown"&&(o.key==="Tab"||o.key==="Shift")||c(i)};return e.jsxs("div",{children:[e.jsx(q,{anchor:"bottom",PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none"}},disableBackdropTransition:!0,open:s,onClose:d(!1),onOpen:d(!0),children:e.jsx(n,{padding:"24px 24px 36px",style:{borderTopLeftRadius:"16px",borderTopRightRadius:"16px",backgroundColor:"#fff"},children:e.jsxs(n,{display:"flex",flexDirection:"column",component:"form",children:[e.jsx(n,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{textTransform:"capitalize"},children:e.jsx(f,{variant:"body",children:t==null?void 0:t.title})}),(t==null?void 0:t.title)&&e.jsx(P,{sx:{my:1}}),t.items.map(i=>e.jsx(e.Fragment,{children:e.jsxs(de,{sx:{px:0},onClick:()=>{i.onClick(),c(!1)},children:[i.icon,e.jsx(f,{align:"center",variant:"body",color:i.isError?"error.main":"text.primary",children:i.title})]})}))]})})}),e.jsx("div",{onClick:i=>{i.stopPropagation(),c(!0)},children:t.children})]})}const ue=$("div")(({theme:t})=>({background:"linear-gradient(180deg, #2B4057 0%, rgba(43, 64, 87, 0) 100%)",position:"absolute",dispatch:"flex",flexDirection:"column",top:0,left:0,paddingLeft:12,paddingRight:12,width:"100%",display:"flex",alignItems:"center"}));function Ke(t){const s=v(l=>l.Library.videos),c=v(l=>l.Sync.libMedia),[d,i]=w.useState(!1),[o,m]=w.useState(""),[r,u]=w.useState({}),a=()=>i(!1),x=M(),h=S(),{showConfirmationModal:g}=_(),b=l=>{var k;let C=(k=t==null?void 0:t.selectedWorkout)==null?void 0:k.findIndex(z=>z._id==l._id),y=[...t.selectedWorkout];C>-1?y.splice(C,1):y.push({...l,media:`https://circled-videos.s3.us-east-1.amazonaws.com/${l.key}`}),t.setSelectedWorkout(y)},W=l=>{g("Are you sure?","You are going to delete this video","Delete").then(C=>{h(J({_id:l,savedToLibrary:!1}))})},j=D.useMemo(()=>t.searchKey==""?[...Object.values(c),...s]:T([...Object.values(c),...s],["title"],t.searchKey),[t.searchKey,s,c]),Z=l=>{const C=l.getInternalPlayer();if(C){const y=C.videoHeight,U=`calc(100vw / ${C.videoWidth/y})`;y&&m(U)}};return e.jsxs(n,{height:j.length==0?"100%":"auto",display:j.length==0?"flex":"block",flexDirection:"column",alignItems:"flex-start",children:[t!=null&&t.slectionMode?null:e.jsxs(E,{variant:"text",color:"primary",sx:{color:"primary.main",my:1},onClick:l=>document.getElementById("addvideoinput").click(),children:[e.jsx("input",{id:"addvideoinput",accept:"video/*",type:"file",onChange:l=>x("/library/editvideo",{state:{mode:"add",file:l.target.files[0]}}),style:{display:"none"}}),e.jsx(f,{sx:{fontSize:18,color:"primary.main"},children:"Add video"})]}),j.length==0?e.jsx(n,{flexGrow:1,width:"100%",height:"100%",flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsxs(f,{align:"center",color:"grey.600",children:["No saved videos! ",e.jsx("br",{}),"Add from phone or workouts."]})}):j==null?void 0:j.map((l,C)=>{var y;return e.jsx(me,{title:l.title||"unamed",id:l._id||l.id,url:l.key,mode:l.mode,type:l.type,progress:l.progress,onClick:()=>{t!=null&&t.slectionMode?(i(!0),u({...l})):x("/library/editvideo",{state:{mode:"edit",...l}})},onChangeSelection:()=>b(l),checked:!!((y=t==null?void 0:t.selectedWorkout)!=null&&y.find(k=>k._id==l._id)),deleteVideo:()=>W(l._id),slectionMode:t==null?void 0:t.slectionMode,selectedWorkout:t==null?void 0:t.selectedWorkout,setSelectedWorkout:t==null?void 0:t.setSelectedWorkout})}),e.jsx(Y,{open:d,onClose:a,maxWidth:"lg",fullWidth:!0,fullScreen:!0,children:e.jsxs(n,{sx:{bgcolor:"#000",width:"100%",height:"100%"},children:[e.jsx(ue,{display:"flex",flexDirection:"column",children:e.jsx(n,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:e.jsxs(n,{width:"100%",display:"flex",alignItems:"center",pt:1,children:[e.jsx(I,{onClick:()=>a(),sx:{color:"common.white"},children:e.jsx(N,{})})," ",e.jsx(f,{variant:"subtitle1",color:"common.white",children:r==null?void 0:r.title})]})})}),e.jsx(n,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(re,{url:r!=null&&r.key?ie(r==null?void 0:r.key,"/"):"",width:"100%",controls:!0,playing:!0,onReady:Z,height:o||void 0,style:{zIndex:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100vw","& video":{width:"100vw"}}})})]})})]})}const me=({title:t,url:s,onClick:c,slectionMode:d,deleteVideo:i,checked:o,onChangeSelection:m,mode:r,type:u,progress:a,id:x})=>{S();let h=v(g=>g.Sync.libMedia[x]);return e.jsxs(e.Fragment,{children:[e.jsx(n,{py:3,children:e.jsxs(R,{direction:"row",justifyContent:"space-between",onClick:c,children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(n,{bgcolor:"#f0f0f0",borderRadius:1,width:100,height:65,mr:1,position:"relative",sx:{overflow:"hidden"},children:r=="upload"?e.jsx(n,{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(le,{value:h==null?void 0:h.progress})}):e.jsx(K,{variant:"rounded",style:{width:"100%",height:"100%",objectFit:"cover"},src:ne(s,"/")||"/images/instructor/exerciseImage.png"})}),e.jsx(f,{sx:{textTransform:"capitalize"},children:t})]}),d?e.jsx(V,{color:"primary",checked:o,onChange:m}):r=="upload"?"":e.jsx(n,{onClick:g=>g.stopPropagation(),children:e.jsx(G,{items:[{title:"Edit video",icon:e.jsx(F,{sx:{mr:2}}),onClick:c},{title:"Remove",icon:e.jsx(A,{sx:{mr:2,color:"error.main"}}),onClick:i,isError:!0}],title:t,children:e.jsx(I,{children:e.jsx(O,{sx:{fontSize:32,color:"text.primary"}})})})})]})}),e.jsx(P,{sx:{borderColor:"rgba(231, 238, 248, 1)"}})]})};var fe=ae.createReactPlayer,H=se.default,ge=fe([{key:"youtube",canPlay:H.canPlay,lazyPlayer:H}]);const ye=Q(ge),je=$("div")(({theme:t})=>({background:"linear-gradient(180deg, #2B4057 0%, rgba(43, 64, 87, 0) 100%)",position:"absolute",dispatch:"flex",flexDirection:"column",top:0,left:0,paddingLeft:12,paddingRight:12,width:"100%",display:"flex",alignItems:"center"}));function Oe(t){const s=v(o=>o.Library.publicVideos);M(),S();const{showConfirmationModal:c}=_(),d=o=>{var u;let m=(u=t==null?void 0:t.selectedWorkout)==null?void 0:u.findIndex(a=>a._id==o._id),r=[...t.selectedWorkout];m>-1?r.splice(m,1):r.push({...o,media:o.href,type:"youtube"}),t.setSelectedWorkout(r)},i=D.useMemo(()=>t.searchKey==""?s:T(s,["title"],t.searchKey),[t.searchKey,s]);return e.jsx(n,{height:i.length==0?"100%":"auto",display:i.length==0?"flex":"block",flexDirection:"column",alignItems:"flex-start",children:i.length==0?e.jsx(n,{flexGrow:1,width:"100%",flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsxs(f,{align:"center",color:"grey.600",children:["No public videos! ",e.jsx("br",{})]})}):i==null?void 0:i.map((o,m)=>{var r;return e.jsx(Ce,{title:o.title||"unamed",id:o._id,url:o.href,onChangeSelection:()=>d(o),checked:!!((r=t==null?void 0:t.selectedWorkout)!=null&&r.find(u=>u._id==o._id)),slectionMode:t==null?void 0:t.slectionMode,selectedWorkout:t==null?void 0:t.selectedWorkout,setSelectedWorkout:t==null?void 0:t.setSelectedWorkout})})})}const Ce=({title:t,url:s,onClick:c,onChangeSelection:d,checked:i,slectionMode:o})=>{const[m,r]=w.useState(!1),[u,a]=w.useState(""),x=()=>r(!0),h=()=>r(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{open:m,onClose:h,maxWidth:"lg",fullWidth:!0,fullScreen:!0,children:e.jsxs(n,{sx:{bgcolor:"#000",width:"100%",height:"100%"},children:[e.jsx(je,{display:"flex",flexDirection:"column",children:e.jsx(n,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:e.jsxs(n,{width:"100%",display:"flex",alignItems:"center",pt:1,children:[e.jsx(I,{onClick:()=>h(),sx:{color:"common.white"},children:e.jsx(N,{})})," ",e.jsx(f,{variant:"subtitle1",color:"common.white",children:t})]})})}),e.jsx(n,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(ye,{url:s,width:"100%",controls:!0,playing:!0,height:u||void 0,style:{zIndex:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100vw","& video":{width:"100vw"}}})})]})}),e.jsx(n,{py:2,children:e.jsxs(R,{direction:"row",justifyContent:"space-between",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(n,{bgcolor:"#f0f0f0",borderRadius:1,width:100,height:65,mr:1,sx:{overflow:"hidden"},onClick:x,children:e.jsx(K,{variant:"rounded",style:{width:"100%",height:"100%",objectFit:"cover"},src:oe(s)||"/images/instructor/exerciseImage.png"})}),e.jsx(f,{onClick:x,sx:{textTransform:"capitalize"},children:t})]}),o&&e.jsx(V,{color:"primary",checked:i,onChange:d})]})})]})};function be(t){return e.jsxs(X,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("g",{"clip-path":"url(#clip0_6507_23488)",children:e.jsx("path",{d:"M21.155 3.272L18.871 0.913C18.5905 0.624966 18.2553 0.39584 17.8851 0.239061C17.5149 0.0822824 17.1171 0.00100643 16.715 0L12 0C10.8478 0.00145452 9.73132 0.40009 8.83875 1.12872C7.94618 1.85735 7.3321 2.87141 7.1 4H7C5.67441 4.00159 4.40356 4.52888 3.46622 5.46622C2.52888 6.40356 2.00159 7.67441 2 9V19C2.00159 20.3256 2.52888 21.5964 3.46622 22.5338C4.40356 23.4711 5.67441 23.9984 7 24H13C14.3256 23.9984 15.5964 23.4711 16.5338 22.5338C17.4711 21.5964 17.9984 20.3256 18 19V18.9C19.1286 18.6679 20.1427 18.0538 20.8713 17.1613C21.5999 16.2687 21.9985 15.1522 22 14V5.36C22.0015 4.58042 21.6983 3.83112 21.155 3.272ZM13 22H7C6.20435 22 5.44129 21.6839 4.87868 21.1213C4.31607 20.5587 4 19.7956 4 19V9C4 8.20435 4.31607 7.44129 4.87868 6.87868C5.44129 6.31607 6.20435 6 7 6V14C7.00159 15.3256 7.52888 16.5964 8.46622 17.5338C9.40356 18.4711 10.6744 18.9984 12 19H16C16 19.7956 15.6839 20.5587 15.1213 21.1213C14.5587 21.6839 13.7957 22 13 22ZM17 17H12C11.2044 17 10.4413 16.6839 9.87868 16.1213C9.31607 15.5587 9 14.7956 9 14V5C9 4.20435 9.31607 3.44129 9.87868 2.87868C10.4413 2.31607 11.2044 2 12 2H16V4C16 4.53043 16.2107 5.03914 16.5858 5.41421C16.9609 5.78929 17.4696 6 18 6H20V14C20 14.7956 19.6839 15.5587 19.1213 16.1213C18.5587 16.6839 17.7957 17 17 17Z",fill:"#374957"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_6507_23488",children:e.jsx("rect",{width:"24",height:"24",fill:"white"})})})]})}function Fe(t){const s=M(),c=S(),d=v(a=>a.Library.workouts),i=D.useMemo(()=>t.searchKey==""?d:T(d,["Title"],t.searchKey),[t.searchKey,d]),{showConfirmationModal:o}=_(),m=a=>{var g;let x=(g=t==null?void 0:t.selectedWorkout)==null?void 0:g.findIndex(b=>b._id==a._id),h=[...t.selectedWorkout];x>-1?h.splice(x,1):h=[a],t.setSelectedWorkout(h)},r=a=>{c(p({...a,_id:ee().toString()})).then(()=>{c(L({snackbar:!0,message:"Duplicate workout created",severity:"info"}))})},u=a=>{o("Are you sure?","You are going to delete this workout","Delete").then(x=>{x&&c(te(a))})};return e.jsxs(n,{height:i.length==0?"100%":"auto",display:i.length==0?"flex":"block",flexDirection:"column",alignItems:"flex-start",children:[t.slectionMode?null:e.jsx(E,{variant:"text",color:"primary",onClick:()=>{s("/library/addworkout"),t.setWorkoutData({Title:"",Exercise:[]})},sx:{fontSize:18,color:"primary.main",my:1},children:e.jsx(f,{sx:{fontSize:18,color:"primary.main"},children:"Create workout"})}),i.length==0?e.jsx(n,{flexGrow:1,width:"100%",flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsxs(f,{align:"center",color:"grey.600",children:["No workouts saved.",e.jsx("br",{}),"Add from programs or create new."]})}):i.map((a,x)=>{var h;return e.jsx(ke,{...a,onClick:()=>{t!=null&&t.slectionMode||(t.setWorkoutData(a),s("/library/addworkout"))},onDuplicate:()=>r(a),onChangeSelection:()=>m(a),checked:!!((h=t==null?void 0:t.selectedWorkout)!=null&&h.find(g=>g._id==a._id)),onShare:()=>{navigator.share&&navigator.share({title:a.Title,url:`shared/workout/${a._id}`})},onDeleteWorkout:()=>u(a._id),slectionMode:t==null?void 0:t.slectionMode,selectedWorkout:t==null?void 0:t.selectedWorkout,setSelectedWorkout:t==null?void 0:t.setSelectedWorkout})})]})}const ke=({_id:t,Title:s,createdAt:c,updatedAt:d,onClick:i,onDuplicate:o,onShare:m,slectionMode:r,Exercise:u,onDeleteWorkout:a,checked:x,Program:h,onChangeSelection:g})=>{const b=S(),W=()=>{navigator&&navigator.clipboard!=null&&navigator.clipboard.writeText(`${window.location.origin}/shared/workout/${t}`),b(L({snackbar:!0,severity:"success",message:"Link copied to clipboard"}))};return e.jsxs(e.Fragment,{children:[e.jsx(n,{py:2.5,onClick:i,children:e.jsxs(R,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(n,{display:"flex",flexDirection:"column",justifyContent:"center",children:[e.jsx(f,{sx:{textTransform:"capitalize",fontWeight:500,mb:.5},children:s}),e.jsx(f,{color:"text.secondary",variant:"body2",sx:{textTransform:"capitalize"},children:d==c?`Added. ${B(c).format("DD MMM YYYY")}`:`Updated. ${B(d).format("DD MMM YYYY")}`})]}),r?e.jsx(V,{color:"primary",checked:x,onChange:g}):e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx("small",{children:u.length}),"   ",e.jsx(ce,{})," ",e.jsx(n,{onClick:j=>j.stopPropagation(),children:e.jsx(G,{items:[{title:"Copy link",icon:e.jsx(xe,{sx:{mr:2}}),onClick:W},{title:"Share",icon:e.jsx(he,{sx:{mr:2}}),onClick:m},{title:"Edit workout",icon:e.jsx(F,{sx:{mr:2}}),onClick:i},{title:"Duplicate workout",icon:e.jsx(be,{sx:{mr:2}}),onClick:o},{title:"Remove",icon:e.jsx(A,{sx:{mr:2,color:"error.main"}}),onClick:a,isError:!0}],title:s,children:e.jsx(I,{children:e.jsx(O,{sx:{fontSize:32,color:"text.primary"}})})})})]})]})}),e.jsx(P,{sx:{borderColor:"rgba(231, 238, 248, 1)"}})]})};export{G as A,Ke as V,Fe as W,Oe as a};
