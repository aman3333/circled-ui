import{d as b,j as i,a as w,r as S,c as o,n as E,o as d,e as F,S as T,C as B,B as l,am as $,T as n,h as D,p as y,s as c}from"./index-tWVfh1a_.js";import{P as L}from"./Page-D7TsOLpr.js";import{c as P,b as I}from"./array-DbNmRnh0.js";import{u as O,F as V,a as R}from"./formik.esm-jmAInz8L.js";import{L as M}from"./LabeledInput-B3Qf7l4R.js";import{H as N}from"./header-Bo2DC4uj.js";import{u as p}from"./Onboarding-CSV0hQFI.js";import"./isObject-MojUmidT.js";import"./TextField-cyeEFY3i.js";import"./OutlinedInput-D3YoqtXT.js";import"./useFormControl-BEzaUW9U.js";import"./InputBase-7pV38TnQ.js";import"./Popover-COOgvQR_.js";import"./ListContext-BQPXTeBj.js";import"./useControlled-DiwPEJyR.js";import"./isMuiElement-CENM59Ut.js";import"./Header-C-6_pkkN.js";import"./ArrowLeft-lA8HnlgG.js";c("div")(()=>({display:"flex",flexDirection:"column",flex:1,flexGrow:1,height:"100vh"}));c(l)(()=>({position:"relative"}));c(l)(()=>({position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:52,paddingBottom:24,zIndex:100,top:0}));c(y)(({theme:r})=>({height:52,alignItems:"center",borderRadius:40,background:"#fff",border:"1.5px solid #C3CBD9",borderColor:"#C3CBD9",boxShadow:"0px 4px 4px rgba(43, 64, 87, 0.1)",fontFamily:"Proxima Nova",paddingLeft:"12px",color:"#172A44",fontSize:16,fontWeight:"bold",marginBottom:8,border:"1.5px solid "}));function me({mode:r}){const{state:a}=b();return i.jsx(W,{mode:r})}const W=({mode:r})=>{const a=w(),{state:e}=b(),[u,j]=S.useState(""),v=P().shape({email:I().email("Email must be a valid email address").required("Email is required")}),x=O({initialValues:{email:(e==null?void 0:e.email)||""},validationSchema:v,onSubmit:async(t,{setErrors:H,setSubmitting:g})=>{j(""),g(!0),a(o({loading:!0})),a(o({loading:!1})),a(p({email:t.email})),g(!0),a(o({loading:!0})),e!=null&&e.token?(a(o({loading:!1})),a(p({authType:1,email:t.email,password:t.password,token:e==null?void 0:e.token})),s(`/onboarding/${r=="client"?"client/":""}${e!=null&&e.email?"info":"verification"}`,{state:e})):E.post(`${d.protocol}${d.baseUrl}${d.SendVerifyMail}`,{email:t.email}).then(m=>{a(p({authType:"1",email:t.email,password:t.password})),a(o({loading:!1,snackbar:!0,message:"Verification mail sent to your email!",severity:"success"})),s(`/onboarding/${r=="client"?"client/":""}verification`,{state:{...e,authType:m.data.type}})}).catch(m=>m.response.status===406?a(o({loading:!1,snackbar:!0,message:"Account with give email address already exists!",severity:"error"})):a(o({loading:!1,snackbar:!0,message:"Oops caught some error! Please try again",severity:"error"})))}}),s=F(),{errors:h,touched:f,handleSubmit:k,isSubmitting:q,getFieldProps:C,setFieldValue:z,setFieldError:A,values:G}=x;return i.jsx(L,{title:" Simplified Online Fitness Training ",children:i.jsx(V,{value:x,children:i.jsx(R,{autoComplete:"off",noValidate:!0,onSubmit:k,children:i.jsxs(T,{children:[" ",i.jsx(N,{title:"Create account",onClose:()=>s("/",{state:e}),style:{borderRadius:"32px",backgroundColor:"white",boxShadow:"0px 4px 54px rgba(225, 231, 240, 0.5)",overflow:"hidden"}}),i.jsxs(B,{children:[i.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",mt:4,children:i.jsx("img",{src:$,height:46})}),i.jsxs(l,{display:"flex",flexDirection:"column",flexGrow:"1",children:[u?i.jsxs(n,{align:"left",color:"text.secondary",component:"span",sx:{my:4},children:["This account ",u," already exist."," ",i.jsx(n,{onClick:()=>s("/login"),color:"primary.main",component:"span",children:"Login"})," ","or change email to continue."]}):i.jsxs(n,{align:"left",color:"text.secondary",component:"span",sx:{my:4},children:["Well check if you have an account if not"," ",i.jsx("br",{})," you will create one"]}),i.jsx(D,{spacing:2,sx:{width:"100%"},children:i.jsx(M,{fullWidth:!0,disabled:e==null?void 0:e.email,placeholder:"Example@email.com",clabel:i.jsx(n,{variant:"subtitle1",children:"Email address"}),...C("email"),error:!!(f.email&&h.email),helperText:f.email&&h.email})}),i.jsx(y,{variant:"contained",sx:{mt:4},type:"submit",children:"Continue"})]})]})]})})})})};export{me as default};
